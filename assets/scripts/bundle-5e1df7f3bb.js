!function e(t,a,i){function s(r,n){if(!a[r]){if(!t[r]){var l="function"==typeof require&&require;if(!n&&l)return l(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[r]={exports:{}};t[r][0].call(c.exports,function(e){var a=t[r][1][e];return s(a?a:e)},c,c.exports,e,t,a,i)}return a[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/animation-mock-data.js":[function(e,t,a){"use strict";var i=[{x:.2,y:.2,r:5,g:30},{x:.8,y:.3,r:3,g:25},{x:.6,y:.8,r:8,g:32},{x:.65,y:.4,r:10,g:20},{x:.7,y:.5,r:4,g:30},{x:.71,y:.4,r:3,g:72},{x:.6,y:.6,r:2,g:20},{x:.76,y:.43,r:4,g:10},{x:.5,y:.5,r:4,g:10},{x:.75,y:.5,r:3,g:18},{x:.6,y:.8,r:2,g:20},{x:.58,y:.75,r:6,g:40},{x:.22,y:.9,r:4,g:30}],s=[{p:12,g:60,type:"Ultra-Light"},{p:15,g:71,type:"Medium"},{p:23,g:73,type:"Medium"},{p:60,g:77,type:"Ultra-Light"},{p:23,g:81,type:"Ultra-Light"},{p:35,g:82,type:"Light"},{p:15,g:85,type:"Medium"},{p:40,g:90,type:"Condensate"},{p:25,g:105,type:"Ultra-Deep"},{p:25,g:110,type:"Light"},{p:20,g:110,type:"Ultra-Deep"},{p:33,g:120,type:"Medium"}],o=[[{g:60,type:"Ultra-Light",x:"oil1",y:30},{g:73,type:"Light",x:"oil2",y:40},{g:77,type:"Medium",x:"oil3",y:25},{g:81,type:"Ultra-Light",x:"oil4",y:60},{g:105,type:"Ultra-Deep",x:"oil5",y:65},{g:110,type:"Extra-Heavy",x:"oil6",y:78},{g:110,type:"Ultra-Deep",x:"oil7",y:80},{g:120,type:"Heavy",x:"oil8",y:72}],[{g:60,type:"Ultra-Light",x:"oil1",y:20},{g:73,type:"Light",x:"oil2",y:19},{g:77,type:"Medium",x:"oil3",y:18},{g:81,type:"Ultra-Light",x:"oil4",y:12},{g:105,type:"Ultra-Deep",x:"oil5",y:25},{g:110,type:"Extra-Heavy",x:"oil6",y:30},{g:110,type:"Ultra-Deep",x:"oil7",y:20},{g:120,type:"Heavy",x:"oil8",y:10}],[{g:60,type:"Ultra-Light",x:"oil1",y:10},{g:73,type:"Light",x:"oil2",y:14},{g:77,type:"Medium",x:"oil3",y:34},{g:81,type:"Ultra-Light",x:"oil4",y:9},{g:105,type:"Ultra-Deep",x:"oil5",y:15},{g:110,type:"Extra-Heavy",x:"oil6",y:2},{g:110,type:"Ultra-Deep",x:"oil7",y:10},{g:120,type:"Heavy",x:"oil8",y:38}]],r=s.map(function(e){return{p:e.p,g:e.g,type:e.type,x:e.p*e.g%43,xAlt:e.p*e.g%47}});t.exports={map:i,productionGraph:s,supplyChain:o,oilAttributes:r}},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/blurbs.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/blurbs.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/global-extents.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/global-extents.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/info.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/info.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/metadata.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/metadata.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/oil-fields.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/oilfields.geojson"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/opgee.js":[function(e,t,a){"use strict";var i=e("backbone"),s=e("../models/opgee.js"),o=i.Collection.extend({model:s});t.exports=o},{"../models/opgee.js":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js",backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/prelim.js":[function(e,t,a){"use strict";var i=e("backbone"),s=e("../models/prelim.js"),o=i.Collection.extend({model:s});t.exports=o},{"../models/prelim.js":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js",backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/prices.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/prices.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/related.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:"assets/data/related.json"});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/main.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/map"),o=i(s),r=e("lodash/uniq"),n=i(r);e("./wnumb");var l=e("jquery"),d=e("backbone"),c=e("clipboard"),u=e("./utils"),h=e("./routes/router"),m=e("./collections/oil-fields"),p=e("./collections/prices"),f=e("./collections/related"),g=e("./collections/blurbs"),b=e("./collections/info"),v=e("./collections/global-extents"),y=e("./collections/metadata"),w=e("./collections/opgee"),_=e("./collections/prelim"),x=window.scrollY;window.Oci={Models:{},Collections:{opgee:new w([{id:"run0000"}]),prelim:new _({id:"run01"})},Views:{},Routers:{},data:{globalExtents:{}},init:function(){Oci.getData(),Oci.getGlobalExtents(),Oci.getInfo(),Oci.getPrices(),Oci.getBlurbs(),Oci.getOilfields(),Oci.getRelated(),Oci.getMetadata(),Oci.router=new h,d.history.start()},getData:function(){Oci.Collections.opgee.models.concat(Oci.Collections.prelim.models).forEach(function(e){e.fetch({async:!1})})},getInfo:function(){var e=new b;e.fetch({success:function(e){Oci.data.info=e.attributes,Oci.regions=(0,n["default"])((0,o["default"])(e.attributes,function(e){return e.Region})),Oci.types=(0,n["default"])((0,o["default"])(e.attributes,function(e){return e["Overall Crude Category"]}))},async:!1})},getGlobalExtents:function(){var e=new v;e.fetch({success:function(e){Oci.data.globalExtents=e.attributes},async:!1})},getBlurbs:function(){var e=new g;e.fetch({success:function(e){Oci.blurbs=e.attributes},async:!1})},getOilfields:function(){var e=new m;e.fetch({async:!1,success:function(e){Oci.oilfields=e.attributes}})},getPrices:function(){var e=new p;e.fetch({success:function(e){Oci.prices=e.attributes,Oci.origPrices=u.cloneObject(e.attributes)},async:!1})},getRelated:function(){var e=new f;e.fetch({success:function(e){Oci.relatedOils=e.attributes},async:!1})},getMetadata:function(){var e=new y;e.fetch({success:function(e){Oci.data.metadata=e.attributes},async:!1})},showPricesModal:function(e){e?l("#modal-prices").addClass("revealed"):l("#modal-prices").removeClass("revealed")},prices:{},carbonTax:20,order:{upstream:["Exploration","Drilling","Production","Processing","Upgrading","Maintenance","Waste","Venting, Flaring, and Fugitive Emissions","Diluent","Miscellaneous","Transport to Refinery","Offsite emissions"],downstream:["Transport to Consumers","Gasoline","Jet Fuel","Diesel","Fuel Oil","Petroleum Coke","Residual Fuels","Light Ends (RFG)","Liquefied Petroleum Gas (LPG)"]}},l(document).ready(function(){Oci.init(),l("[data-dropdown-nav]").click(function(e){e.preventDefault(),e.stopPropagation(),l(this).parents("nav.page-nav").toggleClass("open")}),l(document).click(function(e){e.stopPropagation(),"searchbar-mobile"!==e.target.id&&l("nav.page-nav").removeClass("open")}),l(".meta-menu .meta-menu-element").hover(function(){l(this).find(".menu-dropdown").addClass("open")},function(){l(this).find(".menu-dropdown").removeClass("open")});var e=new c("li.copylink");l("li.copylink").attr("data-clipboard-text",window.location),e.on("success",function(e){l(e.trigger).attr("data-title-after","Copied!")}),e.on("error",function(e){l(e.trigger).attr("data-title-after",u.fallbackMessage(e.action))}),l("li.copylink").on("mouseout",function(e){l(e.currentTarget).removeAttr("data-title-after")}),l(window).scroll(function(){l(this).scrollTop()>300?window.scrollY>x?l("#site-header").addClass("site-header-sticky-share"):window.scrollY<x&&l("#site-header").removeClass("site-header-sticky-share"):l("#site-header").removeClass("site-header-sticky-share"),x=window.scrollY}),l(".icon-main-share").click(function(){l(".nav-component-share").toggleClass("share-nav-open")}),l(".search-main input").focus(function(e){l(e.currentTarget).parent().find(".search-results").addClass("visible")}),l(".search-main input").blur(function(e){setTimeout(function(){l(e.currentTarget).parent().find(".search-results").removeClass("visible")},200)})})},{"./collections/blurbs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/blurbs.js","./collections/global-extents":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/global-extents.js","./collections/info":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/info.js","./collections/metadata":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/metadata.js","./collections/oil-fields":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/oil-fields.js","./collections/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/opgee.js","./collections/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/prelim.js","./collections/prices":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/prices.js","./collections/related":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/collections/related.js","./routes/router":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/routes/router.js","./utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./wnumb":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/wnumb.js",backbone:"backbone",clipboard:"clipboard",jquery:"jquery","lodash/map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/map.js","lodash/uniq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/uniq.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:function(){return"assets/data/opgee/opgee_"+this.id+".json"}});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js":[function(e,t,a){"use strict";var i=e("backbone"),s=i.Model.extend({url:function(){return"assets/data/prelim/prelim_"+this.id+".json"}});t.exports=s},{backbone:"backbone"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/routes/router.js":[function(e,t,a){"use strict";var i=e("backbone"),s=e("jquery"),o=e("../views/prices"),r=e("../views/supplycurve"),n=e("../views/compareoils"),l=e("../views/emissionsdrivers"),d=e("../views/oildetails"),c=e("../views/homepage"),u=e("../views/mapview"),h=e("../views/compareview"),m=e("../views/about"),p=e("../views/glossary"),f=e("../views/methodology"),g=e("../views/team"),b=e("../views/models"),v=e("../views/termsofuse"),y=e("../views/demovideos"),w=5e3,_=i.Router.extend({initialize:function(){new o},routes:{"":"homePage","total-emissions":"production","supply-chain":"supplyChain",analysis:"oilAttributes","oil/:id":"oilDetails","compare/:id/:compid":"compareView",map:"location",about:"about","glossary(/:elementID)":"glossary","methodology(/:elementID)":"methodology",team:"team",models:"models",termsofuse:"termsofuse",demovideos:"demovideos",demo:"playDemo"},playDemo:function(){var e=this,t=0,a=function i(){switch(t){case 0:e.execute(e.supplyCurve,[null]);break;case 1:e.execute(e.compareOils,[null]);break;case 2:e.execute(e.emissionsDrivers,[null]);break;case 3:e.execute(e.oilDetails,["us-alaskan-north-slope",null])}setTimeout(function(){t=(t+1)%4,i()},w)};a()},execute:function(e,t){this.allRoutes(),e&&e.apply(this,t)},production:function(){Oci.view=new r,s("#menu-production").addClass("active"),s(window).scrollTop(0)},supplyChain:function(){Oci.view=new n,s("#menu-supply").addClass("active"),s(window).scrollTop(0)},oilAttributes:function(){Oci.view=new l,s("#menu-attributes").addClass("active"),s(window).scrollTop(0)},oilDetails:function(e){Oci.view=new d({oil:e}),s(window).scrollTop(0)},compareView:function(e,t){Oci.view=new h({oil:e,comparisonOil:t}),s(window).scrollTop(0)},homePage:function(){Oci.view=new c,s(window).scrollTop(0)},location:function(){Oci.view=new u,s("#menu-location").addClass("active"),s(window).scrollTop(0)},about:function(){Oci.view=new m,s("#menu-about").addClass("active"),s(window).scrollTop(0)},glossary:function(e){Oci.view=new p({scrollTo:e}),s("#menu-glossary").addClass("active"),s(window).scrollTop(0)},methodology:function(e){Oci.view=new f({scrollTo:e}),s("#menu-methodology").addClass("active"),s(window).scrollTop(0)},team:function(){Oci.view=new g,s("#menu-about").addClass("active"),s(window).scrollTop(0)},models:function(){Oci.view=new b,s("#menu-about").addClass("active"),s(window).scrollTop(0)},termsofuse:function(){Oci.view=new v,s("#menu-termsofuse").addClass("active"),s(window).scrollTop(0)},demovideos:function(){Oci.view=new y,s("#menu-demovideos").addClass("active"),s(window).scrollTop(0)},allRoutes:function(){Oci.view&&(s("body").unbind(),s(window).off("resize"),Oci.view.undelegateEvents(),s(window).off("scroll.custom"),s("body").off("click.custom"),s(".d3-tip").remove(),s("#menu-block li").removeClass("active"),s("#menu-supply").removeClass("active"),s(".component-search input").off("input"),s(".component-search input").off("keyup"),s(".component-search input").val(""),s(".component-search .search-results").html("")),ga("send","pageview",window.location.hash)}});t.exports=_},{"../views/about":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/about.js","../views/compareoils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/compareoils.js","../views/compareview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/compareview.js","../views/demovideos":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/demovideos.js","../views/emissionsdrivers":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/emissionsdrivers.js","../views/glossary":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/glossary.js","../views/homepage":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/homepage.js","../views/mapview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/mapview.js","../views/methodology":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/methodology.js","../views/models":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/models.js","../views/oildetails":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/oildetails.js","../views/prices":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/prices.js","../views/supplycurve":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/supplycurve.js","../views/team":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/team.js","../views/termsofuse":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/termsofuse.js",backbone:"backbone",jquery:"jquery"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/about.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<section class="intro intro-about"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">About</h1> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <article id="about-view" class="view"> <div class="row"> <div class="prose prose-content container-content"> <div class="prose prose-content"> <p class="prose-callout">The Oil-Climate Index (OCI) was developed to alert public and private stakeholders to the full array of oils’ climate impacts from various perspectives, with an eye toward informing investment, development, operations, and governance of the oil supply chain. The index provides new knowledge that these stakeholders can take into account to make more informed, strategic, and durable decisions about oil development, operations, and infrastructure planning. For instance, it can be used to analyze public policies to reduce oils’ greenhouse gas (GHG) emissions.</p> <p>The OCI is an analytic tool that estimates and compares the total life-cycle GHG emissions of individual oils—from upstream extraction to midstream refining to downstream end use. It also highlights variations in the GHG emissions profiles of different oils in different stages of the supply chain. Oils that are in production as well as prospective resources can be modeled. As the characteristics of oil changes, the OCI enables stakeholders to compare diversifying oils’ GHG footprints and to plan ahead to mitigate the climate impacts of tomorrow’s oils.</p> <p><a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a> of the OCI modeled 30 global oils; 75 oils, representing nearly 25 percent of global oil production as of mid-2016, were modeled in Phase 2 of the index.</p> <p>Phase 2 of the OCI was developed with funding from the William and Flora Hewlett Foundation, the ClimateWorks Foundation, the Rockefeller Family Fund, the Alfred P. Sloan Foundation, and the Carnegie Endowment for International Peace. The Oak Foundation and the blue moon fund joined this list in funding <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a> of the OCI.</p> <p>The Carnegie Endowment for International Peace is a unique global network of policy research centers in India, Russia, China, Europe, the Middle East, and the United States. The institution’s mission, dating back more than a century, is to advance the cause of peace through analysis and development of fresh policy ideas and direct engagement and collaboration with decisionmakers in government, business, and civil society. Working together, Carnegie’s centers bring the inestimable benefit of multiple national viewpoints to bilateral, regional, and global issues.</p> <p>The Carnegie Energy and Climate Program works with global experts who focus on issues relating to energy technology, environmental science, and political economy to develop practical solutions for policymakers around the world. The program aims to provide the leadership and the policy framework necessary to minimize the risks that stem from global climate change and competition for resources.</p> <p><a href="http://developmentseed.com" target="_blank">Development Seed</a> created the first version of the OCI web tool, which has subsequently been expanded and updated in this second version.</p> </div> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<section class="section-callout section-content section-bluebar"> <div class="row"> <h3 class="section-callout__header">More Information on the Oil Index</h3> <div class="subsection-container"> <div class="section-subsection"> <h4 class="header-section-subsection">Using the OCI</h4> <span><a href="#demovideos">Demonstration Videos</a></span> </div> <div class="section-subsection"> <h4 class="header-section-subsection">Recent news and the OCI blog</h4> <span><a href="http://carnegieendowment.org/oci" target="_blank">Visit Carnegie\'s OCI page</a></span> </div> </div> <span class="link-centered"><a href="#methodology">Download any of the OCI data by visiting the Methodology page</a></span> </div> </section>';return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/compareoils.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="compare-oils-view" class="view"> <section class="intro intro-supply"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">Profiling Emissions in the Supply Chain</h1> <p class="copy-feature">Each oil has a different emissions footprint. Use the sorting tools to compare the GHG emissions that come from specific parts of the oil supply chain. Edit certain model parameters to estimate how upstream, midstream, and downstream decisions change GHG emissions.</p> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <section class="panel has-aside section-content" id="co-chart-cont"> <div class="row"> <div class="panel-body"> <div class="chart-legend"> <dl class="key"> <dt class="key-title">Key</dt> <dd class="key-item upstream">Upstream</dd> <dd class="key-item midstream">Midstream</dd> <dd class="key-item downstream">Downstream</dd> </dl> </div> <div id="compare-oils" class="data-charts"> <div id="no-results-message"> <p>There are currently no oils that match your filter requirements.</p> </div> </div> </div> <div class="panel-aside"> <div> <div id="model-parameters" class="control-section"></div> <form> <div class="control-section carbon-tax-field-section"> <fieldset id="carbon-tax-field"> <legend class="control-title">Carbon Tax <span class="units-description">(per metric ton CO&#x2082)</span></legend> <label class="switch" for="toggle-carbon"> <input id="toggle-carbon" name="toggle-carbon" type="checkbox"> <span class="switch-text">Toggle Carbon</span> <span class="switch-ui"></span> </label> <div class="input-group disabled"> <input class="form-control carbon-tax-input" type="text" name="carbon-tax" id="carbon-tax" value="'+(null==(__t=Oci.carbonTax)?"":__t)+' "> </div> </fieldset> </div> <div class="control-section"> <fieldset id="ratio-select"> <legend class="control-title">Sort by Emissions Units</legend> <div class="radio"> <label><input type="radio" name="ratio-select" value="perBarrel" checked="checked"> GHGs/Barrel</label> </div> <div class="radio"> <label><input type="radio" name="ratio-select" value="perMJ"> GHGs/Megajoule Product</label> </div> <div class="radio has-button"> <label><input type="radio" name="ratio-select" value="perDollar"> GHGs/$ Product</label> <a href="#" id="price-button" title="Adjust values" class="link-edit link">Edit Values</a> </div> </fieldset> </div> <div class="control-section"> <fieldset id="step-select"> <legend class="control-title">Sort by Emissions Components</legend> <div class="radio"> <label><input type="radio" name="step-select" value="ghgTotal" checked="checked"> Total GHGs</label> </div> <div class="radio"> <label><input type="radio" name="step-select" value="upstream"> Upstream</label> </div> <div class="radio"> <label><input type="radio" name="step-select" value="midstream"> Midstream</label> </div> <div class="radio"> <label><input type="radio" name="step-select" value="downstream"> Downstream</label> </div> <div class="radio"> <label><input type="radio" name="step-select" value="indirect"> Upstream + Midstream (Indirect)</label> </div> <div class="radio"> <label><input type="radio" name="step-select" value="type"> Oil Type</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="sort-select"> <legend class="control-title">Sort by Emissions Order</legend> <div class="radio"> <label><input type="radio" name="sort-select" value="true" checked="checked"> High-to-Low</label> </div> <div class="radio"> <label><input type="radio" name="sort-select" value="false"> Low-to-High</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="region-select"> <legend class="control-title">Filter by Region</legend> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Asia-Pacific"> Asia-Pacific</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Europe"> Europe</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Russia & Eurasia"> Russia & Eurasia</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Middle East & N. Africa"> Middle East & North Africa</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="North America"> North America</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="S. America & Carribean"> South America & Carribean</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Sub-Saharan Africa"> Sub-Saharan Africa</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Time Series"> Time Series</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="oiltype-select"> <legend class="control-title">Filter by Oil Type</legend> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Extra-Heavy"><span class="extraheavy-color block-color"></span> Extra-Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Heavy"><span class="heavy-color block-color"></span> Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Medium"><span class="medium-color block-color"></span> Medium</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Light"><span class="light-color block-color"></span> Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Light"><span class="ultra-light-color block-color"></span> Ultra-Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Condensate"><span class="condensate-color block-color"></span> Condensate</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Deep"><span class="ultra-deep-color block-color"></span> Ultra-Deep</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="High Gas"><span class="high-gas-color block-color"></span> High Gas</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Depleted"><span class="depleted-color block-color"></span> Depleted</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="opec-select"> <legend class="control-title">Filter by OPEC Membership</legend> <div class="checkbox"> <label><input type="checkbox" name="opec-select" value="Yes"> Member</label> </div> <div class="checkbox"> <label><input type="checkbox" name="opec-select" value="No"> Non-member</label> </div> </fieldset> </div> </form> </div> </div> </div> </section> '+(null==(__t=blueBar)?"":__t)+" </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/compareview.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="compare-view" class="view"> <div class="intro intro-secondary"> <section id="map-locations-cont" class="panel-m"> <div class="panel-body"> <div id="map"></div> </div> </section> <div class="prose-location"> <div class="row"> <p class="prose-meta">Compare Oils</p> <h1 class="prose-title--details" id="oil-names"><a href="#oil/'+(null==(__t=utils.makeId(oil.name))?"":__t)+'">'+(null==(__t=oil.name)?"":__t)+"</a> v. ",__p+=comparisonOil?' <a href="#oil/'+(null==(__t=utils.makeId(comparisonOilName))?"":__t)+'">'+(null==(__t=comparisonOilName)?"":__t)+"</a> ":" <span>"+(null==(__t=comparisonOilName)?"":__t)+"</span> ",__p+=' </h1> <div class="container-compare"> <a class="button button-small compare compare-edit" href="#">Edit</a> <div class="dropdown-compare container-triangle"> <form autocomplete="off" onsubmit="return false"> <input type="search" placeholder="Enter oil name or type of oil" name=""> <div class="search-results"></div> </form> <div class="suggestions-dropdown-compare"> <h5 class="header-condensed">Suggestions</h5> <ul> ',suggestedOils.forEach(function(e){__p+=' <li class="list-element-small"><a href="#compare/'+(null==(__t=utils.makeId(oil.name))?"":__t)+"/"+(null==(__t=utils.makeId(e))?"":__t)+'">'+(null==(__t=e)?"":__t)+"</a></li> "}),__p+=" </ul> </div> </div> </div> </div> </div> </div> ",oil&&comparisonOil&&(__p+=' <section class="oils-details"> <div class="row"> <div class="oil-details-meta"> ',oil.keyStats.length&&(__p+=' <div id="key-stats-cont" class="panel-m clearfix"> <div class="container-oil-details container-oil-details-compare"> <div class="header-compare-container"> <h6 class="header-condensed-capped header-light header-compare">'+(null==(__t=oil.name)?"":__t)+'</h6> <h6 class="header-condensed-capped header-light header-compare">'+(null==(__t=comparisonOil.name)?"":__t)+'</h6> </div> <dl class="stats-list"> ',_.each(oil.keyStats,function(e,t,a){__p+=' <dt class="oil-details_compare_title">'+(null==(__t=e.key)?"":__t)+'</dt> <dd class="oil-details_compare_description"> <span class="stat-title" data-toggle="tooltip" title="'+(null==(__t=e.title)?"":__t)+'">'+(null==(__t=e.value)?"":__t)+"</span> ",e["data-title"]&&(__p+=' <span data-title-after="'+(null==(__t=e["data-title"])?"":__t)+'" class="icon-information">?</span> '),__p+=" </dd> ";var i=comparisonOil.keyStats[t];__p+=' <dd class="oil-details_compare_description"> <span class="stat-title" data-toggle="tooltip" title="'+(null==(__t=i.title)?"":__t)+'">'+(null==(__t=i.value)?"":__t)+"</span> ",i["data-title"]&&(__p+=' <span data-title-after="'+(null==(__t=i["data-title"])?"":__t)+'" class="icon-information">?</span> '),__p+=" </dd> "}),__p+=" </dl> </div> "),__p+=' <div class="glossary-link"> <p>* For more information on terminology, check out the <a href="#glossary">glossary</a>.</p> </div> </div> </div> </div></section> '),__p+=' <section class="panel has-aside section-content-sm" id="od-chart-cont"> <div class="row"> <h2>Emissions</h2> <div class="container-charts"> <div class="data-charts"> <div class="chart-item"> <h4 class="header__with-description">Total Greenhouse Gas Emissions Per Barrel</h4> <p class="units description-header">'+(null==(__t=totalUnits)?"":__t)+'</p> <ul class="value"> <li> <span id="model-total" class="stats-large"></span> <sub class="raw" id="diff"></sub> <span class="units">'+(null==(__t=oil.name)?"":__t)+'</span> </li> <li> <span id="comparison-model-total" class="compare stats-large"></span> <span class="units">'+(null==(__t=comparisonOilName)?"":__t)+'</span> </li> </ul> </div> <div class="chart-item"> <h4>Upstream Emissions</h4> <div class="bar" id="upstream-bar"></div> </div> <div class="chart-item"> <h4>Midstream Emissions</h4> <div class="bar" id="midstream-bar"></div> </div> <div class="chart-item"> <h4>Downstream Emissions</h4> <div class="bar" id="downstream-bar"></div> </div> </div> </div> <div class="panel-aside"> <div class="data-controls"> <div id="model-parameters" class="static"></div> </div> </div> </div> </section> <section class="section-callout section-content related-oils"> <div class="row"> <h3 class="section-callout__header">Related Oils</h3> <span class="carosel-arrow backward offset-0"></span> <span class="carosel-arrow forward offset-0"></span> <div class="carosel offset-0"> <div class="inner-carosel"> ',
relatedOils.forEach(function(e){__p+=" "+(null==(__t=e)?"":__t)+" "}),__p+=" </div> </div> </div> </section> </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/demovideos.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article id="about-view" class="view view-demovideos"> <div class="row"> <div class="prose prose-content"> <div class="intro-sm"> <h1>Using the OCI</h1> <p>New to the OCI? Watch these demonstration videos to see how the OCI can be used to answer important questions about the oil supply chain.</p> </div> <h2>There\'s No Standard Barrel of Oil</h2> <p>How does the OCI estimate GHG emissions through the oil supply chain?</p> <div class="video-wrapper"><iframe width="560" height="315" src="https://www.youtube.com/embed/HPlq-RJInZ4" frameborder="0" allowfullscreen></iframe></div> <h2>Conducting GHG Checks and Balances</h2> <p>How accurate is emission reporting in the oil sector?</p> <div class="video-wrapper"><iframe width="560" height="315" src="https://www.youtube.com/embed/h-5xJLkarFs" frameborder="0" allowfullscreen></iframe></div> <h2>Advancing Low Carbon Energy</h2> <p>How can the oil industry innovate to reduce GHG emissions?</p> <div class="video-wrapper"><iframe width="560" height="315" src="https://www.youtube.com/embed/o7gqgD9P_5A" frameborder="0" allowfullscreen></iframe></div> <h2>Revisiting the Keystone Pipeline</h2> <p>Who bears climate responsibility for the heaviest oils?</p> <div class="video-wrapper"><iframe width="560" height="315" src="https://www.youtube.com/embed/e3Vx3Sc3SQE" frameborder="0" allowfullscreen></iframe></div> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/emissionsdrivers.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="emissions-drivers-view" class="view"> <section class="intro intro-drivers"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">Analyzing Oil Data</h1> <p class="copy-feature">Oil characteristics have different effects on GHG emissions. Select an oil from the drop-down menu to plot relationships between GHG emissions and oil characteristics such as API gravity, sulfur content, and the monetary value of an oil’s petroleum products. Then edit the model parameters to see how emissions change.</p> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <section class="panel has-aside section-content" id="ed-chart-cont"> <div class="row"> <header class="panel-header"> <div class="panel-headline"> <h1 class="panel-title">Chart</h1> </div> </header> <div class="panel-body"> <div id="emissions-drivers" class="data-charts"></div> </div> <div class="panel-aside"> <div> <div id="model-parameters" class="control-section"></div> <form> <div class="control-section"> <fieldset id="ratio-select"> <legend class="control-title">Sort by Emissions Units</legend> <div class="radio"> <label><input type="radio" name="ratio-select" value="perBarrel" checked="checked"> GHGs/Barrel</label> </div> <div class="radio"> <label><input type="radio" name="ratio-select" value="perMJ"> GHGs/Megajoule Product</label> </div> <div class="radio"> <label><input type="radio" name="ratio-select" value="perCurrent"> GHGs/$ Crude, Current Value</label> </div> <div class="radio"> <label><input type="radio" name="ratio-select" value="perHistoric"> GHGs/$ Crude, Historic Value</label> </div> <div class="radio has-button"> <label><input type="radio" name="ratio-select" value="perDollar"> GHGs/$ Product</label> <a href="#" id="price-button" title="Adjust values" class="link-edit link">Edit Values</a> </div> </fieldset> </div> <div class="control-section"> <legend class="control-title">Select Oil Characteristic (X axis)</legend> <select class="config-dropdown form-control" name="x-select" id="x-select"> <option value="ghgTotal"> Total Emissions</option> <option value="upstream"> Upstream Emissions</option> <option value="midstream"> Midstream Emissions</option> <option value="downstream"> Downstream Emissions</option> <option value="apiGravity" selected="selected"> API Gravity</option> <option value="sulfurContent"> Sulfur Content</option> <option value="waterToOilRatio"> Water-to-Oil Ratio</option> <option value="gasToOilRatio"> Gas-to-Oil Ratio</option> <option value="steamToOilRatio"> Steam-to-Oil Ratio</option> <option value="flaringToOilRatio"> Flaring-to-Oil Ratio</option> <option value="prodGasoline"> Gasoline</option> <option value="prodDiesel"> Diesel</option> <option value="prodResidual"> Residual Fuels</option> <option value="prodJet"> Jet Fuel</option> <option value="prodPetcoke"> Petcoke</option> <option value="prodLPG"> Liquified Petroluem Gas (LPG)</option> <option value="yearsProduction"> Years in Production</option> <option value="currentMarketValue"> Current Market Value Products (2016)</option> <option value="historicMarketValue"> Historic Market Value Products (2015)</option> </select> </div> <div class="control-section"> <legend class="control-title">Select Emissions Component (Y axis)</legend> <select class="config-dropdown form-control" name="y-select" id="y-select"> <option value="ghgTotal" selected="selected"> Total</option> <option value="upstream"> Upstream</option> <option value="midstream"> Midstream</option> <option value="downstream"> Downstream</option> </select> </div> <div class="control-section"> <fieldset id="oiltype-select"> <legend class="control-title">Filter by Oil Type</legend> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Extra-Heavy"><span class="extraheavy-color block-color"></span> Extra-Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Heavy"><span class="heavy-color block-color"></span> Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Medium"><span class="medium-color block-color"></span> Medium</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Light"><span class="light-color block-color"></span> Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Light"><span class="ultra-light-color block-color"></span> Ultra-Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Condensate"><span class="condensate-color block-color"></span> Condensate</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Deep"><span class="ultra-deep-color block-color"></span> Ultra-Deep</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="High Gas"><span class="high-gas-color block-color"></span> High Gas</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Depleted"><span class="depleted-color block-color"></span> Depleted</label> </div> </fieldset> </div> </form> </div> </div> </div> </section> '+(null==(__t=blueBar)?"":__t)+" </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/glossary.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<section class="intro intro-glossary"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">Glossary</h1> <p class="copy-feature">To learn more about the terms used throughout the site, refer to the <a href="http://www.eia.gov/tools/glossary/index.cfm?id=A" target="_new">U.S. Energy Information Administration Glossary</a>. This glossary draws on oil terms and details found there.</p> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <article id="glossary-view"> <div class="row"> <div class="prose prose-content"> <div class="glossary-def"> <h2 class="glossary-term" id="annulus-return">Annulus Return</h2> <p>The space between inlet and outlet piping in an oil well that allows for fluid and other drilling substances to exit.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="api-gravity">API Gravity</h2> <p>A measure of the relative density (weight per volume) of a petroleum liquid compared to the density of water. Oils are categorized by their API gravity as follows: extra-heavy (&lt;15 API), heavy (15–22 API), medium (22–32 API), light (32–42 API), ultra-light (42–52 API), and condensate (&gt;52 API). </p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="asphalt">Asphalt</h2> <p>A petroleum product output in PRELIM that is a cement-like material obtained by petroleum processing and contains bituminous material as the predominant component. It is used primarily for road construction.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="associated-gas">Associated Gas</h2> <p>Methane or other gaseous hydrocarbons that occur in crude oil reservoirs either as free gas (associated) or as gas in solution with crude oil (dissolved gas). “Natural gas” can refer either to the methane alone or to the mixture of methane and other hydrocarbons.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="bitumen">Bitumen</h2> <p>A naturally occurring viscous (thickened) mixture, classified as extra-heavy oil and includes oils sands and tar sands, that is comprised mainly of hydrocarbons heavier than pentane. It may contain sulfur compounds. In its natural viscous state, bitumen is not recoverable at a commercial rate through a conventional well.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="bunker-fuel-production">Bunker Fuel Production</h2> <p>Fuel supplied to ships and aircraft, both domestic and foreign, consisting primarily of residual and distillate fuel oil for ships and kerosene-based jet fuel for aircraft.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="classification-bounds">Classification Bounds</h2> <p>The collection of characteristics used for sorting oils, including API gravity, sulfur content, production volume, depth, flaring-to-oil ratio, water-to-oil ratio, and gas-to-oil ratio. The quantification of these limits is specified on the OCI Methodology page.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="combustion">Combustion</h2> <p>Part of the downstream portion of the oil supply chain that entails burning petroleum products (through chemical oxidation) to generate light, power, or heat.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="condensates">Condensates</h2> <p>A light liquid hydrocarbon comprised of mostly pentanes and heavier hydrocarbons that occurs when associated gas is present in an oil field.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="deep-conversion-refinery">Deep Conversion Refinery</h2> <p>Part of the midstream portion of the oil supply chain, this is a complex refining configuration used to turn the heaviest oils into petroleum products. Techniques can involve using high temperatures and catalysts to separate (or crack) hydrocarbons and then reject the excess carbon (a process called coking) and/or add hydrogen (hydrotreating) in order to increase production of the highest-value petroleum products.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="diesel-production">Diesel Production</h2> <p>A petroleum product output in PRELIM that is composed of distillates obtained in petroleum refining operation or blends of such distillates with residual oil used in motor vehicles. The boiling point and specific gravity are higher for diesel fuels than for gasoline.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="dilbit">Dilbit</h2> <p>Bitumen diluted with one or more lighter petroleum products, typically natural-gas condensates such as naphtha, to make it easier to transport, for example, in a pipeline.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="downstream">Downstream</h2> <p>The end of the oil supply chain that involves transporting petroleum products to markets and their end use, including, but not limited to, combustion.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="emissions-drivers">Emissions Drivers</h2> <p>The particular oil characteristics that are most likely responsible for increasing an oil’s GHG emissions compared to other less important factors. Emissions drivers are determined by identifying whether an oil’s emissions in a particular category are in the top quartile of the OCI Phase 2 sample. These categories are flaring, land use, steam, venting and fugitive emissions, pumping, upgrading, petcoke combustion, refinery heat, and refinery hydrogen.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="end-use">End Use</h2> <p>A general term for the part of the downstream portion of the oil supply chain that involves the consumption of all petroleum products that are made from a barrel of oil, whether they are combusted, used as feedstock for consumer products, or otherwise marketed.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="enhanced-oil-recovery">Enhanced Oil Recovery (EOR)</h2> <p>A general term for practices and techniques required to extract oil from fields as they deplete, using pressure, injection, heat, and steam.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="extraction">Extraction</h2> <p>Part of the upstream portion of the oil supply chain that entails drilling, fracturing, mining, or otherwise accessing oil resources.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="flaring">Flaring</h2> <p>The process of combusting and disposing of associated gas that is produced with oil, which occurs for different reasons, including emergency relief, because equipment does not exist to gather and sell the gas on the market, or the associated gas is uneconomical for sale. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="flaring-intensity">Flaring Intensity</h2> <p>The magnitude of flaring relative to the actual conditions modeled by OPGEE.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="flare-rate">Flare Rate</h2> <p>The amount of gas flared, measured in standard cubic feet of gas per day.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="flaring-to-oil-ratio">Flaring-to-Oil Ratio</h2> <p>An upstream operating decision regarding the amount of gas flared for every barrel of oil produced, measured in standard cubic feet of gas per barrel.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="fuel-oil">Fuel Oil</h2> <p>One of the petroleum product outputs in PRELIM that is less refined than gasoline so it can be burned in a furnace or boiler. Fuel oil includes distillate fuels (Nos. 1, 2, and 4) and residual fuels (Nos. 5 and 6).</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="fugitive-emissions">Fugitive Emissions</h2> <p>Unintended leaks of a gas (including the potent greenhouse gas methane) into the atmosphere from processing, transmission, and/or transportation of oil and other fossil fuels. Along with venting, this is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="gas-to-oil-ratio">Gas-to-Oil Ratio</h2> <p>The estimated total amount of gas production associated with the production of one barrel of oil, measured in standard cubic feet of gas per barrel.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="gasoline-production">Gasoline Production</h2> <p>A petroleum product output in PRELIM that is a complex mixture of relatively volatile hydrocarbons used primarily in motor vehicles with spark-ignition engines that is produced in different amounts depending on an oil’s characteristics, the refinery configuration, and global demand.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="global-warming-potential">Global Warming Potential (GWP)</h2> <p>An index used to compare the relative radiative forcing of different gases without directly calculating the changes in atmospheric concentrations. GWPs are calculated as the ratio of the radiative forcing that would result from the emission of one kilogram of a greenhouse gas to that which would result from the emission of one kilogram of carbon dioxide over a fixed period of time, such as one hundred years.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="greenhouse-gases">Greenhouse Gases (GHGS)</h2> <p>Those gases, such as carbon dioxide (CO2), methane (CH4), and nitrous oxide (N2O), that are transparent to solar (short-wave) radiation but opaque to infrared (long-wave) radiation, thus preventing long-wave radiant energy from leaving Earth’s atmosphere. The net effect is a trapping of absorbed radiation and a tendency to warm the planet’s surface.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="greenhouse-gas-emissions">Greenhouse Gas Emissions (GHG Emissions)</h2> <p>Emissions of long-lived climate-impacting gases, measured in CO2 equivalent (eq.) units using the global warming potential of each gas.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="hydroskimming-refinery">Hydroskimming Refinery</h2> <p>Part of the midstream portion of the oil supply chain, this is one of the simplest refinery configurations that separates lighter oils into its hydrocarbon components using heat (distillation) and employs other basic treating processes to remove hydrogen gas in order to make high-octane gasoline.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="jet-fuel">Jet Fuel</h2> <p>One of the petroleum product outputs in PRELIM that is used in jet aircraft engines. It includes kerosene-type jet fuel and naphtha-type jet fuel.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="land-use">Land Use</h2> <p>A variable that represents the impacts generated upstream when oil production releases carbon stored in the soil and requires the removal of biomass, the latter of which engenders both foregone carbon sequestration and emissions from the decomposition of the biomass. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="liquefied-petroleum-gas">Liquefied Petroleum Gas</h2> <p>A petroleum product output in PRELIM that is also referred to as LPG or liquid petroleum gas and made up of a group of lighter hydrocarbon gases, primarily propane and butanes. These gases may be marketed individually or mixed. LPG excludes ethane.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="medium-conversion-refinery">Medium Conversion Refinery</h2> <p>Part of the midstream portion of the oil supply chain, this is an extension of a hydroskimming refinery that separates medium-gravity oils into their hydrocarbon components using heat and pressure (vacuum distillation) as well as a process (catalytic cracking) that breaks heavier hydrocarbons into gasoline, diesel, and other distillate feedstock.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="megajoule">Megajoule</h2> <p>A measure of energy that is equal to 1 million joules.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="midstream">Midstream</h2> <p>The middle portion of the oil supply chain that entails refining crude oil or otherwise transforming hydrocarbons into petroleum products.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="off-site-emissions">Off-Site Emissions</h2> <p>Activities that generate GHG emissions that cross an upstream (or midstream) boundary. In terms of emissions accounting, emission-related activities that enter the site count as additional emissions (for example, natural gas purchases) and those that are sent off-site are credited and count as negative emissions (for example, natural gas sales).</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="oil-assay">Oil Assay</h2> <p>A chemical analysis of a crude oil that provides data for refiners to process a crude oil. The OCI requires that assays are reported in a consistent, standardized format so that they can be input into the OCI midstream model (PRELIM).</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="oil-type">Oil Type</h2> <p>An OCI classification scheme, previously called “Oil-Climate Category” in Phase 1, that conveys the general characteristics of crude oils: extra-heavy, heavy, medium, light, ultra-light, condensate, ultra-deep, high gas, and depleted.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="oil-depth">Oil Depth</h2> <p>The depth of an oil field, measured in feet to the well bore. For vertical wells, this is equal to the depth below the surface. Offshore oils are measured from the ocean floor. For inclined or horizontal wells, this depth can exceed the vertical depth below the surface.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="petrochemical-feedstock">Petrochemical Feedstock</h2> <p>One of the petroleum product outputs in PRELIM that is principally used in the manufacturing of chemicals, rubber, and plastics.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="petroleum-coke">Petroleum Coke</h2> <p>One of the petroleum product outputs in OPGEE and PRELIM that is a residue high in carbon content and low in hydrogen that is the final product of thermal decomposition in the condensation process in cracking. Also termed “petcoke.”</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="petcoke-combustion">Petcoke Combustion</h2> <p>Petcoke is produced in larger amounts both upstream, when extra-heavy oils are upgraded, and downstream, when heavy and extra-heavy oils are refined. It is produced in smaller amounts when any oil is processed in a deep conversion coking refinery. Burning petcoke for heat or power generation results in higher GHG emissions than other petroleum products. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="pumping">Pumping</h2> <p>A variable comprising emissions from the pressure-forcing operation of various secondary-recovery techniques. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="refinery-configuration">Refinery Configuration</h2> <p>A midstream decision regarding the types of processing units assembled to transform oils into petroleum products, including hydroskimming used exclusively for light, sweet oils; medium conversion configurations for medium, sweet and sour oils; and deep conversion configurations for heavy, sweet and sour oils.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="refinery-heat">Refinery Heat</h2> <p>Heat generated for use in refining using either refinery fuel gas or natural gas. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="refinery-hydrogen">Refinery Hydrogen</h2> <p>Hydrogen produced for use in refining, generally for adding to low-API-gravity, carbon-heavy oils. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="refining">Refining</h2> <p>Part of the midstream portion of the oil supply chain that entails processing a crude oil to manufacture finished petroleum products, unfinished oils, natural gas liquids, other hydrocarbons, and oxygenates.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="residual-fuels">Residual Fuels</h2> <p>One of the petroleum product outputs in PRELIM that is a general classification for heavier bottom-of-the barrel oil residues, known as No. 5 and No. 6 fuel oils, that remain after the distillate fuel oils and lighter hydrocarbons are distilled away in refinery operations. No. 6 fuel oil includes bunker C fuel oil. Residual fuels are used for the production of electric power, space heating, vessel bunkering, and various industrial processes.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="sour-sweet-oil">Sour/Sweet Oil</h2> <p>See “sulfur content.”</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="steam">Steam</h2> <p>An input needed for thermal recovery (an enhanced oil recovery technique), steam can be generated and used to heat depleted or extra-heavy resources that do not easily flow. Fossil fuels are often used to power steam generation, though solar and other renewable energy sources can be used to lower the emissions impact of steam generation. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="steam-to-oil-ratio">Steam-to-Oil Ratio (SOR)</h2> <p>An upstream operating decision affecting the amount of steam input for thermal-oil-recovery projects. This ratio measures the rate of steam injection per barrel of oil produced in barrels of water equivalent per barrel of oil.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="sulfur-content">Sulfur Content</h2> <p>Oils in PRELIM are categorized according to the amount of sulfur they contain as follows: sweet (&lt;0.5 percent sulfur) and sour (>0.5 percent sulfur). In the case of synthetic crude oils derived from oil sands, the sulfur content is reported after the bitumen is upgraded into synthetic crude oil.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="synthetic-crude-oil">Synthetic Crude Oil (SCO)</h2> <p>An extra-heavy oil, bitumen, or oil sand that, prior to midstream refining, has undergone extensive upstream processing and upgrading to remove a portion of its carbon (in the form of petcoke) and convert it into a synthetic hydrocarbon that simulates conventional oil.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="temperature-cut">Temperature Cut</h2> <p>The range of temperatures that corresponds to the separation of various hydrocarbons in crude oil based on their boiling points.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="transportation">Transportation</h2> <p>The movement of oil between points in the supply chain, including after extraction, when crude oil is moved to a refinery, and after refining, when petroleum products are sold. Transportation GHG emissions vary with the distance traveled, modes of transport, and transport fuels used.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="upgrading">Upgrading</h2> <p>An upstream process in OPGEE that converts extra-heavy oil, bitumen, and oil sands into synthetic crude oils of varying qualities by primarily removing excess carbon and converting it into petcoke. This is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="upstream">Upstream</h2> <p>The beginning of the oil supply chain that includes resource extraction, production, surface processing and upgrading, waste disposal, and other miscellaneous operations, as well as transporting oil to the refinery.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="venting">Venting</h2> <p>The intentional release of natural gas into the atmosphere. Venting of natural gas is particularly climate damaging because the methane (CH4) in natural gas is a more potent, though shorter-lived, greenhouse gas than carbon dioxide (CO2). Along with fugitive emissions, this is one of nine emissions drivers identified in OCI Phase 2.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="water-injection-ratio">Water Injection Ratio</h2> <p>The amount of water injected into a well to stimulate oil production, measured in barrels of water injected per barrel of crude oil produced.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="water-to-oil-ratio">Water-to-Oil Ratio</h2> <p>The total amount of water generated when producing oil, measured in barrels of water produced per barrel of crude oil produced.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="water-intensity">Water Intensity</h2> <p>An upstream operating decision regarding the amount of liquid water throughput required to produce a barrel of oil, including both water injected and wastewater generated.</p> </div> <div class="glossary-def"> <h2 class="glossary-term" id="years-in-production">Years In Production</h2> <p>The time that an oil play has been in active service. Over long periods, this can impact GHG emissions as an oil field depletes, changing its characteristics and the techniques required both upstream and midstream.</p> </div> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/homepage.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="homepage" class="view"> <section class="intro intro-home"> <div class="overlay-dark"> <div class="row"> <div class="prose prose-home"> <h1 class="prose-prime-title">Disclaimer</h1> <p class="copy-feature">This is a sandbox version of the Oil-Climate Index. The data shown here may not be accurate. Any reference of the outputs or data reported in the sandbox version of the Oil-Climate Index constitutes a violation of the terms of use. For the working version of Phase 2.0 of the Oil-Climate Index please visit <a href="oci.carnegieendowment.org"></a></p> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </div> </section> <section class="section-callout section-content"> <div class="row"> <div class="prose prose-callout prose-callout-secondary"> <p>Oils have varying impacts on the climate. Differentiating between these effects involves estimating total greenhouse gas (GHG) emissions for each oil throughout the oil supply chain—from upstream extraction to midstream refining to downstream end use. Track these factors across our tool to see how each oil weighs in.</p> </div> </div> </section> <section class="section-content-fullwidth"> <a href="#map"> <div class="subsection-half" id="map-preview"></div> </a> <div class="subsection-half subsection-half-right fullheight-section-content"> <div class="subsection-inner"> <h2>Map</h2> <p>The global distribution of greenhouse gas emissions from the 75 oils in Phase 2 of the OCI.</p> <a class="button button-secondary" href="#map">View Map</a> </div> </div> </section> <section class="section-content section-content-secondary"> <div class="row"> <div class="subsection-half subsection-half-right"> <a href="#total-emissions"> <div id="production-graph-preview"></div> <span class="labels-homepage">Current Estimated Oil Production</span> </a> </div> <div class="subsection-half subsection-half-left"> <div class="subsection-inner"> <h2>Total Emissions</h2> <p>The total estimated emissions for 25 percent of global oil production.</p> <a class="button button-secondary" href="#total-emissions">View Total Emissions Graph</a> </div> </div> </div> </section> <section class="section-content"> <div class="row"> <a href="#supply-chain"> <div class="subsection-half" id="supply-chain-preview"></div> </a> <div class="subsection-half subsection-half-right"> <div class="subsection-inner"> <h2>Supply Chain</h2> <p>The GHG emissions that come from production, refining, and end-use processes. </p> <a class="button button-secondary" href="#supply-chain">View Supply Chain Graph</a> </div> </div> </div> </section> <section class="section-content section-content-secondary"> <div class="row"> <div class="subsection-half subsection-half-right"> <a href="#analysis"> <div id="oil-attributes-preview"></div> <span class="labels-homepage"></span> </a> </div> <div class="subsection-half subsection-half-left"> <div class="subsection-inner"> <h2>Analysis</h2> <p>The relationships between key oil characteristics and GHG emissions.</p> <a class="button button-secondary" href="#analysis">View Analysis</a> </div> </div> </div> </section> <section class="section-content-fullwidth"> <a class="subsection-image" href="#oil/nigeria-escravos-beach"> <img src="assets/images/layout/homepage-oil-details.jpg" alt="Oil Details Page" width="520px" height="387px" id="oil-details"> </a> <div class="subsection-half subsection-half-right fullheight-section-content"> <div class="subsection-inner"> <h2>View Details or Compare Oils</h2> <p>The oil’s profile, including its characteristics, emission drivers, and comparisons between related oils.</p> </div> </div> </section> '+(null==(__t=blueBar)?"":__t)+" </div>";
return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/mapview.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="location" class="view"> <section class="intro"> <div class="prose prose-centered"> <h1>Mapping Oils’ Emissions</h1> <p>Total GHG emissions differ by oil. The size of each bubble represents the magnitude of the emissions intensity of the oil to which it corresponds. Use this map to view the origin of each barrel of oil and its associated GHG emissions, examine satellite-detected flaring of an oil’s associated gas, explore oil field boundaries, and learn about the quality of OCI input data for each production pathway.</p> </div> </section> <section class="map-overlay map-flaring"> <div id="map" class="main-map"></div> <div class="world-zoom leaflet-bar"></div> <div id="bubble-legend"> </div> <div class="map-filter filter-map"> <div class="control-section"> <form> <fieldset id="year-select"> <legend class="control-title">Select Year for Flaring Data</legend> <div class="radio"> <label><input type="radio" name="year-select" value="2012">2012</label> </div> <div class="radio"> <label><input type="radio" name="year-select" value="2013">2013</label> </div> <div class="radio"> <label><input type="radio" name="year-select" value="2014" checked="checked">2014</label> </div> <div class="radio"> <label><input type="radio" name="year-select" value="off">Off</label> </div> </fieldset> </form> </div> </div> <div class="map-filter map-instructions"> <div class="map-filter-container"> <span>?</span> <div class="map-tooltip"> <p>To navigate the map more quickly, use your keyboard\'s arrow keys or hold shift and create a square on the map to zoom into that specific area.</p> </div> </div> </div> </section> '+(null==(__t=blueBar)?"":__t)+" </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/methodology.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<section class="intro intro-methodology"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">Oil-Climate Index Methodology</h1> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <article id="methodology-view" class="view"> <div class="row"> <ul class="doc-nav"> <li>Jump to</li> <li><a href="#methodology/list-of-acronyms" class="same-page-nav">List of Acronyms</a></li> <li><a href="#methodology/oci-input-data" class="same-page-nav">OCI Input Data</a></li> <li><a href="#methodology/detailed-data-requirements" class="same-page-nav">Detailed Data Requirements</a></li> <li><a href="#methodology/oci-modeling-methods" class="same-page-nav">OCI Modeling Methods</a></li> <li><a href="#methodology/oci-web-tool-functionality" class="same-page-nav">OCI Web Tool Functionality</a></li> <li><a href="#methodology/special-cases" class="same-page-nav">Special Cases</a></li> <li><a href="#methodology/change-log" class="same-page-nav">Change Log</a></li> <li><a href="#methodology/oci-phase-3-in-planning" class="same-page-nav">OCI Phase 3—In Planning</a></li> </ul> <div class="prose prose-content container-content"> <h2 id="list-of-acronyms">List of Acronyms</h2> <dl class="acronyms-list"> <dt>$</dt><dd>U.S. dollars</dd> <dt>AGO</dt><dd>Atmospheric gas oil</dd> <dt>API</dt><dd>American Petroleum Institute</dd> <dt>AR</dt><dd>Atmospheric residue</dd> <dt>AR5</dt><dd>Fifth assessment report of the Intergovernmental Panel on Climate Change</dd> <dt>bbl</dt><dd>Barrel</dd> <dt>CCR</dt><dd>Conradson carbon residue</dd> <dt>CH4</dt><dd>Methane</dd> <dt>CO2</dt><dd>Carbon dioxide</dd> <dt>CSS</dt><dd>Cyclic steam stimulation</dd> <dt>cST</dt><dd>Centistokes</dd> <dt>DC</dt><dd>Delayed coking unit</dd> <dt>EPA</dt><dd>U.S. Environmental Protection Agency</dd> <dt>FCC</dt><dd>Fluid catalytic cracking unit</dd> <dt>ft</dt><dd>Feet</dd> <dt>GHG</dt><dd>Greenhouse gas</dd> <dt>GIS</dt><dd>Geographic information system</dd> <dt>GWP</dt><dd>Global warming potential</dd> <dt>HC</dt><dd>Hydrocracking</dd> <dt>HVGO</dt><dd>Heavy vacuum gas oil</dd> <dt>IPCC</dt><dd>Intergovernmental Panel on Climate Change</dd> <dt>LPG</dt><dd>Liquefied petroleum gas</dd> <dt>LVGO</dt><dd>Light vacuum gas oil</dd> <dt>MCR</dt><dd>Micro-carbon residue</dd> <dt>MJ</dt><dd>Megajoule</dd> <dt>N2O</dt><dd>Nitrous oxide</dd> <dt>NOAA</dt><dd>National Oceanic and Atmospheric Administration</dd> <dt>NASA</dt><dd>National Aeronautics and Space Administration</dd> <dt>oC</dt><dd>Degrees Celsius</dd> <dt>OCI</dt><dd>Oil-Climate Index</dd> <dt>OPEM</dt><dd>Oil Products Emissions Module</dd> <dt>OPGEE</dt><dd>Oil Production Greenhouse Gas Emissions Estimator</dd> <dt>PRELIM</dt><dd>Petroleum Refinery Life-Cycle Inventory Model</dd> <dt>SAGD</dt><dd>Steam-assisted gravity drainage</dd> <dt>SCF</dt><dd>Standard cubic feet</dd> <dt>SCO</dt><dd>Synthetic crude oil</dd> <dt>VIIRS</dt><dd>Visible Infrared Imaging Radiometer Suite</dd> <dt>VR</dt><dd>Vacuum residue</dd> <dt>w%</dt><dd>Weight percent </dd></dl> <h2 id="oci-input-data">OCI Input Data</h2> <p>The models that underpin the Oil-Climate Index (OCI) require consistent, comparable, and verifiable open-source data on crude oils. This includes oil assays (analyses of predetermined data measuring a crude oil\'s chemical and physical characteristics) that are reported out in a specified format, upstream field-level operating specifications, midstream refining process input requirements, and downstream transport and end-use data.</p> <p>In creating the Oil-Climate Index, we went through an intensive process to obtain data on the 75 Phase 2 sample oils. We used hundreds of academic sources, technical documents, and reports from industry news to identify data. Oils were selected based on their geographic, geologic, chemical, and physical diversity. But the final arbiter of the 75 global oils selected was data availability. There were oils that we would have selected for Phase 2 but for the lack of transparent data.</p> <p><strong>OPGEE</strong> (the Oil Production Greenhouse Gas Emissions Estimator) technically requires up to 50 data inputs, but the use of smart defaults allows the model to assign reasonable estimates based on just a few key characteristics. For upstream data inputs for the OCI\'s 75 sample oils, including references and sources, see the <a href="/assets/resources/opgee-oci-website-75-fields-v20.xlsx" target="_blank">OPGEE operating data</a> workbook.</p> <p><strong>PRELIM</strong> (the Petroleum Refinery Life-Cycle Inventory Model) requires crude oil assays that use a specified number of temperature cuts. Assays provided in a different format (for example, too few temperature cuts or different temperature bands) must be adjusted—a process that can introduce errors into PRELIM. In the web tool, the assay sources for the 75 sample oils are specified in the "oil details" fields. The assay data used in OCI calculations are available in the PRELIM model workbook on the <a href="http://www.ucalgary.ca/lcaost/prelim" target="_blank">"Assay Inventory" worksheet</a>.</p> <p><strong>OPEM</strong> (the Oil Products Emissions Module) data inputs require a detailed product slate (in barrels or kilograms of product per barrel of oil, which are reported by PRELIM) to calculate both the greenhouse gas (GHG) emissions associated with transporting petroleum products from the refinery outlet to the end-use destination and the GHG emissions associated with petroleum product combustion. Additional data needed for the module include the distances petroleum products travel to market, the mode of transport and transport fuel used, and the vehicle and fuel emissions factors from the Argonne National Laboratory\'s GREET (Greenhouse Gases, Regulated Emissions, and Energy Use in Transportation) Model. End-use emissions from the combustion of petroleum products are calculated using U.S. Environmental Protection Agency (EPA) emissions factors. Current petroleum product prices are also required.</p> <ol> <li><em>Distance:</em> Given current limitations posed by the reporting of global petroleum product transport data, in Phase 2, the OCI still assumes that all petroleum products were transported via pipeline from Houston to New York (2,414 kilometers, or 1,500 miles) and then by heavy-duty tanker truck to either the Washington, DC, or Boston metropolitan areas (380 kilometers, about 236 miles). The plan is to allow user inputs to test default distances, modes, and other variables in Phase 3.</li> <li><em>Price:</em> Routinely updated spot prices for gasoline, diesel, liquefied petroleum gas products (LPG, propane and other lighter hydrocarbon co-products), and jet fuel are obtained from the U.S. Energy Information Administration. Prices used are net of taxes. Spot price data, however, are not consistently available in an open-source format for many of the other refined petroleum products, including residual fuels, fuel oil, petrochemical feedstock, asphalt, and petroleum coke (petcoke). Assumptions and sources for these product prices used in OCI Phase 2 are cited in the authors\' calculations spreadsheet.</li> </ol> <p>Download OCI base run data sets: <a href="/assets/resources/base-run-v2_oci-v5535.csv" target="_blank">OCI v2</a> (csv) | <a href="/assets/resources/base-run-v1_052715.csv" target="_blank">OCI v1</a> (csv)</p> <h2 id="detailed-data-requirements">Detailed Data Requirements</h2> <h3>OPGEE: Upstream Production Data</h3> <ul> <li>Extraction method specifications (primary, secondary, enhanced oil recovery, or other)</li> <li>Level of activity per unit of production</li> <ul> <li>Water-to-oil ratio (for primary and secondary production)</li> <li>Steam-to-oil ratio (for tertiary production)</li> <li>Flaring rate</li> <li>Venting rate (level of fugitive emissions)</li> </ul> <li>Location (onshore or offshore, with GIS coordinates)</li> </ul> <h3>PRELIM: Midstream Refining Data</h3> <ul> <li>Reporting on updated refinery process energy requirement data</li> <li>Refinery changes that affect petroleum product specifications and quality (especially for bottom- and top-of-the-barrel products that are not regulated for use in vehicle engines)</li> <li>Oil assay parameters reported consistently for each global oil</li> </ul> <p>Each parameter (except micro-carbon residue/Conradson carbon residue) must be specified at each temperature cut, and temperature cut ranges must be standardized as specified below or in another consistent format.</p><p> </p><p>Assays currently report temperature cuts in a variety of inconsistent formats:</p> <ul> <li>API gravity</li> <li>Density</li> <li>Sulfur content (percent by weight)</li> <li>Nitrogen content (mass ppm)</li> <li>Hydrogen content</li> <li>Volume/mass flow (% recovery)</li> <li>Micro-carbon residue (MCR) or Conradson carbon residue (CCR)</li> <li>Viscosity (cST at 100 °C) for vacuum residuum</li> </ul> <p>The temperature cuts and products currently used in the PRELIM refining model are:</p> <table id="temperature-cuts" class="data-table full-width"> <thead> <tr> <td>TEMP</td> <td>PRODUCT CUT NAME</td> </tr> </thead> <tbody> <tr> <td>80 °C</td> <td>Light straight run</td> </tr> <tr> <td>180 °C</td> <td>Naphtha</td> </tr> <tr> <td>290 °C</td> <td>Kerosene</td> </tr> <tr> <td>343 °C</td> <td>Diesel</td> </tr> <tr> <td>399 °C</td> <td>Atmospheric gas oil (AGO)</td> </tr> <tr> <td>454 °C</td> <td>Light vacuum gas oil (LVGO)</td> </tr> <tr> <td>525 °C</td> <td>Heavy vacuum gas oil (HVGO)</td> </tr> <tr> <td>525+ °C</td> <td>Vacuum residue (VR)</td> </tr> <tr> <td>399+ °C</td> <td>Atmospheric residue (AR)</td> </tr> </tbody> </table> <h3>OPEM: Downstream Transport and Combustion Data</h3> <ul> <li>Origin and destination data of crude oil and individual petroleum products, including international and domestic trade statistics (routinely updated by crude and product volumes; transport modes and fuels; and routing and distances from field locations and storage facilities to refinery gate and refinery outlet to shipping hub to end-use markets)</li> <li>Market prices for all oil products and co-products (including petrochemical feedstocks, petcoke, residual fuels, fuel oil #4, and asphalt)</li> </ul> <h3>Global Warming Potentials</h3> <p>Download the United Nations Intergovernmental Panel on Climate Change (IPCC) 2013 global warming potentials <a href="https://www.ipcc.ch/pdf/assessment-report/ar5/wg1/WG1AR5_Chapter08_FINAL.pdf" target="_blank">here</a> (page 714, Table 8.7).</p> <p>OCI GHG emissions estimates are based on equivalent GHG emissions for carbon dioxide, methane, and nitrous oxide, combining these into one result using different global warming potentials (GWPs) that compare the other GHGs to carbon dioxide. For Phase 2, we used data reported by the IPCC. The IPCC\'s 2013 assessment report (AR5) states that the one-hundred-year GWP including climate feedback loops for carbon dioxide (CO2) is referenced at 1. The GWP for methane (CH4) is 34 times greater than CO2, and for nitrous oxide (N2O), it is 298 times greater than CO2. To ensure that OPGEE and PRELIM are using these GWPs, check table 2.1 on the "Input Data" sheet and the table headed 2013 IPCC AR5 on the "Emission Factors," respectively.</p> <h3>Data Quality and Transparency</h3> <p>The degree of uncertainty in the GHG emissions estimates modeled through the OCI depends on the quality of the data. We considered data quality within two kinds of parameters: crude assay and field-characterization methods on the one hand, and characterization of real-world operations on the other. Natural and technical variability, especially as these relate to changing operations over time, affect the quality of these OCI input data. In order to characterize the quality of data along these parameters, we gave each oil a data score depending on certain criteria for each stage of production, as described in <a href="/assets/resources/draft-oci-data-quality-assessment-v9.xlsx" target="_blank">this Excel workbook</a>. Within three data quality elements—reliability and reproducibility, consistency and completeness, accuracy—inputs for each model were scored using the criteria summarized below. We anticipate expanding and updating the analysis of data quality in OCI Phase 3.</p> <p>OPGEE:</p> <ul> <li>Reliability and reproducibility</li> <ul> <li>Representativeness: From how many samples are field data selected?</li> <li>Vintage: How recent are field data?</li> <li>Transparency: From what sources do field data come?</li> </ul> <li>Consistency and completeness</li> <ul> <li>OPGEE primary parameters (steam-to-oil ratio, API gravity, water-to-oil ratio): How many primary parameters are included in inputs?</li> <li>OPGEE secondary parameters (field depth, productivity index, number of wells, production rate): How many secondary parameters are included in inputs?</li> <li>Availability of flaring data: Are data available from satellite imagery and reporting?</li> </ul> <p>PRELIM:</p> <ul> <li>Reliability and reproducibility</li> <ul> <li>Representativeness: From how many samples is the assay selected?</li> <li>Vintage: How recent is the assay?</li> <li>Transparency: From what sources does the assay come?</li> </ul> <li>Consistency and completeness</li> <ul> <li>PRELIM alignment: How do crude properties align with OPGEE inputs?</li> <li>PRELIM minimum assay data transformations: How complete are the assay data as required by PRELIM?</li> </ul> <li>Accuracy</li> <ul> <li>Certainty in applicable refinery configuration: How accurately can PRELIM model the default refinery configuration?</li> <li>PRELIM hydrogen modeling approach impact: How does the way in which PRELIM models hydrogen production affect GHG emissions estimates?</li> </ul> </ul> <p>OPEM:</p> <ul> <li>Reliability and reproducibility</li> <ul> <li>Representativeness: Are emissions factors for each product representative of the range of real-world product emissions factors?</li> <li>Transparency: Are oil and product volumes, modes of transport, fuels utilized in transport, commodity routing, and market prices available from reliable sources?</li> </ul> <li>Consistency and completeness</li> <ul> <li>Alignment with PRELIM and OPGEE: Are products and emissions factors consistent with the outputs of PRELIM and the crudes described in OPGEE?</li> </ul> <li>Accuracy</li> <ul> <li>Product transport modeling approach: How accurately does OPEM model transport of products?</li> </ul> </ul> <p>We established three data quality levels to assess the variability in information used in OCI Phase 2:</p> <ul> <li>Below minimum quality: Data provide enough information to use standardized methods of analysis to make a basic representation of a crude\'s performance. Because not all data requirements are met, the impact of the data on results for crude differentiation is low.</li> <li>Meets minimum requirements: Data are relevant for the purposes of the analysis and comply with most modeling needs. Some standardized methods are applied. The data can be considered to have a medium impact on crude differentiation.</li> <li>Exceeds minimum requirements: Data provide additional information for modeling that improve reliability and/or allow for further evaluation of a crude. The data can provide enough information to have a high impact on crude differentiation.</li> </ul> <h2 id="oci-modeling-methods">OCI Modeling Methods</h2> <p>OPGEE and PRELIM are distinct models that are run separately. The outputs from PRELIM are inputs into OPEM. The outputs of the three models are then summed to calculate total GHG emissions. All outputs are converted into the same functional units before they are summed, and the default is GHG emissions per barrel of input crude. End product and co-product combustion is generally reported out in OPEM, regardless of where in the oil supply chain it is generated (for example, net upstream petcoke from upgrading and midstream petcoke from deep conversion refining). However, if data exist, use of co-products in upstream processes is also taken into account; this is evident in the use of upstream petcoke in extra-heavy oil upgrading.</p> <p>Discrepancies and inconsistencies in OCI model inputs can occur because of different public data sources and lack of coordinated data collection. For example, there are discrepancies in API gravity inputs into OPGEE and PRELIM. However, a sensitivity analysis in this particular case dealing with API gravity data differences results in GHG emissions outputs that are within the OCI\'s margin of error of 5 kilograms CO2 equivalent per barrel. The API gravity presented in the web tool is derived from the oil assays used in PRELIM, because this model\'s emissions estimates are more sensitive to API gravity than OPGEE\'s.</p> <p>When there is no directly corresponding assay for an OPGEE oil field, a proxy assay is selected that closely fits the sample oil\'s characteristics. As actual assays are collected, proxy assays will be replaced.</p> <p>Data discrepancies may also arise when one set of model inputs does not accurately represent the practices in place at large oil fields with varying conditions at different wells. See the "Special Cases" section for more information.</p> <h3>OPGEE Version 1.1 Draft E</h3> <p>Link to the model workbook hosted by Stanford University: <a href="http://pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator" target="_blank">pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator</a>.</p> <p>The oil field and oil data specified are used to generate OPGEE\'s bulk assessment tool for each oil. The bulk assessment tool is then used to calculate base-run GHG emissions outputs for each oil.</p> <p>OPGEE also considers the transport of oil to the refinery inlet. In Phase 2, the OCI continues to assume that all oil is transported from its country of origin to Houston via the mode that is nearest to the oil field.</p> <p>In the case of petcoke produced upstream during oil-sand and extra-heavy-oil upgrading, an offline calculation estimates the net petcoke produced. This considers the OPGEE-derived portion of petcoke used as an upstream energy source and subtracts that from the total petcoke production reported by the <a href="https://www.aer.ca/documents/sts/ST39.pdf" target="_blank">Alberta Energy Regulator</a>. Lacking detailed reporting in Venezuela, OPGEE uses the average relative amounts of petcoke production reported for Canadian oil sands for Venezuelan extra-heavy-oil upgrading.</p> <p>The OCI web tool has several upstream oil field operating parameters that users can modify. These adjustments change OPGEE inputs on a percentage basis, where 100 percent is the default. Reductions and increases are calculated off this base for the flaring-to-oil ratio, water-to-oil and water-injection ratios, and the emissions intensity of steam (simulating solar-powered steam generation). Users can adjust these operating assumptions on the Supply Chain and Analysis web tool pages.</p> <p>Under California regulations, OPGEE reports GHG-emissions outputs in units of kilogram CO2 equivalent per megajoule of petroleum products generated. These outputs are converted into emissions per barrel by multiplying them by the lower heating value of each oil (in megajoule per barrel).</p> <h4>OPGEE Flaring Emissions Estimation and Mapping Boundaries in the OCI Web Tool</h4> <p>Flaring emissions were estimated by aligning satellite measurements of flares with outlines of the oil fields. The flares and volumes were identified with data from the Visible Infrared Imaging Radiometer Suite (VIIRS) sensor, which, when combined with the Nightfire Algorithm, can detect and provide estimates to quantify flare location and volume. The Nightfire Algorithm, developed by the National Oceanic and Atmospheric Administration (NOAA), develops annual estimates for flaring volumes and aggregates the data into a spatial database that designates the type of flare as production, refining, or processing. The flaring rates are computed as the average of 2010–2014 flaring volumes located in the fields within this analysis. A rare exception is made when government-reported flaring data or gas-to-oil ratios are lower than VIIRS-assessed flaring data; in this case, OCI Phase 2 uses the lower government data rather than VIIRS. (Nigeria Escravos Beach is the only case for which we have substituted government-reported data.)</p> <p>In order to determine which flares should be included, the geographic extent of each field was determined. The location and areal extent for each field was collected from publicly available data where available. Location data were also aggregated from the Petroleum Economist\'s World Energy Atlas. The atlas provides maps of oil fields across the world, as well as a number of oil-associated infrastructure projects (for example, pipelines and loading terminals). Each available image (regardless of source) was overlaid with satellite imagery from Google Earth before oil field boundaries were generated. These boundaries were drawn liberally to ensure that all visible surface infrastructure is included within the flaring estimation boundary. In many cases, the final boundary including surface infrastructure is larger than the field boundaries reported in public maps or the World Energy Atlas. For offshore fields, boundaries are placed to focus on production and processing platforms, where visible from Google Earth imagery.</p> <p>Within each field boundary, yearly average flared volumes for each flare are summed to determine total flaring emissions from the field. When the flaring estimate from satellite data does not align with gas volumes reported by government agencies, satellite estimates were replaced with government-reported figures. Because the satellite estimates may not identify all instances of flaring, a lower bound of 10 standard cubic feet per barrel (scf/bbl) for oils\' flare rates was instituted, based on the flare rates of the best-managed upstream operations. (Fields whose flare rates were increased to the lower bound: Australia Cossack, Canada Hibernia, Azerbaijan Azeri Light, Brazil Frade, Colombia Cusiana, Mexico Chuc, Nigeria Bonga, Russia Romashkinskoye, Saudi Arabia Safaniya, U.S. Bakken No Flare, U.S. East Texas, U.S. Louisiana Lake Washington, U.S. Gulf Mars, U.S. California Midway Sunset, U.S. Wyoming Salt Creek, U.S. Wyoming WC, U.S. California South Belridge, U.S. Texas Yates, U.S. California Wilmington, Venezuela Hamaca SCO, Venezuela Merey Blend, Venezuela Tia Juana.)</p> <h3>PRELIM Version 1.1</h3> <p>Link to the model workbook hosted by the University of Calgary: <a href="http://www.ucalgary.ca/lcaost/PRELIM" target="_blank">ucalgary.ca/lcaost/PRELIM</a>.</p> <p>PRELIM version 1.1 contains 103 oil assays in its inventory. These assays are run through the "Results All Assays" macro three times (see the workbook for this macro). Each PRELIM run corresponds to a different refinery configuration—hydroskimming, medium conversion, and deep conversion (the last two with fluid catalytic cracking and gas-oil hydrocracking units).</p> <p>The default refinery is chosen by PRELIM using an API gravity and sulfur-content categorization scheme, as summarized below. Users can run oils through different refinery configurations in the OCI web tool to estimate how GHG emissions change.</p> <ul> <li>Deep conversion refinery—heavy crude (15 to 22 API) with any sulfur level</li> <li>Medium conversion refinery—medium sweet crude (22 to 32 API, with less than 0.5 percent sulfur content by weight); medium sour crude (22 to 32 API, with more than 0.5 percent sulfur content by weight); and light sour crude (over 32 API, with more than 0.5 percent sulfur content by weight)</li> <li>Hydroskimming refinery—light sweet crude (over 32 API, with less than 0.5 percent sulfur content by weight)</li> </ul> <p><em>The exceptions among our sample oils are discussed in the "Special Cases" section below.</em></p> <p>PRELIM version 1.1 by default uses a float case, allowing product volumes to be determined by the optimal use of refinery process units for processing individual, unblended oils. This version of PRELIM also allows users to specify output ratios for products like gas, diesel, and jet fuel, among others, in the "Expert Input" sheet. In order to use this tool, the following add-ins must be selected for use: Analysis ToolPak, Analysis ToolPak - VBA, and Solver Add-In.</p> <p>Co-products, including petrochemical feedstock, asphalt, and petcoke, can be turned on and off by users. A crude blending tool was added in PRELIM version 1.1 and may be expanded in Phase 3. Additionally, a hydrogen surplus that results from lighter oils is noted but not credited for these oils or debited to heavier oils in PRELIM version 1.1; this will be considered in OCI Phase 3 as it is of consequence for GHG emissions from the lightest condensates to the heaviest oil sands.</p> <p>Other model assumptions are provided in the <a href="http://ucalgary.ca/lcaost/files/lcaost/prelim-v1-0-documentation.pdf" target="_blank">PRELIM User Guide and Technical Documentation</a> (PDF).</p> <h3>OPEM Version 1.1</h3> <p>Link to the OPEM model workbook: <a href="/assets/resources/opem1.1.xlsx" target="_blank">oci.carnegieendowment.org/assets/OPEM1.0.xlsx</a>.</p> <p>An overriding goal of OPEM is to include in the default GHG emissions calculation—and thereby avoid carbon leakage from—all petroleum products and co-products. Historically, petroleum end use has centered on transport fuels, including gasoline and diesel, and has ignored or incompletely and inconsistently reported GHG emissions from petroleum co-products like petcoke, fuel oil, residual fuels, asphalt, and petrochemical feedstocks. OPEM version 1.1 includes these co-products; those that are not yet displayed in the OCI Phase 2 web tool will be added to a revised OPEM version 2.0 in Phase 3.</p> <p>The default product slate output from PRELIM can be found in the worksheet "PRELIM Product Slates" in the OPEM workbook. Alternative product slates can be generated by running the model.</p> <p>Petcoke production (both upstream in OPGEE and midstream in PRELIM) defaults to 100 percent combustion and can be adjusted down to 50 percent and zero in the OCI web tool. Asphalt and petrochemical feedstock defaults to "off" and can be turned "on" in the OCI web tool.</p> <p>OPEM uses emissions factors reported by the U.S. Environmental Protection Agency for GHG inventories, updated in November 2015. These emissions factors are documented <a href="https://www.epa.gov/sites/production/files/2015-12/documents/emission-factors_nov_2015.pdf" target="_blank">here</a>. Note that the EPA assumes near-complete fuel combustion in the calculation of published emissions factors. Depending on the quality of the engine in which a fuel is burned, EPA emissions factors may result in a best-case (lowest emissions) estimate. This will be investigated in Phase 3.</p> <h3>OCI Input Data Workbook</h3> <p>Link to the OCI web tool workbook for Phase 2 base data: <a href="/assets/resources/oci-webtool-base-run.xlsx" target="_blank">oci.carnegieendowment.org/data/oci-webtool-base-run.xlsx</a>. The data to create sliders for users to adjust emissions variables are discussed below and are not included in the web tool workbook. This is because many of these calculations are included in macros that are coded into the OCI web tool itself.</p> <h2 id="oci-web-tool-functionality">OCI Web Tool Functionality</h2> <h3>Converting Emissions Outputs to Other Metrics</h3> <p>The default functional unit or metric in the OCI web tool is GHG emissions per barrel of oil input. The OCI web tool also converts emissions to other metrics, including emissions per megajoule of petroleum products and emissions per U.S. dollar of petroleum products or barrel of crude oil (where available for priced and tracked global oils). These conversions are calculated by multiplying default results by reported lower heating values (in megajoule per barrel) and product or oil prices (in dollars per barrel, excluding all taxes), respectively.</p> <p>Prices default to April 2016 data, and historic February 2015 prices are also presented for comparisons. The OCI web tool permits users to adjust petroleum product prices for both updating and forecasting purposes. These results will be displayed when the user selects GHG emissions results in units of emissions per dollar of petroleum products or barrel of crude oil.</p> <h3>Sorting Oils</h3> <p>The classification bounds used to sort oils in OCI Phase 2 are detailed in the table below. Crude oil types and identified GHG emissions drivers incorporated into the web tool are as follows:</p> <table id="types-drivers" class="data-table full-width"> <thead> <tr> <td>Crude oil types</td> <td>Emissions drivers</td> </tr> </thead> <tbody> <tr> <td>Condensate, Ultra-light, Light, Medium, Heavy, Extra-heavy, Ultra-deep, Depleted, High gas</td> <td>Petcoke combustion, Flaring, Land use, Steam, Venting &amp; fugitive emissions, Pumping, Refinery hydrogen, Refinery heat, Upgrading</td> </tr> </tbody> </table> <p><strong>Classification Bounds:</strong></p> <table id="classifications-bounds" class="data-table full-width"> <thead> <tr> <td>Lower Bound</td> <td>Classification</td> </tr> </thead> <tbody> <tr> <td colspan="2">API Crude Category (API)</td> </tr> <tr> <td>0</td> <td>Extra-Heavy</td> </tr> <tr> <td>14.99</td> <td>Heavy</td> </tr> <tr> <td>21.99</td> <td>Medium</td> </tr> <tr> <td>31.99</td> <td>Light</td> </tr> <tr> <td>41.99</td> <td>Ultra-Light</td> </tr> <tr> <td>50.99</td> <td>Condensate</td> </tr> <tr> <td colspan="2">Sulfur (S w%)</td> </tr> <tr> <td>-100.00</td> <td>Sweet</td> </tr> <tr> <td>0.50</td> <td>Sour</td> </tr> <tr> <td colspan="2">Production Volume</td> </tr> <tr> <td>0</td> <td>Very Low</td> </tr> <tr> <td>2,500</td> <td>Low</td> </tr> <tr> <td>25,000</td> <td>Medium</td> </tr> <tr> <td>250,000</td> <td>High</td> </tr> <tr> <td>2,500,000</td> <td>Very High</td> </tr> <tr> <td colspan="2">Depth (ft.)</td> </tr> <tr> <td>0</td> <td>Shallow</td> </tr> <tr> <td>7,000</td> <td>Deep</td> </tr> <tr> <td>11,000</td> <td>Ultra-Deep</td> </tr> <tr> <td colspan="2">Flaring-to-Oil Ratio (scf/bbl oil)</td> </tr> <tr> <td>0</td> <td>Minimal Flare</td> </tr> <tr> <td>50</td> <td>Low Flare</td> </tr> <tr> <td>500</td> <td>High Flare</td> </tr> <tr> <td>1,000</td> <td>Ultra-High Flare</td> </tr> <tr> <td colspan="2">Watery Oil: Water-to-Oil Ratio (bbl water/bbl oil)</td> </tr> <tr> <td>0</td> <td>Low Water</td> </tr> <tr> <td>4</td> <td>Watery Oil</td> </tr> <tr> <td colspan="2">Gassy Oil : Gas-to-Oil Ratio (scf/bbl oil)</td> </tr> <tr> <td>0</td> <td>Very Low Gas</td> </tr> <tr> <td>100</td> <td>Low Gas</td> </tr> <tr> <td>1,000</td> <td>Medium Gas</td> </tr> <tr> <td>10,000</td> <td>High Gas</td> </tr> </tbody> </table> <h3>User-Defined Sliders</h3> <p>Emissions drivers are derived from operating decisions that can affect an oil\'s GHG emissions. The web tool allows users to alter model parameters for steam production, water intensity, flaring intensity, and refinery configurations using sliders on the Supply Chain, Analysis, View Details, and Compare Oils pages. Steam, water, and flaring sliders alter relevant OPGEE inputs, while refinery configurations and the LPG slider alter PRELIM inputs. Petcoke and LPG sliders also alter OPEM outputs.</p> <h3>Analysis Regression Lines</h3> <p>Regression lines presented on the Analysis page are calculated using the simple ordinary least squares (OLS) regression method.</p> <h2 id="special-cases">Special Cases</h2> <h3>OPGEE Special Cases</h3> <p><storng>Mexico Cantarell is extracted using gas injection of air-separated nitrogen (N2). This option had to be modified in the back end of the OPGEE model. Download the Cantarell-specific OPGEE model workbook <a href="/assets/resources/opgee-v1.1-draft-e-cantarell-mexico-special-case.xlsm" target="_blank">here</a>.</storng></p> <p>The default <strong>Russia Chayvo</strong> OPGEE model tends to overestimate emissions because highly deviated (diagonal) wells are needed to access oil in this extremely ultra-deep field. Drilling energy increases with well depth for three reasons: to overcome the increased friction when confronted by mud and cuttings in a longer drill stem and annulus return; to circulate more mud and remove more cuttings due to the increased friction; and to lift rock chips to the surface in the opposite direction of high, in situ well pressure. Each of these factors scales differently with true vertical depth and the driller\'s total distance. The high-end assumption (the OPGEE default) indicates that a deviated well (36,000 feet long, 10,000 feet deep) requires the same energy as a well that is vertical but 36,000 feet deep. The low-end assumption is that a deviated well requires as much energy per unit length as a well that is 10,000 feet deep. Given that a deviated well is in fact a mix of these two cases, in reality the energy involved to lift Chayvo oil is somewhere in between. We have used the low-end conservative estimate. Download the Chayvo-specific OPGEE model workbook <a href="/assets/resources/opgee-v1.1-draft-e-chayvo-russia-special-case.xlsm" target="_blank">here</a>.</p> <p>A weighted average of OPGEE outputs is used to determine OPGEE emissions for <strong>UK Forties Blend</strong>. Because upstream extraction techniques used for UK Forties Blend vary (gas lifting and utilizing a downhole pump), there is not a dominant extraction technique. These two techniques cannot be run simultaneously in OPGEE, so their results have to be manually combined as 60 percent downhole pumping to 40 percent gas lifting. For more details, <a href="/assets/resources/opgee-v1.1-draft-e-forties-uk-average-special-case.xlsm" target="_blank">download the Forties-specific OPGEE model workbook here</a>.</p> <p><strong>U.S. Texas Eagle Ford</strong> is modeled as several different fields in OPGEE to account for the fact that Eagle Ford\'s different production zones require different production practices to extract different oil types (black, volatile, and condensate). These processes impact upstream emissions differently. The locations of each zone affect the calculation of flaring associated with each, since flaring values are calculated spatially in conjunction with NASA\'s VIIRS satellite instrument whose data is then analyzed by NOAA.</p> <p><strong>U.S. Bakken</strong> is a very large oil field in the Williston basin, spanning the U.S. states of Montana, North Dakota, and South Dakota and into Saskatchewan, Canada. Bakken is modeled as if it was two distinct oil fields: flared and non-flared, which in OPGEE results in two different GHG-emissions estimates. While close to 40 percent of Bakken\'s sites flare minimally, the majority of current Bakken production sites require flaring the associated gas. Accordingly, the decision to model Bakken using two different production pathways indicates what is currently occurring in this single oil field.</p> <p><strong>Denmark Dansk Blend</strong> was modeled by averaging OPGEE results for three separate Danish OPGEE fields: Denmark Dan, Denmark Gorm, and Denmark Tyra. For more details, download the <a href="/assets/resources/opgee-v1.1-draft-e-dansk-blend-denmark-special-case.xlsm" target="_blank">Dansk Blend&ndash;specific OPGEE model workbook</a>, which details inputs and results for the three fields, as well as the resulting averages.</p> <p><strong>Nigeria Escravos Beach</strong> has a data discrepancy: government-reported data on the field\'s gas-to-oil ratio did not align with flaring data from the VIIRS satellite. OCI Phase 2 uses VIIRS data unless a government-reported flaring number is lower. This is the only oil in Phase 2 where this exception applies.</p> <h3>Canada and Venezuela—Oil Sands and Extra-Heavy Oil Special Cases</h3> <p><strong>Canada Cold Lake CSS Dilbit</strong>, <strong>Canada Cold Lake SAGD Dilbit</strong>, <strong>Canada Athabasca DC SCO</strong>, and <strong>Canada Athabasca FC-HC SCO</strong> are unconventional oil sands resources whose extraction processes differ from those used for conventional oils. Moreover, these oil sands\' extraction pathways also differ from one another and therefore have different GHG emissions impacts. Cold Lake resources are too deep to mine and are extracted using in situ, steam-based techniques that heat and drain oil sands (respectively, cyclic steam stimulation, or CSS, and steam-assisted gravity drainage, or SAGD). The bitumen upgraded to synthetic crude oil is removed using mining techniques that involve digging oil sands out of open pits. A different portion of the OPGEE model is used to quantify upstream emissions for extra-heavy oils like these because they are not extracted in the same way as a conventional liquid crude that requires drilling and pumping; for more information, see the FBitumen Extraction and Upgrading" worksheet in the OPGEE workbook. (An infographic describing these techniques can be found <a href="http://www.npr.org/2012/08/16/158907708/infographic-how-tar-sands-oil-is-produced" target="_blank">here</a>. Refer to pages 88–92 of the <a href="https://pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator" target="_blank">OPGEE User Guide and Technical Documentation</a> for an explanation of how these are modeled in OPGEE.)</p> <h4>Upgraded Synthetic Crude Oils</h4> <p><strong>Venezuela Hamaca SCO</strong>, <strong>Canada Athabasca DC SCO</strong>, and <strong>Canada Athabasca FC-HC SCO</strong> are all upgraded into synthetic crude oil (SCO) before being sent to a refinery. As such, petcoke is produced upstream and added to the total estimated combustion emissions in the OCI, in addition to any petcoke from the refining of the synthetic crude oil.</p> <p><strong>Canada Athabasca DC SCO</strong>\'s and <strong>Canada Athabasca FC-HC SCO</strong>\'s upstream petcoke production is estimated using the annual average of tons of petcoke produced per barrel of SCO as reported by the Alberta Energy Regulator in <a href="https://www.aer.ca/documents/sts/ST39-2014.xls" target="_blank">statistical report 39 (from December 2014)</a>. Athabasca DC SCO\'s averages derive from the figures reported by operator Suncor Energy (ABOS0077189); Athabasca FC-HC SCO\'s averages derive from the figures reported by operator Syncrude Canada (ABOS0077533).</p> <p><strong>Venezuela Hamaca SCO</strong>\'s upstream petcoke production is approximated using the petcoke production data obtained from Syncrude Canada\'s upgrading <a href="http://www.aer.ca/data-and-publications/statistical-reports/st39" target="_blank">processes provided by the Alberta Energy Regulator</a>, as both upgrading processes produce medium crudes. It is not only difficult to obtain information about the volume of petcoke produced from upgrading in Venezuela but also uncertain whether outdated and at-capacity refineries will continue to upgrade Venezuelan extra-heavy crudes. For more information on the treatment of upstream petroleum coke produced from upgrading synthetic crude oils, please see the "Petcoke Details" worksheet in the OCI workbook.</p> <h4>Diluted Bitumen</h4> <p>A barrel of oil produced from <strong>Canada Cold Lake CSS Dilbit</strong> and from <strong>Canada Cold Lake SAGD Dilbit</strong> is estimated to be 75 percent bitumen blended with 25 percent diluent, which neither separately nor when blended constitute a barrel of oil that can be directly compared to the others modeled. Therefore, OCI Phase 2 emissions for Cold Lake resources are reported per barrel of diluted bitumen, not per barrel of oil produced. The emissions associated with producing the diluent (natural gas liquids or condensates) are calculated in OPGEE.</p> <p>A weighted average of OPGEE outputs is used to determine OPGEE emissions for <strong>Venezuela Merey Blend</strong>. This dilbit contains a blend from two separate fields, the extra-heavy field of Orinoco and the light crude field of Santa Barbara. For more details, <a href="/assets/resources/opgee-v1.1-draft-e-merey-special-case.xlsm" target="_blank">download the Merey Blend–specific OPGEE model workbook</a>, which details inputs and results for both fields, as well as the resulting averages.</p> <p>When extra-heavy oils are upgraded, their synthetic crude oil API gravity is used to determine the correct refining configuration employed in PRELIM. If the bitumen was simply diluted and sent to a refinery without being upgraded, the API gravity of the oil sand is used to determine the refinery through which to run these oils.</p> <h3>PRELIM Special Cases</h3> <p><strong>Nigeria Obagi</strong> is modeled using Chevron\'s Bonny Light assay in Nigeria as a proxy. Obagi is a play within the large Bonny oil field. The crudes ultimately extracted are similar, though the two fields vary widely in their production processes.</p> <p><strong>U.S. California Midway Sunset</strong> is modeled using a different PRELIM configuration than the model\'s categorization scheme calls for. The Midway Sunset oil field contains very complex oil. The API gravity is highly variable, ranging from the teens to the low twenties. The oil assay obtained for OCI <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a> indicates a gravity of 22.6, which suggests that the oil, according to PRELIM rules, should be run through a medium conversion refinery. Because the Midway Sunset crude oil field is highly complex and known to be heavier than the 22.6 API assay obtained, this oil is instead run through a deep conversion refinery in the default run. This default operating assumption can be changed in the web tool. Note that Midway Sunset crude is priced and tracked monthly as a 13 API gravity crude.</p> <p><strong>U.S. Bakken</strong> oil assay is not publicly available. A proxy assay was generated using a composite of documentation submitted to the <a href="http://yosemite.epa.gov/oa/eab_web_docket.nsf/Filings By Appeal Number/C288B68AA94008B48525796B004CC9CC/$File/Response to Petitions for Review Exhibit 7 ...19.07.pdf" target="_blank">EPA</a>, the <a href="http://www.netl.doe.gov/File Library/Research/Oil-Gas/FE0000516_FinalReport.pdf" target="_blank">Department of Energy</a>, and other research <a href="http://www.hydrocarbonprocessing.com/Article/3250397/Processing-shale-oils-in-FCC-Challenges-and-opportunities.html" target="_blank">publications</a>.</p> <p><strong>U.S. Texas Eagle Ford</strong> oil fields are modeled separately due to the wide range of oil characteristics (for example, API gravity), as well as production and refining practices, particular to each zone of oil production in the Eagle Ford play. Further, in the absence of oil assays from certain Eagle Ford fields, the <strong>U.S. Eagle Ford Condensate</strong> PRELIM case was run using Statoil\'s <strong>Norway Snohvit Condensate</strong> assay as a proxy, and the <strong>U.S. Eagle Ford Volatile Oil</strong> PRELIM case was run using a Margham Light assay analyzed by <a href="http://www.eceric.com/crudeoil.html" target="_blank">Emir Ceri&#263; as a proxy</a>. The <strong>U.S. Eagle Ford Black Oil</strong> PRELIM case was run using Platts\'s Eagle Ford Ultralight assay.</p> <h2 id="change-log">Change Log</h2> <p>As new, open-source data is provided by others or uncovered through research, we update the OCI models and revise the estimates for life-cycle GHG emissions. This date-stamped log details changes since the OCI was released in March 2015.</p> <table id="change-log" class="data-table full-width"> <thead> <tr> <td>Date</td> <td>Change Description</td> </tr> </thead> <tbody> <tr> <td>10/31/16</td> <td> <p> Emissions drivers are temporarily in flux as we update them for Phase 2.0 of the OCI web tool. We will note in change log once this process is complete and the drivers are again fixed values. </p> <tr> <td>10/26/16</td> <td> <p> Reinserted sort by GHG/MJ Products functionality in the OCI 2.0 web tool. </p> <tr> <td>09/28/16</td> <td> <p>Temporarily removed sort by GHG/MJ Products as we update formulas in the OCI 2.0 web tool. We will note in change long when this web tool functionality is reinserted. </p><tr> <td>08/08/16</td> <td> <p>Changed web tool from OCI <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a> to OCI Phase 2. For archives of OCI Phase 1 use this link: <a href="http://oci1.carnegieendowment.org" target="_blank">oci1.carnegieendowment.org</a> </p><tr> <td>07/01/16</td> <td> <p>Summary of changes since OCI <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a> made prior to release of OCI Phase 2</p> <p>Increased from 30 test oils to 75 sample oils, representing approximately 25 percent of current global production.</p> <p>Petcoke reference update: In order to improve outputs for petcoke emissions calculations, production tables for the Alberta Energy Regulator and Syncrude Canada were updated from 2013 to 2014 values provided by the Alberta Energy Regulator. For Suncor Energy (see table 1.1) and Syncrude Canada (see table 1.2) production numbers in the "Petcoke Details" tab integrated in the OCI workbook were updated from 2013 figures provided by the Alberta Energy Regulator to 2014–2015 figures.</p> <p>All OPGEE cases were rerun during Phase 2 with the updated OPGEE model version 1.1 draft E, which can be accessed <a href="https://pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator" target="_blank">here</a>.</p> <p>Norway Ekofisk PRELIM assay was changed from a BP-provided crude assay to a Statoil-provided crude assay. This change better reflects the production by <a href="http://www.conocophillips.no/EN/our-norway-operations/greater-ekofisk-area/Pages/default.aspx" target="_blank">the current plurality producer within this field</a>.</p> <p>Canada Midale field was removed from Phase 2. This change reflects the fact that the Midale field\'s spatial boundaries, needed to calculate average flare rates, were penetrated by production associated with other oil formations.</p> <p>UK Brent field was removed from Phase 2. This change reflects the fact that the Brent field is now primarily a gas field, and its oil-production values are so low they distort OPGEE results, particularly for the flaring-to-oil ratio.</p> <p>All Phase 2 model inputs (OPGEE, PRELIM, and OPEM) were run with new global warming potentials reflecting one-hundred-year cycles that include climate-feedback loops. This data was obtained from the Intergovernmental Panel on Climate Change\'s 2013 assessment report. Figures are located in Chapter 8, table 8.7, page 417, or <a href="https://www.ipcc.ch/pdf/assessment-report/ar5/wg1/WG1AR5_Chapter08_FINAL.pdf" target="_blank">here</a>. During <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a>, OPGEE and PRELIM used the IPCC\'s 2007 assessment report. According to the 2007 report, the reference gas, carbon dioxide, is assigned a GWP of 1, methane\'s GWP is 25 times greater than carbon dioxide, and nitrous oxide is 298 times greater. The 2013 report updates methane\'s GWP to 34 times that of carbon dioxide.</p> <p>New products were added to PRELIM and OPEM: liquefied petroleum gas (LPG), asphalt, and petrochemical feedstocks. Only LPG is transported and combusted in OPEM, and like all other products, its emissions factor is taken from the <a href="https://www.epa.gov/sites/production/files/2015-12/documents/emission-factors_nov_2015.pdf" target="_blank">EPA</a>. PRELIM\'s functionality allows for a number of custom settings with respect to producing products. For example, users can specify the intensity of asphalt, gasoline, and diesel production—though the data reported in the OCI Phase 2 web tool illustrate only two cases: the default, where LPG is produced and sold by the refinery, and the secondary case, where LPG is burned as refinery fuel gas. Additionally, some products have changed names and <a href="https://www.epa.gov/sites/production/files/2015-12/documents/emission-factors_nov_2015.pdf" target="_blank">emissions factors</a>. Bunker C is now referred to as Residual Fuels in order to more accurately reflect the wide range of bottom-of-the-barrel residual co-products that are not necessarily all classified as bunker C. In Phase 2, in order to reflect product outputs as modeled in PRELIM, residual fuels\' emissions factor is an average of Residual Fuel Oils No. 5 and No. 6. "Ultra-Low Sulfur Diesel" has been renamed "Diesel."</p> <p>Changed names of oil sands:</p> <ul> <li>Canada Light Sweet SCO to Canada Athabasca DC SCO</li> <li>Canada Medium Sweet SCO to Canada Athabasca FC-HC SCO</li> <li>Canada Cold Lake Dilbit to Canada Cold Lake CSS Dilbit</li> </ul> <p>These changes reflect more accurately the pathways used to extract and upgrade dilbit and synthetic crude oil, respectively.</p> <p>Venezuelan extra-heavy oils were classified similarly to Canadian oil sands, by pathway.</p> <p>Lower heating values (LHV) for petroleum products are sourced from GREET 1 2015 rather than extrapolating from EPA-reported higher heating values (as they had been in Phase 1) in order to remain consistent with the use of LHVs throughout the OCI.</p> <p>Sulfur is reported using PRELIM data rather than OPGEE data, as sulfur has a greater impact on emissions for PRELIM than OPGEE.</p> <p>Updated the emissions conversion section "Per $ Product Value" of the calculator to denote both the "Per $ Product Value (Historic)" for February 2015 prices as well as "Per $ Product Value (Current)" for April 2016 prices for those products that are priced monthly (see "OCI Input Data" above).</p> <p>Created data-quality measures (see "Data Quality and Transparency" above).</p> <p>Created a "Per $ Crude Oil" pricing calculator for globally priced crude oils, as well as domestic U.S.-priced crude oils, as sourced from the Oil and Gas Journal, which is published monthly. In Phase 2, we additionally chose to model the CO2 emissions per U.S. dollar value of a crude oil for those crudes whose prices are routinely tracked. Eighteen Phase 2 oils are currently priced and tracked. Two of our Phase 2 oils, UK Forties Blend and Norway Ekofisk, are priced according to the globally priced UK Brent basket of crudes because this basket is a blend of oils coming mostly from the Forties and Ekofisk fields. The "Per $ Crude Oil" pricing calculator will include prices from April 2016 as well as the historic prices from OCI <a href="http://oci1.carnegieendowment.org" target="_blank">Phase 1</a>, February 2015.</p> <p>Created the new section "Carbon Tax: $ per Metric Ton CO2," which can calculate the tax per barrel of oil for each of the OCI sample fields and break down the cost of a carbon tax for each stage of an oil\'s life cycle.</p> <p>Removed sliders for production of petrochemical feedstock and asphalt that were originally intended to be included in OCI Phase 2. They were slowing the speed of the web tool. These results from PRELIM version 1.1 can be found in the model itself, and we plan to include these additional co-products in Phase 3.</p> </td> </tr> <tr> <td>05/26/15</td> <td> <p>Changed names of oil sands to represent their particular pathways rather than company operators:</p> <ul> <li>Canada Cold Lake Diluted Bitumen (Dilbit) to Canada Cold Lake CSS Dilbit</li> <li>Canada Suncor Synthetic H to Canada Heavy Sour SCO (removed from OCI Phase 2 since this blend is an unusual oil sand pathway with a very small production volume)</li> <li>Canada Suncor Synthetic A to Canada Light Sweet SCO</li> <li>Canada Syncrude Synthetic to Canada Medium Sweet SCO</li> <li>Canada Cold Lake Diluted Bitumen (Dilbit) was changed to shorten the length of the unique name in order to provide a better viewing experience for mobile devices. The other oils were changed to avoid using company names, which might imply that we are modelling their current specific pathway. While we have some company-specific data, such as assays, the pathways represented by the tool do not exactly represent company-specific operations and pathways. For example, upstream data is tied to the field (in this case, Athabasca) not the company, and transport distance is not tied to exact flows of crudes.</li> </ul> </td> </tr> <tr> <td>05/04/15</td> <td>Updated to better take into account upstream petcoke in /MJ and /$ calculations. Prior to this, we had not included the energy content/dollar value of upstream petcoke in our conversions from a per-barrel basis to a per-megajoule and per-dollar basis. This resulted in an overestimation of emissions /MJ and /$.</td> </tr> <tr> <td>03/01/15</td> <td>China Bozhong had a data inconsistency where the API gravity used in OPGEE did not match with API gravity used in PRELIM. Upstream extraction literature was checked and the API gravity corrected. New data for U.S. Alaska North Slope field properties and production practices (OPGEE Inputs) from the Alaska Oil and Gas Conservation Commission. The Know Your Oil report updated to take into account these changes.</td> </tr> <tr> <td>02/15/15</td> <td><a href="http://oci1.carnegieendowment.org" target="_blank">Web tool beta release</a>; all numbers match up with the Know Your Oil report.</td> </tr> </td></tr></td></tr></td></tr></td></tr></tbody> </table> <h2 id="oci-phase-3-in-planning">OCI Phase 3—In Planning</h2> <ul> <li>OPGEE: Reconfigure model for GHG estimates with co-generation</li> <li>OPGEE: Calculate GHG emissions impacts of CO2 injection and storage as an enhanced recovery alternative</li> <li>PRELIM: Reconfigure model to balance hydrogen running individual crudes to assign credits and debits for oils that produce and use hydrogen and, if possible, include renewable hydrogen calculations in the OCI</li> <li>PRELIM: Build model\'s float case capacity to maximize production of gasoline and diesel fuel into the OCI web tool</li> <li>PRELIM: Advance the collection of standardized, open-source assays, especially for unconventional oils, including condensates and extra-heavy oils</li> <li>PRELIM: Obtain new assays for complex and depleted fields, such as U.S. California Midway Sunset</li> <li>OPEM: Update user inputs for transportation end products</li> <li>OPEM: Revise to reflect user-based options for crude and product transport and product combustion; test scenarios to determine GHG emissions sensitivities in downstream end use</li> <li>Collect and report out GHG emissions embodied in oil reservoirs using oil reserve data, as available</li> <li>Investigate additional oil sands and extra-heavy oil pathways, including numerous novel options under consideration</li> <li>Incorporate petrochemical feedstock and asphalt production sliders (on/off) into web tool</li> <li>Increase the number of oils modeled in the OCI, including a wide range of types and geographies</li> <li>Update oil data, where new information is available</li> <li>Expand data quality and uncertainty analysis</li> <li>Add air quality modeling estimates to the OCI to evaluate oils on two dimensions—climate change and air pollution</li> <li>Consider adding further non-CO2 and short-lived climate forcers to the OCI, including VOC, CO, NOX, SOX, black carbon, and tropospheric ozone</li> <li>Consider user suggestions to improve estimates made using the OCI</li> <li>Update land-use inputs in OPGEE model to reflect up-to-date knowledge, especially for oils in climate-sensitive ecosystems such as the Arctic and forests</li> <li>Build functionality for comparisons among more than two oils</li> </ul> </ul></div> </div>  </article> '+(null==(__t=blueBar)?"":__t);
return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/modelparameters.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="#" class="toggle clearfix"> <h3 class="control-title">Model parameters</h3> <span class="link-edit link">Edit</span> <span class="link-close link">Close</span> </a> <div class="mp-summary"> <ul class="mp-list"> <li> <h6 class="key icon-solar-steam" data-title-after="Select the fraction of solar-generated steam used for enhanced oil recovery.">Solar Steam</h6> <div class="value solar-steam"><span></span></div> </li> <li> <h6 class="key icon-flare" data-title-after="Select the share of natural gas wasted through combustion upstream.">Flaring Intensity</h6> <div class="value flare"><span></span></div> </li> <li> <h6 class="key icon-water" data-title-after="Select the share of water extracted alongside oil.">Water Intensity</h6> <div class="value water"><span></span></div> </li> <li> <h6 class="key icon-year" data-title-after="Select the year in which you want to view emissions data for eligible fields.">Year of Prodction</h6> <div class="value year"><span></span></div> </li> <li> <h6 class="key icon-refinery" data-title-after="Select the refinery design, which can midstream emissions and downstream products.">Refinery Configuration</h6> <div class="value refinery"><span></span></div> </li> <li> <h6 class="key icon-petcoke" data-title-after="Select the share of petroleum coke combusted downstream.">Petcoke Combustion</h6> <div class="value petcoke"><span></span></div> </li> <li> <h6 class="key icon-lpg" data-title-after="Select whether the refinery sells LPG or burns it as refinery fuel gas.">Liquefied Petroleum Gas</h6> <div class="value lpg"><span></span></div> </li> </ul> </div> <div class="mp-edit"> <div class="param-control icon-solar-steam"> <div class="container-filter_title"> <strong class="param-title">Solar Steam</strong> <span data-title-after="Select the fraction of solar-generated steam used for enhanced oil recovery." class="icon-information">?</span> </div> <div class="slider" id="slider-solar-steam"></div> </div> <div class="param-control icon-flare"> <div class="container-filter_title"> <strong class="param-title">Flaring Intensity</strong> <span data-title-before="Select the share of natural gas wasted through combustion upstream." class="icon-information">?</span> </div> <div class="slider" id="slider-flaring"></div> </div> <div class="param-control icon-water"> <div class="container-filter_title"> <strong class="param-title">Water Intensity</strong> <span data-title-before="Select the share of water extracted alongside oil." class="icon-information">?</span> </div> <div class="slider" id="slider-water"></div> </div> <div class="param-control icon-year"> <div class="container-filter_title"> <strong class="param-title">Production Year</strong> <span data-title-before="Select the year in which you want to view emissions data for eligible fields." class="icon-information">?</span> </div> <div class="slider" id="slider-year"></div> </div> <div class="param-control icon-petcoke"> <div class="container-filter_title"> <strong class="param-title">Petroleum Coke Combustion</strong> <span data-title-before="Select the share of petroleum coke combusted downstream." class="icon-information">?</span> </div> <div class="slider" id="slider-coke"></div> </div> <div class="param-control icon-refinery"> <div class="container-filter_title"> <strong class="param-title">Refinery Configuration</strong> <span data-title-before="Select the refinery design, which can midstream emissions and downstream products." class="icon-information">?</span> </div> <select class="config-dropdown form-control" id="dropdown-refinery"> <option value="0 = Default">Default</option> <option value="1 = Hydroskimming">Hydroskimming</option> <option value="2 = Medium Conversion">Medium Conversion</option> <option value="3 = Deep Conversion (Coking)">Deep Conversion: Coking</option> <option value="4 = Deep Conversion (Hydrotreating)">Deep Conversion: Hydrocracking</option> </select> </div> <div class="param-control icon-lpg"> <div class="container-filter_title"> <strong class="param-title">Liquefied Petroleum Gas</strong> <span data-title-before="Select whether the refinery sells LPG or burns it as refinery fuel gas." class="icon-information">?</span> </div> <label class="switch lpg-override" for="toggle-lpg"> <input id="toggle-lpg" type="checkbox" checked="checked"> <span class="switch-text">Liquefied Petroleum Gas</span> <span class="switch-ui"></span> </label> </div> </div>';return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/models.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article id="about-view" class="view"> <div class="row"> <div class="prose prose-content"> <div class="intro-sm"> <h1>The OCI Models</h1> </div> <p>Three GHG-emission-estimation models are aggregated to create the Oil-Climate Index. Model outputs are standardized by converting them into the same functional units, or metrics, so emission results can be summed. Phase 2 of the index estimates GHG emissions based on these functional units: per barrel of crude produced, according to the energy content of all final petroleum products (in megajoules), and per dollar value of all petroleum products sold.</p> <h3>The Models</h3> <p><strong>OPGEE</strong> (the Oil Production Greenhouse Gas Emissions Estimator) was developed by Adam Brandt and his colleagues at Stanford University, with significant assistance provided by James Duffy at the California Air Resources Board. OPGEE estimates upstream GHG emissions from oil resource extraction to transport to the refinery inlet. OPGEE version 1.1 draft E is used in the OCI Phase 2 web tool..</p> <p>To download OPGEE and view the User Guide and Technical Documentation, visit: <a href="https://pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator" target="_blank">https://pangea.stanford.edu/researchgroups/eao/research/opgee-oil-production-greenhouse-gas-emissions-estimator</a>.</p> <a name="figure1"></a> <div id="opgee-model-schematic" class="contentImg full-width figure"></div> <p><strong>PRELIM</strong> (the Petroleum Refinery Life-Cycle Inventory Model) was developed by Joule Bergerson and her colleagues at the University of Calgary. Assistance was provided by Heather MacLean, researchers on the Life-Cycle Assessment of Oil Sands Technologies (LCAOST) project, Natural Resources Canada, Alberta Innovates, Energy and Environment Solutions, Carbon Management Canada, the National Sciences and Engineering Research Council of Canada, and the Carnegie Endowment for International Peace. PRELIM estimates midstream refining GHG emissions from the refinery inlet to the outlet, as well as refined petroleum product yields. PRELIM version 1.1 is used in the OCI Phase 2 web tool..</p> <p>To download the PRELIM model and view the User Guide and Technical Documentation, visit: <a href="http://www.ucalgary.ca/lcaost/PRELIM" target="_blank">http://www.ucalgary.ca/lcaost/PRELIM</a>. Note: The input data for PRELIM are available in the “Assay Inventory” worksheet of the Excel workbook.</p> <a name="figure2"></a> <div id="prelim-model-schematic" class="contentImg full-width figure"></div> <p><strong>OPEM</strong> (the Oil Products Emissions Module) was developed by Deborah Gordon, Eugene Tan, Jonathan Koomey, and Jeffrey Feldman. OPEM estimates downstream GHG emissions (from the refinery outlet) that result from the transport and end use of all oil products from a given crude. OPEM version 1.1 is used in the OCI Phase 2 web tool.</p> <p>Download an <a href="/assets/OPEM1.0.xlsx" target="_blank">OPEM model workbook</a> (.xlsx).</p> <a name="figure3"></a> <div id="opem-model-schematic" class="contentImg full-width figure"></div> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/oildetails.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="oil-details-view" class="view"> <div class="intro intro-secondary"> <section id="map-locations-cont" class="panel-m"> <div class="panel-body"> <div id="map"></div> </div> </section> <div class="prose-location"> <div class="row"> <p class="prose-meta">Oil details</p> <h1 class="prose-title--details">'+(null==(__t=oil.name)?"":__t)+'</h1> <div class="container-compare"> <a class="button button-small compare" href="#">Compare</a> <div class="dropdown-compare container-triangle"> <form autocomplete="off" onsubmit="return false"> <input type="search" placeholder="Enter oil name or type of oil" name=""> <div class="search-results"></div> </form> <div class="suggestions-dropdown-compare"> <h5 class="header-condensed">Suggestions</h5> <ul> ',suggestedOils.forEach(function(e){__p+=' <li class="list-element-small"><a href="#compare/'+(null==(__t=utils.makeId(oil.name))?"":__t)+"/"+(null==(__t=utils.makeId(e))?"":__t)+'">'+(null==(__t=e)?"":__t)+"</a></li> "}),__p+=' </ul> </div> </div> </div> </div> </div> </div> <section class="oils-details"> <div class="row"> ',description&&(__p+=' <div class="oil-details-description-container"> <p>'+(null==(__t=description)?"":__t)+"</p> </div> "),__p+=' <div class="oil-details-meta"> ',oil.keyStats.length&&(__p+=' <div id="key-stats-cont" class="panel panel-m clearfix container-oil-details-meta"> <header class="panel-header"> <div class="panel-headline"> <h1 class="panel-title">Key Stats</h1> </div> </header> <dl class="stats-list"> ',_.each(oil.keyStats,function(e,t,a){__p+=" ",t<a.length/2&&(__p+=" <dt>"+(null==(__t=e.key)?"":__t)+'</dt> <dd> <span class="stat-title">'+(null==(__t=e.value)?"":__t)+"</span> ",e["data-title"]&&(__p+=' <span data-title-after="'+(null==(__t=e["data-title"])?"":__t)+'" class="icon-information">?</span> '),__p+=" </dd> "),__p+=" "}),__p+=' </dl> <dl class="stats-list"> ',_.each(oil.keyStats,function(e,t,a){__p+=" ",t>a.length/2&&(__p+=" <dt>"+(null==(__t=e.key)?"":__t)+'</dt> <dd> <span class="stat-title">'+(null==(__t=e.value)?"":__t)+"</span> ",e["data-title"]&&(__p+=' <span data-title-after="'+(null==(__t=e["data-title"])?"":__t)+'" class="icon-information">?</span> '),__p+=" </dd> "),__p+=" "}),__p+=" </dl> </div> "),__p+=" ",icons&&(__p+=' <div class="card-details-drivers"> <h6>Emissions Drivers:</h6> <ul> '+(null==(__t=icons.split(",").filter(function(e){return e.trim()}).map(function(e,t,a){return"<li>"+e}).join(",</li>")+"</li>")?"":__t)+" </ul> </div> "),__p+=' <div class="glossary-link"> <p>* For more information on terminology, check out the <a href="#glossary">glossary</a>.</p> </div> </div> </div> </section> <section class="panel has-aside section-content-sm" id="od-chart-cont"> <div class="row"> <h2>Emissions</h2> <div class="container-charts"> <div class="data-charts"> <div class="chart-item"> <h4 class="header__with-description">Total Greenhouse Gas Emissions Per Barrel</h4> <p class="units description-header">'+(null==(__t=totalUnits)?"":__t)+'</p> <ul class="value"> <li> <span id="model-total" class="stats-large"></span> <sub class="raw" id="diff"></sub> <span class="units">'+(null==(__t=oil.name)?"":__t)+'</span> </li> <li> <span class="raw stats-large" id="default-total"></span> <span class="units">Default</span> </li> </ul> </div> <div class="chart-item"> <h4>Upstream Emissions</h4> <div class="bar" id="upstream-bar"></div> </div> <div class="chart-item"> <h4>Midstream Emissions</h4> <div class="bar" id="midstream-bar"></div> </div> <div class="chart-item"> <h4>Downstream Emissions</h4> <div class="bar" id="downstream-bar"></div> </div> </div> </div> <div class="panel-aside"> <div class="data-controls"> <div id="model-parameters" class="static"></div> </div> </div> </div> </section> <section class="section-callout section-content related-oils"> <div class="row"> <h3 class="section-callout__header">Related Oils</h3> <span class="carosel-arrow backward offset-0"></span> <span class="carosel-arrow forward offset-0"></span> <div class="carosel offset-0"> <div class="inner-carosel"> ',relatedOils.forEach(function(e){__p+=" "+(null==(__t=e)?"":__t)+" "}),__p+=" </div> </div> </div> </section> </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/prices.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="modal-inner"> <header class="modal-header"> <h1 class="modal-title">Adjust values</h1> <a href="#" title="Close" class="modal-close" data-modal-dismiss><span>Close</span></a> <p>Estimate the impact of market price fluctuations on an oil’s emissions per dollar of petroleum product. Enter values for petroleum product prices below and click Apply to change. Click Reset for default values.</p> </header> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label for="gasoline">Gasoline</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="gasoline" id="gasoline" placeholder="Price"> </div> </div> <div class="form-group"> <label for="diesel">Diesel</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="diesel" id="diesel" placeholder="Price"> </div> </div> <div class="form-group"> <label for="jetFuel">Jet Fuel</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="jetFuel" id="jetFuel" placeholder="Price"> </div> </div> <div class="form-group"> <label for="residualFuels">Residual Fuels</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="residualFuels" id="residualFuels" placeholder="Price"> </div> </div> <div class="form-group"> <label for="fuelOil">Fuel Oil</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="fuelOil" id="fuelOil" placeholder="Price"> </div> </div> <div class="form-group"> <label for="coke">Coke</label> <div class="input-group"> <div class="input-group-addon">$/ton</div> <input class="form-control price-input" type="text" name="coke" id="coke" placeholder="Price"> </div> </div> <div class="form-group"> <label for="lightEnds">Light Ends (RFG)</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="lightEnds" id="lightEnds" placeholder="Price"> </div> </div> <div class="form-group"> <label for="lpg">Liquified Petroluem Gas (LPG)</label> <div class="input-group"> <div class="input-group-addon">$/gallon</div> <input class="form-control price-input" type="text" name="lpg" id="lpg" placeholder="Price"> </div> </div> </form> <div class="footnote"> <p>All prices are based on 2015 values except for coke, which is based on 2014 values.</p> </div> </div> <footer class="modal-footer"> <button type="button" title="Cancel" class="bttn bttn-m bttn-base-light cancel" data-modal-dismiss>Cancel</button> <button type="button" title="Reset" class="bttn bttn-m bttn-base-light reset">Reset</button> <button type="button" title="Apply" class="bttn bttn-m bttn-base apply" id="apply-prices">Apply</button> </footer> </div>';return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/supplycurve.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="supply-curve-view" class="view"> <section class="intro intro-production"> <div class="overlay-dark"> <div class="prose prose-centered"> <h1 class="prose-prime-title">Viewing Total Emissions</h1> <p class="copy-feature">The oil industry produces nearly 100 million barrels of oil per day, and the OCI’s results currently cover 25 percent of global production. Use this chart to view the estimated emissions from a barrel of oil or megajoule of petroleum products generated annually, filtering by region or oil category. Hover over each bar to see an oil’s total emissions or navigate into its details.</p> </div> <div class="attribution"><a href="https://www.mapbox.com/about/maps/" target="_blank">© Mapbox</a><a href="https://www.digitalglobe.com/" target="_blank">© DigitalGlobe</a></div> </div> </section> <section class="section-content has-aside" id="sc-chart-cont"> <div class="row"> <header class="panel-header"> <div class="panel-headline"> <h1 class="panel-title">Chart</h1> </div> </header> <div class="panel-body"> <div id="supply-curve" class="data-charts"> <span class="button button-small button-filter">Filter Chart</span> <div id="no-results-message"> <p>There are currently no oils that match your filter requirements.</p> </div> </div> </div> <div class="filter-hideable filter-hidden"> <h3 class="header-filter">Filter Oils</h3> <div class="control-section"> <fieldset id="ratio-select"> <legend class="control-title">Select Units</legend> <div class="radio"> <label><input type="radio" name="ratio-select" value="perBarrel" checked="checked"> GHGs/Barrel</label> </div> <div class="radio"> <label><input type="radio" name="ratio-select" value="perMJ"> GHGs/Megajoule Product</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="region-select"> <legend class="control-title">Filter by Region</legend> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Asia-Pacific"> Asia-Pacific</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Europe"> Europe</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Russia & Eurasia"> Russia & Eurasia</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Middle East & N. Africa"> Middle East & North Africa</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="North America"> North America</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="S. America & Carribean"> South America & Carribean</label> </div> <div class="checkbox"> <label><input type="checkbox" name="region-select" value="Sub-Saharan Africa"> Sub-Saharan Africa</label> </div> </fieldset> </div> <div class="control-section"> <fieldset id="oiltype-select"> <legend class="control-title">Filter by Oil Type</legend> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Extra-Heavy"><span class="extraheavy-color block-color"></span> Extra-Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Heavy"><span class="heavy-color block-color"></span> Heavy</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Medium"><span class="medium-color block-color"></span> Medium</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Light"><span class="light-color block-color"></span> Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Light"><span class="ultra-light-color block-color"></span> Ultra-Light</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Condensate"><span class="condensate-color block-color"></span> Condensate</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Ultra-Deep"><span class="ultra-deep-color block-color"></span> Ultra-Deep</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="High Gas"><span class="high-gas-color block-color"></span> High Gas</label> </div> <div class="checkbox"> <span class="swatch"></span> <label><input type="checkbox" name="oiltype-select" value="Depleted"><span class="depleted-color block-color"></span> Depleted</label> </div> </fieldset> </div> </div> </div> </section> '+(null==(__t=blueBar)?"":__t)+" </div>";return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/team.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article id="about-view" class="view view-team"> <div class="row"> <div class="intro-sm"> <h1>The OCI Team</h1> </div> <div class="prose prose-content"> <div class="container-bio clearfix"> <div id="gordon" class="contentImg float-left headshot"></div> <div class="bio"> <p><a href="http://carnegieendowment.org/experts/?fa=558" target="_blank">Deborah Gordon</a> is the director of and a senior associate in the Energy and Climate Program at the Carnegie Endowment for International Peace. Her research focuses on the climate implications of unconventional oil and fossil fuels in the United States and around the world. Gordon founded the transportation program at the Union of Concerned Scientists, taught at the Yale School of Forestry and Environmental Studies, and developed vehicle efficiency policies at the U.S. Department of Energy’s Lawrence Berkeley National Laboratory. She began her career as a chemical engineer with Chevron and received a master’s degree in public policy from the University of California, Berkeley. From 1996 to 2010, Gordon ran a consulting practice specializing in transportation, energy, and environmental policy. She has served on National Academy of Sciences committees and the Transportation Research Board’s Energy Committee. Gordon has authored and contributed chapters to numerous books. The most recent, Two Billion Cars (with Daniel Sperling), provides a road map for navigating the biggest global environmental challenges of this century—cars and oil (Oxford University Press, 2009).</p> </div> </div> <div class="container-bio clearfix"> <div id="brandt" class="contentImg float-left headshot"></div> <div class="bio"> <p><a href="http://pangea.stanford.edu/~abrandt/" target="_blank">Adam Brandt</a> is an assistant professor in the Department of Energy Resources Engineering at Stanford University. His research focuses on reducing the greenhouse gas impacts of energy production and consumption, with a focus on fossil energy systems. His research interests include life-cycle assessments of petroleum production and natural gas extraction. A particular interest of his is in unconventional fossil fuel resources such as oil sands, oil shale, and hydraulically fractured oil and gas resources. He also researches computational optimization of emissions mitigation technologies, such as carbon dioxide capture systems. Brandt received his doctorate from the Energy and Resources Group at the University of California, Berkeley.</p> </div> </div> <div class="container-bio clearfix"> <div id="bergerson" class="contentImg float-left headshot"></div> <div class="bio"> <p><a href="http://schulich.ucalgary.ca/profiles/joule-bergerson" target="_blank">Joule Bergerson</a> is an assistant professor in the Chemical and Petroleum Engineering Department and the Center for Environmental Engineering Research and Education in the Schulich School of Engineering at the University of Calgary. Her primary research interests are systems-level analysis of energy system investment and management for policy and decisionmaking. The focus of Bergerson’s work is developing tools and frameworks for the assessment of prospective technology options and their policy implications from a life-cycle perspective. To date, her work has addressed fossil-fuel-derived electricity, oil sands development, carbon capture and storage, renewable energy, and energy storage technologies.</p> </div> </div> <div class="container-bio clearfix"> <div id="koomey" class="contentImg float-left headshot"></div> <div class="bio"> <p><a href="http://www.koomey.com/" target="_blank">Jonathan Koomey</a> is a research fellow at the Steyer-Taylor Center for Energy Policy and Finance at Stanford University. He worked for more than two decades at the Lawrence Berkeley National Laboratory and has been a visiting professor at Stanford University, Yale University, and the University of California, Berkeley’s Energy and Resources Group. He was a lecturer in management at Stanford’s Graduate School of Business in the spring of 2013. Koomey holds master’s and doctoral degrees from the Energy and Resources Group at the University of California, Berkeley, and a bachelor’s in History and Science from Harvard University. He is the author or co-author of nine books and more than 200 articles and reports. He is also one of the leading international experts on the economics of reducing greenhouse gas emissions, the effects of information technology on resource use, and the energy use and economics of data centers. Koomey is the author of Turning Numbers Into Knowledge: Mastering the Art of Problem Solving (which has been translated into Chinese and Italian) and Cold Cash, Cool Climate: Science-Based Advice for Ecological Entrepreneurs. (Both books were published by Analytics Press.)</p> </div> </div> <h3>Others Involved in OCI Research and Development</h3> <div class="container-bio clearfix"> <div id="livingston" class="contentImg float-left headshot"></div> <div class="bio"> <p><a href="http://carnegieendowment.org/experts/?fa=553" target="_blank">David Livingston</a>, an associate in Carnegie’s Energy and Climate Program, was involved in OCI development at its inception and is currently researching the index’s policy applications. He previously worked at the World Trade Organization in Geneva and served as an adviser to the director of the Energy and Climate Change Branch of the United Nations Industrial Development Organization in Vienna. Livingston is a member of the Aspen Institute, the International Association for Energy Economics, and the Royal Institute for International Affairs (Chatham House). He was selected as a Future Energy Leader for the 2014–2017 term of the World Energy Council.</p> </div> </div> <div class="container-bio clearfix"> <div class="bio"> <p>Florencia Franzini, a program coordinator in Carnegie’s Energy and Climate Program, assumed responsibility for running all oils through the component models of OCI Phase 2 and managed the communications and finance logistics throughout the development of OCI Phase 2. She previously worked for Osa Conservation in Costa Rica. Franzini graduated from SUNY Stony Brook with a bachelor’s degree in marine vertebrate biology and will begin a master’s degree in forestry sciences and business at Helsinki University in Finland in the fall of 2016.</p> </div> </div> <div class="container-bio clearfix"> <div class="bio"> <p>Carnegie’s junior fellows (JF) contributed significantly to the OCI over the course of its development both in Phase 1 and Phase 2. Eugene Tan, JF class of 2014–2015, co-developed the Oil Products Emissions Module (OPEM) version 1.0 and worked closely with the web designers to bring the OCI to fruition. Tan graduated from Colorado College with a bachelor’s degree in environmental science with a concentration in chemistry. Jeffrey Feldman, JF class of 2015–2016, worked closely with the OCI research team to update OCI Phase 2, collaborated with the web designers to bring OCI Phase 2 online, updated OPEM to version 1.1, developed a methodology for assessing emissions drivers, and provided research support throughout the year on OCI Phase 2. Feldman graduated from Amherst College with a bachelor’s degree in economics and will begin his doctorate in political science at Brown University in the fall of 2016. Sam Wojcicki, JF class of 2016–2017, joins Carnegie at the release of OCI Phase 2 and is initially working to expand OPEM to version 2.0. Wojcicki graduated from Virginia Commonwealth University with a bachelor’s degree in chemical engineering.</p> <p>Research support was also provided at various stages of the OCI’s development by Kourosh Vafi, Sharad Bharadwaj, Yuchi Sun, Jacob Englander, Jingfan Wang, and Mohammed S. Masnadi at the Environmental Assessment and Optimization Group at Stanford University; Kavan Motazedi and John Guo at the University of Calgary; Jessica Abella formerly at the University of Calgary; Heather MacLean at the University of Toronto; and Zachary Schmidt at Analytics Press.</p> </div> </div> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/termsofuse.ejs":[function(require,module,exports){var _=require("underscore");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<article id="about-view" class="view view-terms"> <div class="row"> <div class="prose prose-content"> <div class="intro-sm"> <h1>Terms of Use</h1> </div> <p><em>Updated as of August 2, 2016</em> </p><p>By using this website (the "Website"), the user ("You") has accepted these Terms of Use. The Carnegie Endowment for International Peace (“Carnegie”) may update these Terms of Use at any time. All changes shall be effective immediately.</p> <p><strong>Statement of Purpose:</strong> The Oil-Climate Index (OCI), a collection of three open-source models, was developed as an integrated tool to systematically estimate the total greenhouse gas (GHG) emissions embodied in an entire barrel of oil. While OCI transparency allows users to delve into the models themselves, the Terms of Use of the OCI requires that its underlying models are used together. This ensures that the OCI provides a fully comparable and comprehensive estimate of the lifecycle GHG emissions per barrel of global oils. The OCI is a web tool that is updated to include additional test oils as new, verifiable oil input data are collected. Refer to the OCI Change Log on the OCI Methodology tab for OCI updates. Exceptions for OCI model runs for atypical oils are referenced the Special Cases tab.</p> <p><strong>Attribution:</strong> When referencing official outputs from the Oil-Climate Index (OCI), subject to the Terms of Use above, cite the URL, http://oci.carnegieendowment.org/. If a full citation is needed, use: Deborah Gordon, Adam Brandt, Joule Bergerson, and Jonathan Koomey, Oil-Climate Index, http://oci.carnegieendowment.org/, created 2015 and updated 2016. If users input different assumptions into the OCI and report their own results, they should specify what they changed and cite the OCI as follows: “User’s modifications to http://oci.carnegieendowment.org.”</p> <p><strong>Reporting Errors:</strong> To report data and calculations that the user believes to be in error, contact <a href="mailto:webmaster@ceip.org">webmaster@ceip.org</a>.</p> <p><strong>Accuracy and Completeness of Information on Website:</strong> The material on this website is provided for estimates only and should not be relied upon or used as the sole basis for making decisions without verifying primary, more complete, or more timely sources of information. Any reliance on the material on this website is at your own risk. Carnegie shall not be responsible or liable to you for any loss or damage of any sort incurred by you in connection with your use of the data on this website. This website may contain certain historical information. Historical information necessarily is not current and is provided for your reference only.</p> <p><strong>Linked Sites:</strong> The website contains links to other websites and resources. These links are provided for the underlying OCI models and may be subject to additional terms of use. Carnegie does not endorse or assume responsibility for content at linked sites.</p> <p><strong>Lawful Use Only:</strong> You may not use this site for any unlawful purpose. Your use of this website is subject to all applicable local, state, national, and international laws and regulations. You may not use this site in any manner that could damage or overburden the website or interfere with any other party’s use of the website. Any attempt to deliberately damage or inappropriately access this website is a violation of criminal and civil laws and will be handled as such.</p> </div> </div> </article> '+(null==(__t=blueBar)?"":__t);
return __p}},{underscore:"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/uniq"),o=i(s),r=e("lodash/find"),n=i(r),l=e("lodash/sortBy"),d=i(l),c=e("lodash/map"),u=i(c),h=e("lodash/reduce"),m=i(h),p=e("lodash/filter"),f=i(p),g=e("lodash/zipObject"),b=i(g),v=e("lodash/isEqual"),y=i(v),w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=e("jquery"),x=e("d3"),j=e("./models/opgee"),C=e("./models/prelim"),k={getGlobalExtent:function(e,t,a,i,s){"ghgTotal"===a&&(a=null);var o=i||"global",r=a||"total";if(Oci.data.globalExtents[e]&&Oci.data.globalExtents[e][o]&&Oci.data.globalExtents[e][o][r]&&Oci.data.globalExtents[e][o][r][t]&&("perDollar"!==e||(0,y["default"])(Oci.prices,Oci.origPrices)))return Oci.data.globalExtents[e][o][r][t];var n=Oci.data,l=n.info;i&&(l=(0,b["default"])([i],(0,f["default"])(l,function(e,t){return t===i})));var d="min"===t?-1:1,c=null,u={};for(var h in l){for(var p=null,g=+l[h]["Transport Emissions"],v=0;v<n.metadata.solarSteam.split(",").length;v++)for(var w=0;w<n.metadata.water.split(",").length;w++)for(var _=0;_<n.metadata.flare.split(",").length;_++)for(var x=0;x<n.metadata.year.split(",").length;x++){var O="run"+v+w+_+x;if(!Oci.Collections.opgee.get(O)){var S=new j({id:O});S.fetch({async:!1,success:function(e){Oci.Collections.opgee.add(e)}})}var P=Oci.Collections.opgee.get(O).toJSON()[h],E=+P["Net lifecycle emissions"];(!p||E*d>p*d)&&(p=E)}for(var I=0;I<n.metadata.refinery.split(",").length;I++)for(var A=0;A<2;A++){var T="run"+I+A;if(!Oci.Collections.prelim.get(T)){var D=new C({id:T});D.fetch({async:!1,success:function(e){Oci.Collections.prelim.add(e)}})}var M=Oci.Collections.prelim.get(T).toJSON()[h];if(!M)break;[0,.5,1].forEach(function(t){var i,s=+k.getRefiningTotal(M),o=+k.getCombustionTotal(M,t,A);u.upstream=p,u.midstream=s,u.downstream=o+g,i=a?u[a]:(0,m["default"])(u,function(e,t){return e+t},0),i=k.getValueForRatio(i,e,M,t,n.info[h],A),(!p||E*d>p*d)&&(p=E),(!c||i*d>c*d)&&(c=i)})}}return Oci.data.globalExtents[e]||(Oci.data.globalExtents[e]={}),Oci.data.globalExtents[e][o]||(Oci.data.globalExtents[e][o]={}),Oci.data.globalExtents[e][o][r]||(Oci.data.globalExtents[e][o][r]={}),Oci.data.globalExtents[e][o][r][t]=c,c},generateSocialLinks:function(e){var t="Explore the true cost of technological advancements across the complete oil supply chain.",a="The Oil-Climate Index",i="https://twitter.com/share?text="+t+"&url="+e,s="http://www.linkedin.com/shareArticle?mini=true&summary="+t+"&title="+a+"&url="+e,o="mailto:?subject="+a+"&body="+t+"\n\n"+e;return{twitter:i,linkedIn:s,mail:o}},prettyOilName:function(e){return e.Unique},cloneObject:function(e){if(null===e||"object"!==("undefined"==typeof e?"undefined":w(e)))return e;var t=e.constructor();for(var a in e)t[a]=this.cloneObject(e[a]);return t},getValueForRatio:function(e,t,a,i,s){switch(t){case"perBarrel":return e;case"perMJ":return e*(1/k.getMJPerBarrel(a,i,s))*1e3;case"perDollar":return e*(1/this.getPricePerBarrel(a,i,s))*1e3;case"perCurrent":return e*(1/s["Per $ Crude Oil - Current"])*1e3;case"perHistoric":return e*(1/s["Per $ Crude Oil - Historic"])*1e3;default:return e}},getPricePerBarrel:function(e,t,a,i){var s=i?"historicPrice":"currentPrice",o=Number(a["Barrels per day (PRELIM)"])||1e5,r=e["Portion Gasoline"]*Oci.prices.gasoline[s]+e["Portion Jet Fuel"]*Oci.prices.jetFuel[s]+e["Portion Diesel"]*Oci.prices.diesel[s]+e["Portion Fuel Oil"]*Oci.prices.fuelOil[s]+e["Portion Residual Fuels"]*Oci.prices.residualFuels[s]+e["Portion Surplus Refinery Fuel Gas (RFG)"]*Oci.prices.lightEnds[s]+e["Portion Liquefied Petroleum Gases (LPG)"]*Oci.prices.lpg[s];return r=42*r/o,r+=t*(e["Portion Petroleum Coke"]/5*Oci.prices.coke[s]/o),r+=t*a["Portion Net Upstream Petcoke"]*Oci.prices.coke[s]},getMJPerBarrel:function(e,t,a){var i=Boolean(Number(e["Portion Liquefied Petroleum Gases (LPG)"])),s=Number(a["Barrels per day (PRELIM)"])||1e5,o=Number(e["MJD Gasoline"])+Number(e["MJD Jet Fuel"])+Number(e["MJD Diesel"])+Number(e["MJD Fuel Oil"])+Number(e["MJD Residual Fuels"])+Number(e["MJD Surplus Refinery Fuel Gas (RFG)"])+(i?Number(e["MJD Liquefied Petroleum Gases (LPG)"]):0);return o+=t*e["MJD Petroleum Coke"],o+=t*a["Portion Net Upstream Petcoke"]*(a["Net Upstream Petcoke Conversion"]||31341.8)*s,o/s},categoryColorForType:function(e){var t=["#231F20","#645A4F","#006838","#009444","#8DC63F","#003A63","#EDCF0E","#006AA7","#CCC7C2","#0095DA"],a=x.scale.ordinal().domain(x.range(9)).range(t);switch(e){case"Extra-Heavy":return a(0);case"Heavy":return a(1);case"Medium":return a(2);case"Light":return a(3);case"Ultra-Light":return a(4);case"Ultra-Deep":return a(5);case"Oil Sands":return a(6);case"Depleted":return a(7);case"Condensate":return a(8);case"High Gas":return a(9);default:return console.warn("Invalid oil type for color",e),"#ccc"}},buildShareURLFromParameters:function(e){if(!e||""===e)return"";var t=[];for(var a in e)t.push(a+"="+e[a]);var i;i=0===t.length?"":"?"+t.join("&");var s=window.location.hash.split("?")[0],o=window.location.pathname,r=window.location.origin+o+s+i;return r},parseParametersFromShareURL:function(e){if(!e||""===e)return{};var t=e.split("?");if(2!==t.length)return{};for(var a=t[1].split("&"),i={},s=0;s<a.length;s++){var o=a[s].split("=");if(2!==o.length)return{};i[o[0]]=decodeURIComponent(o[1]).split(",")}return i},makeId:function(e){return e.toLowerCase().replace(/ /g,"-")},capitalize:function(e){return e?e[0].toUpperCase()+e.slice(1):""},numberWithCommas:function(e){"string"==typeof e&&(e=Number(e.split(",").join("")));var t=e.toFixed(0).length-1,a=Math.max(t-2,0),i=Math.pow(10,a);return e=Math.round(e/i)*i,e=String(Math.round(Number(e))),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},setInputFieldOption:function(e,t){var a=document.getElementsByName(e);if("INPUT"===a[0].nodeName&&("radio"===a[0].type||a.length>1&&"checkbox"===a[0].type))for(var i=0;i<a.length;i++)t.forEach(function(e){a[i].value===e&&(a[i].checked=!0)});else if("INPUT"===a[0].nodeName&&1===a.length&&"checkbox"===a[0].type)"on"===t[0]?a[0].checked=!0:a[0].checked=!1;else if("INPUT"===a[0].nodeName&&"text"===a[0].type)a[0].value=t[0];else if("SELECT"===a[0].nodeName){var s=t[0];_("[name="+e+"]").val(s)}else console.warn("Unexpected element type found when setting input field")},getDatasetKey:function(e){switch(e){case"apiGravity":return"API (PRELIM)";case"oilDepth":return"Field Depth";case"waterToOilRatio":return"Water-to-Oil-Ratio";case"gasToOilRatio":return"Gas-to-Oil-Ratio";case"ghgTotal":return"Total Emissions";case"transport":return"Transport Emissions";case"productionVolume":return"Oil Production Volume";case"sulfurContent":return"Sulfur %wt (PRELIM)";case"prodResidual":return"Portion Residual Fuels";case"prodGasoline":return"Portion Gasoline";case"prodDiesel":return"Portion Diesel";case"yearsProduction":return"Field Age";case"upstream":return"Upstream Emissions";case"midstream":return"Midstream Emissions";case"downstream":return"Downstream Emissions";case"steamToOilRatio":return"Steam-to-Oil-Ratio";case"flaringToOilRatio":return"Flaring-to-Oil-Ratio";case"prodLPG":return"Portion Liquefied Petroleum Gases (LPG)";case"prodJet":return"Portion Jet Fuel";case"prodPetcoke":return"Portion Petroleum Coke";case"prodUpstreamPetcoke":return"Portion Net Upstream Petcoke";case"currentMarketValue":return"Current Market Value";case"historicMarketValue":return"Historic Market Value";default:return console.warn("Unknown key "+e)}},getUnits:function(e,t){var a=function(e){switch(e){case"perBarrel":return"kg CO₂ eq./barrel crude";case"perMJ":return"g CO₂ eq./MJ products";case"perCurrent":return"g CO₂ eq./$ crude";case"perHistoric":return"g CO₂ eq./$ crude";case"perDollar":return"g CO₂ eq./$ products";default:return console.warn("unknown sort ratio"),""}};switch(e){case"apiGravity":return"deg API";case"oilDepth":return"feet";case"waterToOilRatio":return"bbl water/bbl crude";case"gasToOilRatio":case"flaringToOilRatio":return"scf/bbl crude";case"steamToOilRatio":return"bbl steam/bbl oil";case"productionVolume":return"barrels per day";case"emissionRate":return"million metric tons CO<sub>2</sub> eq./year";case"yearsProduction":return"Years";case"sulfurContent":return"% weight";case"flaring":return"billion cubic meters/year";case"prodGasoline":case"prodDiesel":case"prodResidual":case"prodLPG":case"prodJet":case"prodPetcoke":return"bbl product/100,000 bbl crude";case"type":case"ghgTotal":case"upstream":case"midstream":case"downstream":return a(t);case"currentMarketValue":case"historicMarketValue":case"ghgPrice":return"$ products/bbl crude";default:return console.warn("unknown key ("+e+")"),""}},getDatasetName:function(e,t,a){var i=function(e,t){if(!t)return e;switch(t){case"perBarrel":e+="";break;case"perMJ":e+=" Per Megajoule";break;case"perCurrent":e+=" Per Current Crude Value";break;case"perHistoric":e+=" Per Historic Crude Value";break;case"perDollar":e+=" Per Dollar";break;default:console.warn("Unknown sort ratio")}return e};switch(e){case"apiGravity":return"API Gravity";case"oilDepth":return"Field Depth";case"waterToOilRatio":return"Water-to-Oil Ratio";case"gasToOilRatio":return"Gas-to-Oil Ratio";case"productionVolume":return"Current Estimated Oil Production";case"prodGasoline":return"Gasoline Production";case"prodDiesel":return"Diesel Production";case"prodResidual":return"Residual Fuels Production";case"yearsProduction":return"Years in Production";case"sulfurContent":return"Sulfur Content";case"type":case"ghgTotal":case"midstream":case"upstream":case"downstream":return a===!0&&"ghgTotal"!==e?i(e+" Greenhouse Gas Emissions",t):i("Total Greenhouse Gas Emissions",t);case"steamToOilRatio":return"Steam-to-Oil Ratio";case"flaringToOilRatio":return"Flaring-to-Oil Ratio";case"prodLPG":return"Liquefied Petroluem Gas (LPG) Production";case"prodJet":return"Jet Fuel Production";case"prodPetcoke":return"Petroleum Coke Production";case"currentMarketValue":return"Current Market Value";case"historicMarketValue":return"Historic Market Value";default:return console.warn("Unknown key"),""}},indexInArray:function(e,t){for(var a=-1,i=0;i<e.length;i++)if(e[i]==t){a=i;break}return a},getOPGEEModel:function(e,t,a,i){var s=Oci.data.metadata,o=this.indexInArray(this.trimMetadataArray(s.solarSteam.split(",")),e),r=this.indexInArray(this.trimMetadataArray(s.water.split(",")),t),n=this.indexInArray(this.trimMetadataArray(s.flare.split(",")),a),l=this.indexInArray(this.trimMetadataArray(s.year.split(",")),i),d="run";return d+=o===-1||r===-1||n===-1||l===-1?"0000":[o,r,n,l].join("")},getPRELIMModel:function(e,t){var a=Oci.data.metadata,i=this.trimMetadataArray(a.refinery.split(",")).indexOf(e),s=Number(t),o="run";return i===-1?o+="0"+s:o=o+i+s,o},getCombustionTotal:function(e,t){var a=[e.Gasoline,e["Jet Fuel"],e.Diesel,e["Fuel Oil"],e["Residual Fuels"],e["Liquefied Petroleum Gas (LPG)"]];return t&&(a.push(e["Petroleum Coke"]*t),a.push(e["Net Upstream Petcoke"]*t)),x.sum(a)},getDownstreamComponents:function(e,t,a){var i=["Heat","Steam","Electricity","Hydrogen","Fluid","Excess","Portion","Total","Unique","MJperbbl","MJD"],s=(0,f["default"])((0,u["default"])(e,function(e,t){return{name:t,value:e}}),function(e){return["Petroleum Coke","Net Upstream Petcoke"].indexOf(e.name)===-1});t&&s.push({name:"Petroleum Coke",value:(Number(e["Petroleum Coke"])*t||0)+(Number(e["Net Upstream Petcoke"])*t||0)}),s.push({name:"Transport to Consumers",value:a});var o=(0,f["default"])(s,function(e){return i.indexOf(e.name.split(" ")[0])===-1&&Number(e.value)>.005});return this.preorderedSort(o,"downstream")},getRefiningComponents:function(e){var t=[{name:"Heat",value:this.aggregatePrelim(e,"Heat")},{name:"Electricity",value:+e.Electricity},{name:"Steam",value:this.aggregatePrelim(e,"Steam")},{name:"Hydrogen (via Steam Methane Reformer)",value:this.aggregatePrelim(e,"Hydrogen")},{name:"Catalyst Regeneration (Fluid Catalytic Cracking)",value:+e["Fluid Catalytic Cracking Regeneration"]}];return(0,f["default"])(t,function(e){return e.value>.005})},getExtractionComponents:function(e){var t=["Water-to-Oil-Ratio","Net","API","Gas-to-Oil-Ratio","Unique","Flaring-to-Oil-Ratio","Steam-to-Oil-Ratio"],a=(0,u["default"])(e,function(e,t){return{name:t,value:e}}),i=(0,f["default"])(a,function(e){return t.indexOf(e.name.split(" ")[0])===-1&&"0"!==Number(e.value).toFixed(0)});return this.preorderedSort(i,"upstream")},aggregatePrelim:function(e,t){return(0,m["default"])(e,function(e,a,i){return e+(i.split(" ")[0]===t?Number(a):0)},0)},getRefiningTotal:function(e){return e["Total refinery processes "]},trimMetadataArray:function(e){return e.map(function(e){return e.trim()})},createTooltipHtml:function(e,t,a,i,s,o,r,n,l,d){for(var c="",u=0;u<a.length;u++){var h=a[u];c+="<dt>"+h.name+'<small class="units">'+h.units+"</small></dt>",c+=r?'<dd class="value-oil-detail">$'+(Math.round(h.value/(1e3*(d?1e3:1))*Oci.carbonTax*20)/20).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</dd>":'<dd class="value-oil-detail">'+this.numberWithCommas(h.value)+"</dd>"}var m="";o&&(m='<div class="card-details-drivers"><h6>Emissions Drivers:</h6><ul>'+o.split(",").filter(function(e){return e.trim()}).map(function(e,t,a){return"<li>"+e}).join(",</li>")+"</li></ul></div>");var p=n?'<a  title="Zoom to Field" class="zoom-field button button-small button-tertiary '+i+'">Zoom to Field</a>':"",f='<div class="popover top in popover-main"><div class="popover-inner"><div class="popover-header"><p class="popover-meta oil-type"><span><span class="swatch" style="background-color:'+this.categoryColorForType(t)+'"></span>'+t+'</span></p><h3 class="popover-title">'+e+"</h3>"+(s?'<p class="description">'+s+"</p>":"")+m+'</div><div class="popover-body clearfix"><dl class="stats-list">'+c+'</dl></div><div class="popover-footer">'+(l?'<span class="data-quality units-description">Data Quality: '+l+"</span>":"")+'<a href="#oil/'+i+'" title="View oil profile" class="button button-small button-tertiary button-tertiary_arrow">View details</a>'+p+"</div></div></div>";return f},insideTooltip:function(e,t){var a=_(".d3-tip")[0].getBoundingClientRect();return e>a.left-30&&e<a.right&&t<a.bottom+30&&t>a.top},preorderedSort:function(e,t){return(0,d["default"])(e,function(e){return Oci.order[t].indexOf(e.name)})},refineryNameToDropdown:function(e){var t;switch(e){case"Hydroskimming Configuration":t=1;break;case"Medium Conversion: FCC & GO-HC ":t=2;break;case"Deep Conversion: FCC & GO-HC":t=3}return t},fallbackMessage:function(e){var t="",a="cut"===e?"X":"C";return t=/iPhone|iPad/i.test(navigator.userAgent)?"No support :(":/Mac/i.test(navigator.userAgent)?"Press ⌘-"+a+" to "+e:"Press Ctrl-"+a+" to "+e},getOilfield:function(e){var t=Oci.data.info[e],a=t["Oil Field Name (OPGEE)"];return a.match("Bakken")&&(a="Bakken"),(0,n["default"])(Oci.oilfields.features,function(e){return a===e.properties.Field_Name})},generateOilInfo:function(e){var t=Oci.data.info[e];t||console.warn("Unable to find oil for id:",e);var a=function(e){return"Sulfur: "+parseFloat(e).toFixed(2)+"%"},i=function(e){return parseInt(e)+" feet | "+parseInt(.3048*e)+" meters"},s={name:k.prettyOilName(t),Unique:t.Unique,keyStats:[{key:"Oil Type",value:t["Overall Crude Category"]},{key:"API Gravity",value:Math.round(Number(t["API (PRELIM)"]))},{key:"Location",value:t["Onshore/Offshore"]},{key:"Sulfur Content",value:t["Sulfur Category"],"data-title":a(t["Sulfur %wt (PRELIM)"])},{key:"Depth",value:t["Shallow; Deep; Ultra-Deep"]},{key:"Production Volume",value:t["Production Volume"]},{key:"Flare Rate",value:t["Flaring Class"]},{key:"Water Content",value:t["Watery Oil"]},{key:"Gas Content",value:t["Gassy Oil"]},{key:"Default Refinery Configuration",value:t["Default Refinery"]},{key:"Data Quality",value:k.getDataQuality(t.Unique).total+"*","data-title":k.printDataQualityComponents(k.getDataQuality(t.Unique))}]};return Oci.blurbs[t["Overall Crude Category"]]&&(s.keyStats[0]["data-title"]=Oci.blurbs[t["Overall Crude Category"]].description),t["Field Depth"]&&(s.keyStats[4]["data-title"]=i(t["Field Depth"])),s.keyStats[6].value+="*",s.keyStats[7].value+="*",s.keyStats[8].value+="*",s},generateOilObject:function(e,t,a,i){if(Object.keys(Oci.data.info).indexOf(e)===-1){var s,o=(0,f["default"])(Oci.data.info,function(t){return t.Region===k.groupIDtoName(e)||t["Overall Crude Category"]===k.groupIDtoName(e)}).map(function(e,o,r){return s=r.length,k.generateOilObject(e.Unique,t,a,i)}).reduce(function(t,a){return{isComparison:i,id:e,name:k.capitalize(e),apiGravity:t.apiGravity+a.apiGravity,oilDepth:t.oilDepth+a.oilDepth,ghgTotal:t.ghgTotal+a.ghgTotal,upstream:t.upstream+a.upstream,midstream:t.midstream+a.midstream,downstream:t.downstream+a.downstream,waterToOilRatio:t.waterToOilRatio+a.waterToOilRatio,gasToOilRatio:t.gasToOilRatio+a.gasToOilRatio,type:"aggregated",components:{downstream:k.arrayObjSum(t.components.downstream,a.components.downstream),midstream:k.arrayObjSum(t.components.midstream,a.components.midstream),upstream:k.arrayObjSum(t.components.upstream,a.components.upstream)}}});return{isComparison:o.isComparison,id:o.id,name:o.name,apiGravity:o.apiGravity/s,oilDepth:o.oilDepth/s,ghgTotal:o.ghgTotal/s,upstream:o.upstream/s,midstream:o.midstream/s,downstream:o.downstream/s,waterToOilRatio:o.waterToOilRatio/s,gasToOilRatio:o.gasToOilRatio/s,type:o.type,components:{downstream:k.arrayObjDiv(o.components.downstream,s),midstream:k.arrayObjDiv(o.components.midstream,s),upstream:k.arrayObjDiv(o.components.upstream,s)}}}var r=t.info[e],n=t.opgee[e],l=t.prelim[e],d=+n["Net lifecycle emissions"],c=+k.getRefiningTotal(l),u=+r[k.getDatasetKey("transport")],h=+k.getCombustionTotal(l,a),m=x.sum([d,c,u,h]);return{isComparison:i,id:k.makeId(r.Unique),name:k.prettyOilName(r),apiGravity:+r[k.getDatasetKey("apiGravity")],oilDepth:+r[k.getDatasetKey("oilDepth")],ghgTotal:m,upstream:d,midstream:c,downstream:h+u,waterToOilRatio:+n[k.getDatasetKey("waterToOilRatio")],gasToOilRatio:+n[k.getDatasetKey("gasToOilRatio")],type:r["Overall Crude Category"].trim(),components:{downstream:k.getDownstreamComponents(l,a,u),midstream:k.getRefiningComponents(l),upstream:k.getExtractionComponents(n)}}},groupIDtoName:function(e){for(var t=0;t<Oci.regions.concat(Oci.types).length;t++)if(k.makeId(Oci.regions.concat(Oci.types)[t])===e)return Oci.regions.concat(Oci.types)[t]},arrayObjSum:function(e,t){var a=(0,o["default"])((0,u["default"])(e,"name").concat((0,u["default"])(t,"name")));return a.map(function(a){var i=e.filter(function(e){return e.name===a}),s=t.filter(function(e){return e.name===a});return{name:a,value:(i.length?Number(i[0].value):0)+(s.length?Number(s[0].value):0)}})},arrayObjDiv:function(e,t){return e.map(function(e){return{name:e.name,value:e.value/t}})},scrollToElementWithID:function(e){_("html, body").animate({scrollTop:_("#"+e).offset().top-66},1e3),_("html, body").animate({scrollTop:_("#"+e).offset().top-65},1)},getDataQuality:function(e){function t(e){return e>2.5?"High":e>1.85?"Medium":e>0?"Low":"N/A"}var a=Oci.data.info[e],i=+a["OPGEE Data Quality"],s=+a["PRELIM Data Quality"],o=+a["OPEM Data Quality"];return{total:t(((i||0)+(s||0)+(o||0))/((i?1:0)+(s?1:0)+(o?1:0))),upstream:t(i),midstream:t(s),downstream:t(o)}},printDataQualityComponents:function(e){return(0,u["default"])(e,function(e,t){return"total"===t?"":k.capitalize(t)+": "+k.capitalize(e)}).filter(function(e){return e}).join(", ")}};t.exports=k},{"./models/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js","./models/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js",d3:"d3",jquery:"jquery","lodash/filter":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/filter.js","lodash/find":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/find.js","lodash/isEqual":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isEqual.js","lodash/map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/map.js","lodash/reduce":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/reduce.js","lodash/sortBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/sortBy.js","lodash/uniq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/uniq.js","lodash/zipObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/zipObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/about.js":[function(e,t,a){"use strict";var i=e("../templates/about.ejs"),s=e("../templates/bluebar.ejs"),o=e("./baseview"),r=o.extend({template:i,el:".content",events:{},initialize:function(){this._windowSizing(),this.render()},render:function(){this.$el.html(this.template({blueBar:s()})),this._activateSearchBar()}});t.exports=r},{"../templates/about.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/about.ejs","../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js":[function(e,t,a){"use strict";var i=e("backbone"),s=e("d3"),o=e("jquery");window.$=o;var r=e("../utils"),n=i.View.extend({_windowSizing:function(){var e=this;o(window).on("resize",function(){void 0===window.orientation&&e._handleResize(e.resizeOptions)}),o(window).on("orientationchange",function(){setTimeout(function(){e._handleResize(e.resizeOptions)},500)})},_parseURLAndSetState:function(){var e=r.parseParametersFromShareURL(window.location.href),t=this.shareParams||[];t.forEach(function(t){e[t.name]&&r.setInputFieldOption(t.input,e[t.name])}),(e.opgee||e.prelim||e.showCoke)&&(e.opgee=e.opgee[0],e.prelim=e.prelim[0],e.showCoke=e.showCoke[0],this.modelParametersView.setModelParameters(e))},_handleResize:function(e){e&&!e.width||(this.width=o(this.chartElement).width()-this.margin.left-this.margin.right),e&&!e.height||(this.height=Math.round(this.width/this.aspectRatio)),s.select(this.chartElement+" svg").remove(),this.chartInit()},_showPrices:function(e){e.preventDefault(),Oci.showPricesModal(!0)},_setupShare:function(){var e=this._updateShareUrl(),t=encodeURIComponent(r.buildShareURLFromParameters({})),a=r.generateSocialLinks(t);this._updateCopyLink(t),o("li.twitter a").attr("href",a.twitter),o("li.linkedin a").attr("href",a.linkedIn),o("li.email a").attr("href",a.mail),o("#share-copy").attr("value",e)},_updateShareUrl:function(){if(this.hasShareLinkBeenParsed===!1)return window.location.href;var e={},t=this.shareParams||[];if(this.modelParametersView){var a=this.modelParametersView.getModelValues();e={opgee:r.getOPGEEModel(a.solarSteam,a.water,a.flaring,a.year),prelim:r.getPRELIMModel(a.refinery,a.lpg),showCoke:a.showCoke}}var i;return t.forEach(function(t){i=[];var a=document.getElementsByName(t.input);if("INPUT"===a[0].nodeName&&("radio"===a[0].type||a.length>1&&"checkbox"===a[0].type)){for(var s=0;s<a.length;s++)o(a[s]).is(":checked")&&i.push(encodeURIComponent(a[s].value));i.length>0&&(e[t.name]=i.join(","))}else"INPUT"===a[0].nodeName&&1===a.length&&"checkbox"===a[0].type?e[t.name]=a[0].checked?"on":"off":"INPUT"===a[0].nodeName&&"text"===a[0].type?e[t.name]=a[0].value:"SELECT"===a[0].nodeName&&(i=o("[name="+t.input+"]").find(":selected").val(),e[t.name]=i)}),r.buildShareURLFromParameters(e)},_updateCopyLink:function(){var e=this._updateShareUrl();o("li.copylink").attr("data-clipboard-text",e),window.history.replaceState(null,null,e)},_activateSearchBar:function(){var e=[];Object.keys(Oci.data.info||{}).forEach(function(t){e.push(Oci.data.info[t].Unique)});var t=1;o(".component-search input").on("input",function(){var a=o(this).val(),i=new RegExp(a,"i"),s=e.filter(function(e){return a.length>=t&&e.search(i)>-1}),n=s.map(function(e){var t=r.makeId(e);return'<div class="search-result"><a href="#oil/'+t+'">'+e+"</a></div>"}).join("");o(this).parent().find(".search-results").html(n)}),o(".component-search input").on("keyup",function(e){e.preventDefault(),e.stopPropagation();var t,a,i,s=o(this).parent().find(".search-results"),r=o(this).parent().find(".search-result"),n=r.hasClass("active"),l=r.parent().find(".active");if(s.html())switch(e.keyCode){case 38:n?(l.removeClass("active"),t=l.prev(),t.length?(i=t.addClass("active"),i.position().top<0&&s.scrollTop(s.scrollTop()-i.outerHeight())):(r.last().addClass("active"),s.scrollTop(s[0].scrollHeight))):(r.last().addClass("active"),s.scrollTop(s[0].scrollHeight));break;case 40:n?(l.removeClass("active"),a=l.next(),a.length?(i=a.addClass("active"),i.position().top+i.outerHeight()>s.outerHeight()&&s.scrollTop(s.scrollTop()+i.outerHeight())):(r.first().addClass("active"),s.scrollTop(0))):r.first().addClass("active");break;case 13:r.hasClass("active")&&Oci.router.navigate(l.find("a").attr("href"),{trigger:!0})}})}});t.exports=n},{"../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js",backbone:"backbone",d3:"d3",jquery:"jquery"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/compareoils.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/map"),o=i(s),r=e("lodash/each"),n=i(r),l=e("lodash/groupBy"),d=i(l),c=e("lodash/forOwn"),u=i(c),h=e("lodash/pickBy"),m=i(h),p=e("lodash/find"),f=i(p),g=e("d3"),b=e("d3-tip");b(g);var v=e("jquery"),y=e("../utils"),w=e("../templates/compareoils.ejs"),_=e("../templates/bluebar.ejs"),x=e("./modelparameters"),j=e("./baseview"),C=e("../models/opgee"),k=e("../models/prelim"),O=j.extend({template:w,el:".content",events:{"click #compare-oils-share":"handleShare","click #price-button":"showPrices","change #toggle-lpg":"handleParametersChange","change .config-dropdown":"handleDropdown","click .mp-summary":"handleParametersToggle","change #sort-select":"handleSortSelect","change #step-select":"handleStepSelect","change #ratio-select":"handleRatioSelect","change #region-select":function(){this.handleFilter("region-select","Region")},"change #oiltype-select":function(){this.handleFilter("oiltype-select","Overall Crude Category")},"change #opec-select":function(){this.handleFilter("opec-select","OPEC")},"change #toggle-carbon":"handleCarbonToggle","keyup #carbon-tax":"verifyPrice"},initialize:function(){var e=this;this.chartElement="#compare-oils",this.margin={top:84,right:32,bottom:0,left:12},this.sortOrderDescending=!0,this.sortStep="ghgTotal",this.sortRatio="perBarrel",this.barHeight=30,this.metrics=["upstream","midstream","downstream"],this.transitionDuration=1500,this.filters={},this.hasShareLinkBeenParsed=!1,this.showCarbon=!1,this.shareParams=[{name:"carbonToggle",input:"toggle-carbon"},{name:"carbonTax",input:"carbon-tax"},{name:"ratioSelect",input:"ratio-select"},{name:"stepSelect",input:"step-select"},{name:"sortSelect",input:"sort-select"},{name:"regionSelect",input:"region-select"},{name:"oiltypeSelect",input:"oiltype-select"},{name:"opecSelect",input:"opec-select"}],this.resizeOptions={width:!0},this._windowSizing(),this.tip=g.tip().attr("class","d3-tip").html(function(t){var a=e.chartData.map(function(e){var a=(0,f["default"])(e,function(e){return e.y===t.y});return{name:y.capitalize(a.step),value:a.x,units:""}});return a.unshift({name:"Total",value:t.ghgTotal,units:e.getXAxisSubtitle()}),y.createTooltipHtml(t.y,t.type,a,y.makeId(t.y),"",Oci.data.info[t.y]["Absolute Emissions Icons"],e.showCarbon,!1,y.getDataQuality(t.y).total,"perDollar"===e.sortRatio)}).offset([0,20]).direction("e"),this.render()},render:function(){this.$el.html(this.template({blueBar:_()})),this.modelParametersView=new x,this.$("#model-parameters").html(this.modelParametersView.render()),this.listenTo(this.modelParametersView,"sliderUpdate",this.handleParametersChange),this.chartInit(),this._setupShare(),this._activateSearchBar(),this._parseURLAndSetState(),this.handleFilter("region-select","Region"),this.handleFilter("oiltype-select","Overall Crude Category"),this.handleFilter("opec-select","OPEC"),this.handleRatioSelect(),this.handleStepSelect(),this.handleSortSelect(),this.handleCarbonToggle(),this.verifyPrice(),this.updateChart(!0,!0),this.hasShareLinkBeenParsed=!0},createChartData:function(){var e=this;this.chartData=[];var t=this.modelParametersView.getModelValues(),a=y.getOPGEEModel(t.solarSteam,t.water,t.flaring,t.year),i=y.getPRELIMModel(t.refinery,t.lpg);if(!Oci.Collections.opgee.get(a)){var s=new C({id:a});s.fetch({async:!1,success:function(e){Oci.Collections.opgee.add(e)}})}if(!Oci.Collections.prelim.get(i)){var o=new k({id:i});o.fetch({async:!1,success:function(e){Oci.Collections.prelim.add(e)}})}var r={info:Oci.data.info,opgee:Oci.Collections.opgee.get(a).toJSON(),prelim:Oci.Collections.prelim.get(i).toJSON()};r.info=(0,m["default"])(r.info,function(t){var a=!0;return(0,u["default"])(e.filters,function(e,i){e.indexOf(t[i])===-1&&(a=!1)}),a}),this.height=this.barHeight*Object.keys(r.info).length;for(var n=Object.keys(r.info),l=0;l<n.length;l++){var d=r.info[n[l]],c=r.opgee[n[l]],h=r.prelim[n[l]];if(h){var p=+c["Net lifecycle emissions"],f=y.getRefiningTotal(h),b=+d[y.getDatasetKey("transport")],v=y.getCombustionTotal(h,t.showCoke);p=+y.getValueForRatio(p,this.sortRatio,h,t.showCoke,d),f=+y.getValueForRatio(f,this.sortRatio,h,t.showCoke,d),b=+y.getValueForRatio(b,this.sortRatio,h,t.showCoke,d),v=+y.getValueForRatio(v,this.sortRatio,h,t.showCoke,d);var w=g.sum([p,f,b,v]),_={id:y.makeId(d.Unique),name:y.prettyOilName(d),apiGravity:+d[y.getDatasetKey("apiGravity")],oilDepth:+d[y.getDatasetKey("oilDepth")],ghgTotal:w,upstream:p,midstream:f,downstream:v+b,waterToOilRatio:+c[y.getDatasetKey("waterToOilRatio")],gasToOilRatio:+c[y.getDatasetKey("gasToOilRatio")],type:d["Overall Crude Category"].trim()};this.chartData.push(_)}}this.sortByField(this.sortStep,this.sortOrderDescending),this.chartData=this.metrics.map(function(t){return e.chartData.map(function(e){return{x:e.name,y:e[t],type:e.type,ghgTotal:e.ghgTotal}})}),this.lastStep="downstream";var x=g.layout.stack().order(function(t){switch(e.sortStep){case"midstream":return[1,0,2];case"downstream":return e.lastStep="midstream",[2,0,1];default:return g.range(t.length)}});x(this.chartData),this.chartData=this.chartData.map(function(t,a){return t.map(function(t){return{x:t.y,y:t.x,x0:t.y0,step:e.metrics[a],type:t.type,ghgTotal:t.ghgTotal}})})},sortByField:function(e,t){var a=(0,d["default"])(this.chartData,"type"),i=[];(0,n["default"])(a,function(e,t){var a={};a.name=t,a.avgGhgTotal=(0,o["default"])(e,"ghgTotal").reduce(function(e,t){return e+t})/e.length,i.push(a)}),i.sort(function(e,t){return e.avgGhgTotal-t.avgGhgTotal});var s=i.map(function(e){return e.name});this.chartData.sort(function(a,i){return"type"===e?(1e6*s.indexOf(a.type)+a.ghgTotal-(1e6*s.indexOf(i.type)+i.ghgTotal))*(1-2*Number(t)):"indirect"===e?(a.upstream+a.midstream-(i.upstream+i.midstream))*(1-2*Number(t)):(a[e]-i[e])*(1-2*Number(t))})},createScales:function(){var e=this.width,t=this.height,a=y.getGlobalExtent(this.sortRatio,"max");this.xScale=g.scale.linear().domain([0,a]).range([0,e]).nice();var i=this.chartData[0].map(function(e){return e.y});this.yScale=g.scale.ordinal().domain(i).rangeBands([0,t],.05,.1),this.processScale=g.scale.ordinal().domain(["upstream","midstream","downstream"]).rangePoints([1,.4])},createData:function(e){var t=this,a=this.svg.selectAll(".step").data(this.chartData);a.enter().append("g").attr("class",function(e,a){
return"step "+t.metrics[a]});var i=a.selectAll("g.rect-container").data(function(e){return e},function(e){return e.y});i.exit().remove();var s=i.selectAll("rect").length?1:20;i.selectAll("rect").data(function(e){return[e]}).transition().duration(this.transitionDuration/2*e).attr("x",function(e){return t.xScale(e.x0)}).attr("width",function(e){return t.xScale(e.x)}).transition().delay(this.transitionDuration/2*e).duration(this.transitionDuration).attr("y",function(e){return t.yScale(e.y)}).attr("height",function(){return t.yScale.rangeBand()}).attr("opacity",function(e){return t.processScale(e.step)}),i.selectAll("text").transition().duration(this.transitionDuration).delay(this.transitionDuration/2*e).attr("y",function(e){return t.yScale(e.y)+3+t.barHeight/2}).attr("opacity",1).attr("x",9).attr("fill","#ccc7c2").text(function(e){return e.y});var o=i.enter().append("g").attr("class","rect-container");o.append("rect").attr("x",function(e){return t.xScale(e.x0)}).attr("y",function(e){return t.yScale(e.y)}).attr("height",function(){return t.yScale.rangeBand()}).attr("width",function(e){return t.xScale(e.x)}).attr("fill",function(e){return y.categoryColorForType(e.type)}).attr("opacity",0).attr("class",function(e){return e.y.replace(/ /g,"-").replace(/['\.]/g,"")}).on("mouseover",function(e){var a=e.y.replace(/ /g,"-").replace(/['\.]/g,""),i="."+t.lastStep+" rect."+a,s=g.select(i).node();t.tip.show(e,s),v('.stats-list dt:contains("'+y.capitalize(e.step)+'")').addClass("highlight"),v('.stats-list dt:contains("'+y.capitalize(e.step)+'")').next().addClass("highlight"),v('.stats-list dt:contains("Total")').addClass("total"),v('.stats-list dt:contains("Total")').next().addClass("total")}).on("mouseleave",function(){y.insideTooltip(g.event.clientX,g.event.clientY)?v(".d3-tip").on("mouseleave",function(){t.tip.hide()}):t.tip.hide()}).transition().delay(this.transitionDuration/s).duration(this.transitionDuration/2).attr("opacity",function(e){return t.processScale(e.step)}),o.append("text").transition().delay(this.transitionDuration/s).attr("y",function(e){return t.yScale(e.y)+4.5+t.barHeight/2}).attr("x",9).attr("fill","#ccc7c2").text(function(e){return e.y}),0===this.chartData[0].length?v("#no-results-message").show():v("#no-results-message").hide()},createAxes:function(){var e=this,t=this.width;this.xAxis=g.svg.axis().scale(this.xScale).orient("top"),this.svg.append("g").attr("class","x axis").call(this.xAxis);var a=this.svg.append("g");a.append("text").attr("transform","translate("+t/2+","+-68+")").style("text-anchor","middle").attr("class","x axis title").text(e.getXAxisTitle()),a.append("text").attr("transform","translate("+t/2+","+-48+")").style("text-anchor","middle").attr("class","x axis title subtitle").text(e.getXAxisSubtitle())},chartInit:function(){this.width=v(this.chartElement).width()-this.margin.left-this.margin.right,this.svg=g.select(this.chartElement).append("svg").attr("width",this.width+this.margin.left+this.margin.right).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.svg.call(this.tip);var e=Object.keys(Oci.data.info).length;this.height=this.barHeight*e,g.select(this.chartElement+" svg").attr("height",this.height+this.margin.top+this.margin.bottom),this.createChartData(),this.createScales(),this.createData(!1),this.createAxes()},handleSortSelect:function(){this.sortOrderDescending="true"===v("input[name=sort-select]:checked").val(),this.updateChart(!1,!1)},handleStepSelect:function(){for(var e,t=document.getElementsByName("step-select"),a=this.sortStep.slice(0),i=0;i<t.length;i++)if(t[i].checked){e=t[i].value,this.sortStep=e;break}var s=["midstream","downstream"],o=s.indexOf(a)!==s.indexOf(this.sortStep);this.updateChart(!1,o)},handleRatioSelect:function(){for(var e,t=document.getElementsByName("ratio-select"),a=0;a<t.length;a++)if(t[a].checked){e=t[a].value,this.sortRatio=e;break}this.updateChart(!0,!0)},handleFilter:function(e,t){for(var a=document.getElementsByName(e),i=[],s=0;s<a.length;s++){var o=a[s];o.checked&&i.push(o.value)}0===i.length?delete this.filters[t]:this.filters[t]=i,this.updateChart(!1,!1)},updateChart:function(e,t){this.createChartData(),this.createScales(),this.createData(t),this.updateAxes(e),this._updateCopyLink()},updateAxes:function(e){var t=this,a="perDollar"===this.sortRatio,i=y.getGlobalExtent(this.sortRatio,"max"),s=this.showCarbon?g.scale.linear().domain([0,i/(1e3*(a?1e3:1))*Oci.carbonTax]).range([0,this.width]).nice():this.xScale;this.xAxis=g.svg.axis().scale(s).orient("top"),this.svg.select(".x.axis").transition().duration(this.transitionDuration).call(this.xAxis),e&&v(".x.axis.title").fadeOut(this.transitionDuration/2,function(){t.svg.select(".x.axis.subtitle").text(t.getXAxisSubtitle()),t.svg.select(".x.axis.title").text(t.getXAxisTitle()),v(this).fadeIn(t.transitionDuration/2)})},handleShare:function(e){e.preventDefault()},showPrices:function(e){e.preventDefault(),Oci.showPricesModal(!0)},updatePrices:function(){this.createChartData(),this.updateChart(!1,!0)},getXAxisTitle:function(){return this.showCarbon?"Carbon Tax":y.getDatasetName(this.sortStep,this.sortRatio)},getXAxisSubtitle:function(){return this.showCarbon?y.getUnits("ghgTotal",this.sortRatio).replace(/.*\//,"$ tax/").replace("MJ","1000 MJ"):y.getUnits("ghgTotal",this.sortRatio)},handleDropdown:function(){v(".config-dropdown").blur(),this.handleParametersChange()},handleParametersChange:function(){this.createChartData(),this.updateChart(!1,!0),this._updateCopyLink()},handleParametersToggle:function(){v("#model-parameters").toggleClass("open")},verifyPrice:function(){var e=v("#carbon-tax"),t=/^\d{0,7}(\.\d{0,2})?$/.test(e.val());if(!t){var a=e.val();a=a.replace(/[^\d.]/g,""),a=parseFloat(a).toFixed(2),(isNaN(a)||a.length>=11)&&(a=parseFloat(20).toFixed(2)),e.val(a)}Oci.carbonTax=e.val(),this.updateAxes(!1),this._updateCopyLink()},handleCarbonToggle:function(){this.showCarbon=v("#toggle-carbon").is(":checked"),this.showCarbon?v("#toggle-carbon").parent().parent().find(".input-group").removeClass("disabled"):v("#toggle-carbon").parent().parent().find(".input-group").addClass("disabled"),this.updateAxes(!0),this._updateCopyLink()}});t.exports=O},{"../models/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js","../models/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js","../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/compareoils.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/compareoils.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js","./modelparameters":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/modelparameters.js",d3:"d3","d3-tip":"d3-tip",jquery:"jquery","lodash/each":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/each.js","lodash/find":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/find.js","lodash/forOwn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forOwn.js","lodash/groupBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/groupBy.js","lodash/map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/map.js","lodash/pickBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/pickBy.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/compareview.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/every"),o=i(s),r=e("lodash/each"),n=i(r),l=e("lodash/filter"),d=i(l),c=e("lodash/forEach"),u=i(c);e("mapbox.js");var h=e("d3"),m=e("jquery"),p=e("turf-centroid"),f=e("../utils"),g=e("../templates/compareview.ejs"),b=e("./modelparameters"),v=e("./baseview"),y=e("../models/opgee"),w=e("../models/prelim"),_=v.extend({template:g,el:".content",events:{"change #toggle-lpg":"handleParametersChange","change .config-dropdown":"handleDropdown","click #oil-details-share":"handleShare","click .carosel-arrow":"handleCarosel","click .compare":"openCompare"},initialize:function(e){var t=this;this.margin={top:0,right:60,bottom:0,left:0},this.height=75-this.margin.top-this.margin.bottom,this.barBuffer=2,this.hasShareLinkBeenParsed=!1,this.chartElement="#oil-details",(0,u["default"])(Oci.data.info,function(a,i){f.makeId(i)===e.oil&&(t.oilKey=i),f.makeId(i)===e.comparisonOil&&(t.comparisonOilKey=i)}),this.oil=f.generateOilInfo(this.oilKey),this.comparisonOilKey?this.comparisonOil=f.generateOilInfo(this.comparisonOilKey):this.comparisonOilKey=e.comparisonOil,this.tip=h.tip().attr("class","d3-tip").html(function(e,a){for(var i=f.getUnits("ghgTotal","perBarrel"),s="",o=e.components[t.getStepName(a)],r=0;r<o.length;r++){s+='<dt style="width:80%;">'+o[r].name+"</dt>";var n=Number(o[r].value);n=Math.abs(n)<1?n.toFixed(1):n.toFixed(0),s+='<dd style="width:20%;">'+n+"</dd>"}return'<div class="popover in popover-compare""><div class="popover-inner"><div class="popover-header clearfix"><dl class="stats-list"><dt>'+t.getStepName(a)+' emissions<small class="units">'+i+"</small></dt><dd>"+t.dataForSvg(a,e).toFixed(0)+'</dd></dl></div><div class="popover-body"><dl class="stats-list">'+s+"</dl></div></div></div>"}).offset(function(e,a){return t.dataForSvg(a,e)<.3*t.xScale.domain()[1]?[0,25]:[-10,0]}).direction(function(e,a){return t.dataForSvg(a,e)<.3*t.xScale.domain()[1]?"e":"n"}),this._windowSizing(),this.render()},render:function(){var e=this,t=this.comparisonOil&&this.comparisonOil.name||f.groupIDtoName(this.comparisonOilKey);this.$el.html(this.template({utils:f,oil:this.oil,comparisonOil:this.comparisonOil,comparisonOilName:t,totalUnits:f.getUnits("ghgTotal","perBarrel"),suggestedOils:Oci.relatedOils[this.oilKey]||[],relatedOils:Oci.relatedOils[this.oilKey]&&Oci.relatedOils[this.oilKey].map(function(e){var t=Oci.data.info[e];return t?f.createTooltipHtml(t.Unique,t["Overall Crude Category"],[{name:"GHG Emissions",value:f.numberWithCommas(t["Total Emissions"]),units:f.getUnits("ghgTotal","perBarrel")},{name:"Current Production",value:f.numberWithCommas(t["Oil Production Volume"]),units:f.getUnits("productionVolume")},{name:"Estimated GHG Emission Rate",value:f.numberWithCommas(Number(t["Total Emissions"])*Number(t["Oil Production Volume"])*365/1e9),units:f.getUnits("emissionRate")}],f.makeId(t.Unique),"",t["Absolute Emissions Icons"]):""})||[]})),this.modelParametersView=new b,this.$("#model-parameters").html(this.modelParametersView.render()),this.listenTo(this.modelParametersView,"sliderUpdate",this.handleParametersChange),Oci.data.metadata.refinery.split(", ").forEach(function(a,i){Number(Oci.data.info[e.oil.Unique]["Refinery exception"])===i&&m('#dropdown-refinery option[value="'+a+'"]').hide(),e.comparisonOil?Number(Oci.data.info[e.comparisonOil.Unique]["Refinery exception"])===i&&m('#dropdown-refinery option[value="'+a+'"]').hide():(0,d["default"])(Oci.data.info,function(e){return e.Region===t||e["Overall Crude Category"]===t}).forEach(function(e){Number(Oci.data.info[e.Unique]["Refinery exception"])===i&&m('#dropdown-refinery option[value="'+a+'"]').hide()})}),this.comparisonModelHeight=.5*(this.height-this.barBuffer),this.modelHeight=this.height-this.comparisonModelHeight,this.width=m(".container-charts").width()-this.margin.left-this.margin.right,L.mapbox.accessToken="pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q";var a=L.mapbox.map("map","mapbox.light",{zoomControl:!1,keyboard:!1,tap:!1,dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1});this.bounds=[],(0,n["default"])([this.oil,this.comparisonOil],function(i,s){if(i)e.addMarker(i,a,0===s);else{var o=(0,d["default"])(Oci.data.info,function(a){return(a.Region===t||a["Overall Crude Category"]===t)&&a.Unique!==e.oil.Unique}).map(function(e){return f.generateOilInfo(e.Unique)});o.forEach(function(t){e.addMarker(t,a)})}});var i=new L.latLngBounds(this.bounds);a.fitBounds(i,{paddingTopLeft:[0,180],paddingBottomRight:[0,120]}),this.chartInit(),this._setupShare(),this._activateSearchBar(),this.activateCompareSearchBar(),this._parseURLAndSetState(),this.handleParametersChange(),this.handleDropdown(),this.hasShareLinkBeenParsed=!0},getStepName:function(e){return e[0][0].parentNode.parentNode.id.split("-")[0]},updateSvg:function(e){var t=this;e.selectAll("rect").data(this.chartData).transition().duration(1e3).attr("width",function(a){return t.xScale(t.dataForSvg(e,a))});var a=0,i=this.chartData[1].components[t.getStepName(e)];e.selectAll(".oilComponent").data(i).transition().duration(1e3).attr("x",function(e){return a+=+e.value,t.xScale(a)});var s=0,o=this.chartData[0].components[t.getStepName(e)];e.selectAll(".comparisonOilComponent").data(o).transition().duration(1e3).attr("x",function(e){return s+=+e.value,t.xScale(s)});var r={upstream:(this.chartData[1].upstream-this.chartData[0].upstream)/this.chartData[0].upstream,midstream:(this.chartData[1].midstream-this.chartData[0].midstream)/this.chartData[0].midstream,downstream:(this.chartData[1].downstream-this.chartData[0].downstream)/this.chartData[0].downstream};e.selectAll(".diff-text").data([r]).text(function(a){var i=t.dataForSvg(e,a);return(i>0?"+":"-")+Math.abs(100*i).toFixed(0)+"%"}).classed("invisible",function(a){var i=t.dataForSvg(e,a);return Math.abs(i)<.01}).transition().duration(1e3).attr("x",function(a){return t.xScale(t.dataForSvg(e,t.chartData[1]))+12})},createChartData:function(){var e=this.modelParametersView.getModelValues(),t=f.getOPGEEModel(e.solarSteam,e.water,e.flaring,e.year),a=f.getPRELIMModel(e.refinery,e.lpg);if(!Oci.Collections.opgee.get(t)){var i=new y({id:t});i.fetch({async:!1,success:function(e){Oci.Collections.opgee.add(e)}})}if(!Oci.Collections.prelim.get(a)){var s=new w({id:a});s.fetch({async:!1,success:function(e){Oci.Collections.prelim.add(e)}})}var o={info:Oci.data.info,opgee:Oci.Collections.opgee.get(t).toJSON(),prelim:Oci.Collections.prelim.get(a).toJSON()};this.chartData=[f.generateOilObject(this.comparisonOilKey,o,e.showCoke,!0),f.generateOilObject(this.oilKey,o,e.showCoke,!1)],m("#model-total").html(this.chartData[1].ghgTotal.toFixed(0)),m("#comparison-model-total").html(this.chartData[0].ghgTotal.toFixed(0));var r=(this.chartData[1].ghgTotal-this.chartData[0].ghgTotal)/this.chartData[0].ghgTotal,n="("+(r>0?"+":"-")+Math.abs(100*r).toFixed(0)+"%)";m("#diff").html(n),m("#diff").removeClass("invisible"),Math.abs(r)<.01&&m("#diff").addClass("invisible")},dataForSvg:function(e,t){return e===this.upstreamSvg?t.upstream:e===this.downstreamSvg?t.downstream:e===this.midstreamSvg?t.midstream:void console.warn("oops!")},handleParametersChange:function(){this.createChartData(),this.updateSvg(this.upstreamSvg),this.updateSvg(this.downstreamSvg),this.updateSvg(this.midstreamSvg),this._updateCopyLink()},createScales:function(){var e,t=this;e=Oci.regions.concat(Oci.types).indexOf(f.groupIDtoName(this.comparisonOilKey))>-1?null:this.comparisonOilKey,this.xScale=h.scale.linear().domain([0,h.max(this.chartData,function(a){return h.max([f.getGlobalExtent("perBarrel","max","downstream",t.oilKey),f.getGlobalExtent("perBarrel","max","midstream",t.oilKey),f.getGlobalExtent("perBarrel","max","upstream",t.oilKey),f.getGlobalExtent("perBarrel","max","downstream",e),f.getGlobalExtent("perBarrel","max","midstream",e),f.getGlobalExtent("perBarrel","max","upstream",e)])})]).range([0,t.width])},createData:function(e){var t=this;m("#default-total").html(this.chartData[0].ghgTotal.toFixed(0)),m("#oil-name").html(this.oil.name),e.selectAll("rect").data(this.chartData).enter().append("rect").attr("x",function(){return t.xScale(0)}).attr("y",function(e){return e.isComparison?t.modelHeight+t.barBuffer:0}).attr("width",function(a){return t.xScale(t.dataForSvg(e,a))}).attr("height",function(e){return e.isComparison?t.comparisonModelHeight:t.modelHeight}).attr("rx",2).attr("ry",2).attr("class",function(e){return e.isComparison?"compare":"main"}).on("mouseover",function(a){t.tip.show(a,e)}).on("mouseout",function(e){f.insideTooltip(h.event.clientX,h.event.clientY)?m(".d3-tip").on("mouseleave",function(){t.tip.hide()}):t.tip.hide()});var a=this.chartData[1].components[this.getStepName(e)],i=this.chartData[0].components[this.getStepName(e)],s=(0,o["default"])(a.concat(i),function(e){return+e.value>=0});if(s){var r=0;e.selectAll(".oilComponent").data(a).enter().append("rect").attr("class","oilComponent").attr("pointer-events","none").attr("x",function(e){return r+=+e.value,t.xScale(r)}).attr("y",0).attr("width",t.xScale(.25)).attr("height",t.modelHeight).attr("rx",2).attr("ry",2).attr("fill","#fff");var n=0;e.selectAll(".comparisonOilComponent").data(i).enter().append("rect").attr("class","comparisonOilComponent").attr("pointer-events","none").attr("x",function(e){return n+=+e.value,t.xScale(n)}).attr("y",function(e){return t.modelHeight+t.barBuffer}).attr("width",t.xScale(.25)).attr("height",t.modelHeight).attr("rx",2).attr("ry",2).attr("fill","#fff")}var l={upstream:(this.chartData[1].upstream-this.chartData[0].upstream)/this.chartData[0].upstream,midstream:(this.chartData[1].midstream-this.chartData[0].midstream)/this.chartData[0].midstream,downstream:(this.chartData[1].downstream-this.chartData[0].downstream)/this.chartData[0].downstream};e.selectAll(".diff-text").data([l]).enter().append("text").text(function(a){var i=t.dataForSvg(e,a);return(i>0?"+":"-")+Math.abs(100*i).toFixed(0)+"%"}).classed("invisible",function(a){var i=t.dataForSvg(e,a);return Math.abs(i)<.01}).attr("x",function(a){return t.xScale(t.dataForSvg(e,t.chartData[1]))+12}).attr("y",t.modelHeight/2+4).attr("class","diff-text")},chartInit:function(){var e=this.width,t=this.height,a=this.margin;this.upstreamSvg=h.select("#upstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.downstreamSvg=h.select("#downstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.midstreamSvg=h.select("#midstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.upstreamSvg.call(this.tip),this.midstreamSvg.call(this.tip),this.downstreamSvg.call(this.tip),this.createChartData(),this.createScales(),this.createData(this.upstreamSvg),this.createData(this.midstreamSvg),this.createData(this.downstreamSvg)},handleDropdown:function(){m(".config-dropdown").blur(),this.handleParametersChange()},_handleResize:function(){this.width=m(".container-charts").width()-this.margin.left-this.margin.right,h.select("#upstream-bar").html(""),h.select("#midstream-bar").html(""),h.select("#downstream-bar").html(""),this.chartInit()},handleShare:function(e){e.preventDefault()},handleCarosel:function(e){var t,a=m(e.currentTarget).hasClass("forward")?1:-1,i=m(e.currentTarget).parent().find(".carosel"),s=m(".carosel-arrow");[0,1,2,3,4].forEach(function(e){i.hasClass("offset-"+e)&&(t=e)}),i.removeClass("offset-"+t),s.removeClass("offset-"+t),i.addClass("offset-"+(Number(t)+a)),s.addClass("offset-"+(Number(t)+a))},openCompare:function(e){e.preventDefault(),e.stopPropagation();var t=m(e.currentTarget).parent().find(".dropdown-compare");t.toggleClass("open"),t.hasClass("open")&&t.find("input").focus()},activateCompareSearchBar:function(){var e=this,t=[];(0,u["default"])(Oci.data.info,function(e){t.push(e.Unique)}),t=t.concat(Oci.regions,Oci.types);var a=1;m(".dropdown-compare input").on("input",function(){var i=m(this).val(),s=new RegExp(i,"i"),o=t.filter(function(e){return i.length>=a&&e.search(s)>-1}),r=o.map(function(t){var a=f.makeId(t);return'<div class="search-result"><a href="#compare/'+f.makeId(e.oilKey)+"/"+a+'">'+t+"</a></div>"}).join("");m(this).parent().find(".search-results").html(r)}),m(".dropdown-compare input").focus(function(e){m(e.currentTarget).parent().find(".search-results").addClass("visible")}),m(".dropdown-compare input").blur(function(e){setTimeout(function(){m(e.currentTarget).parent().find(".search-results").removeClass("visible")},200)}),m("body").on("click.custom",function(){m(".dropdown-compare").removeClass("open")}),m(".dropdown-compare").on("click.custom",function(e){e.stopPropagation()}),m(".dropdown-compare input").on("keyup",function(e){e.preventDefault(),e.stopPropagation();var t,a,i,s=m(this).parent().find(".search-results"),o=m(this).parent().find(".search-result"),r=o.hasClass("active"),n=o.parent().find(".active");if(s.html())switch(e.keyCode){case 38:r?(n.removeClass("active"),t=n.prev(),t.length?(i=t.addClass("active"),i.position().top<0&&s.scrollTop(s.scrollTop()-i.outerHeight())):(o.last().addClass("active"),s.scrollTop(s[0].scrollHeight))):(o.last().addClass("active"),s.scrollTop(s[0].scrollHeight));break;case 40:r?(n.removeClass("active"),a=n.next(),a.length?(i=a.addClass("active"),i.position().top+i.outerHeight()>s.outerHeight()&&s.scrollTop(s.scrollTop()+i.outerHeight())):(o.first().addClass("active"),s.scrollTop(0))):o.first().addClass("active");break;case 13:o.hasClass("active")&&Oci.router.navigate(n.find("a").attr("href"),{trigger:!0})}})},addMarker:function(e,t,a){var i=L.divIcon({html:"",iconSize:[24,24],iconAnchor:[12,12],className:"map-oil"+(a?" map-oil-main":"")}),s=f.getOilfield(e.Unique),o=p(s),r=L.marker([o.geometry.coordinates[1],o.geometry.coordinates[0]],{icon:i,clickable:!1});this.bounds.push(r.getLatLng()),r.addTo(t)}});t.exports=_},{"../models/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js","../models/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js","../templates/compareview.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/compareview.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js","./modelparameters":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/modelparameters.js",d3:"d3",jquery:"jquery","lodash/each":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/each.js","lodash/every":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/every.js","lodash/filter":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/filter.js","lodash/forEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forEach.js","mapbox.js":"mapbox.js","turf-centroid":"turf-centroid"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/demovideos.js":[function(e,t,a){"use strict";var i=e("../templates/demovideos.ejs"),s=e("../templates/bluebar.ejs"),o=e("./baseview"),r=o.extend({template:i,el:".content",events:{},initialize:function(){this._windowSizing(),this.render()},render:function(){this.$el.html(this.template({blueBar:s()})),this._activateSearchBar()}});t.exports=r},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/demovideos.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/demovideos.ejs","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/emissionsdrivers.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/forOwn"),o=i(s),r=e("lodash/pickBy"),n=i(r),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=e("d3"),c=e("d3-tip");c(d);var u=e("jquery"),h=e("../utils"),m=e("simple-statistics"),p=e("../templates/emissionsdrivers.ejs"),f=e("../templates/bluebar.ejs"),g=e("./modelparameters"),b=e("./baseview"),v=e("../models/opgee"),y=e("../models/prelim"),w=b.extend({template:p,el:".content",events:{"click #ratio-select":"handleRatioSelect","click #emissions-drivers-share":"handleShare",click:"hideTip","click #price-button":"showPrices","change #toggle-lpg":"handleParametersChange","change .config-dropdown":"handleDropdown","click .mp-summary":"handleParametersToggle","change #oiltype-select":function(){this.handleFilter("oiltype-select","Overall Crude Category")}},hideTip:function(){this.tip.hide()},initialize:function(){var e=this;this.chartElement="#emissions-drivers",this.margin={top:85,right:28,bottom:72,left:84},this.aspectRatio=1.5,this.xProperty="upstream",this.sortRatio="perBarrel",this.yProperty="ghgTotal",this.transitionDuration=1e3,this.extentBuffer=.1,this.filters={},this.hasShareLinkBeenParsed=!1,this.shareParams=[{name:"ratioSelect",input:"ratio-select"},{name:"xSelect",input:"x-select"},{name:"ySelect",input:"y-select"},{name:"oiltypeSelect",input:"oiltype-select"}],this._windowSizing(),this.tip=d.tip().attr("class","d3-tip").html(function(t){var a=[{name:h.getDatasetName(e.xProperty),value:h.numberWithCommas(t[e.xProperty]),units:h.getUnits(e.xProperty,e.sortRatio)},{name:h.getDatasetName(e.yProperty).split(" ").pop(),value:h.numberWithCommas(t[e.yProperty]),units:h.getUnits(e.yProperty,e.sortRatio)},{name:h.getDatasetName("productionVolume"),value:h.numberWithCommas(t.productionVolume),units:h.getUnits("productionVolume",e.sortRatio)}];return h.createTooltipHtml(t.name,t.type,a,t.id,"",Oci.data.info[t.name]["Absolute Emissions Icons"],!1,!1,h.getDataQuality(t.name).total)}).offset([0,20]).direction("e"),this.render()},render:function(){this.$el.html(this.template({blueBar:f()})),this.modelParametersView=new g,this.$("#model-parameters").html(this.modelParametersView.render()),this.listenTo(this.modelParametersView,"sliderUpdate",this.handleParametersChange);var e=this.margin;this.width=u(this.chartElement).width()-e.left-e.right,this.height=Math.round(this.width/this.aspectRatio),this.chartInit(),this._setupShare(),this._activateSearchBar(),this._parseURLAndSetState(),this.handleRatioSelect(),this.changeAxisCategory("x"),this.changeAxisCategory("y"),this.handleFilter("oiltype-select","Overall Crude Category"),this.hasShareLinkBeenParsed=!0},addExtentBuffer:function(e){var t=this.extentBuffer;return"object"===("undefined"==typeof e?"undefined":l(e))?(e[0]=e[0]*(1-t),e[1]=e[1]*(1+t)):e*=1+t,e},createScales:function(){var e=this,t=this.addExtentBuffer(d.max(this.chartData,function(t){return t[e.xProperty]}));this.xScale=d.scale.linear().domain([0,t]).range([0,this.width]).nice();var a=h.getGlobalExtent(this.sortRatio,"min",this.yProperty),i=h.getGlobalExtent(this.sortRatio,"max",this.yProperty),s=this.addExtentBuffer([a,i]);this.yScale=d.scale.linear().domain(s).range([this.height,0]).nice();var o=this.addExtentBuffer(d.extent(this.chartData,function(e){return e.productionVolume}));this.rScale=d.scale.sqrt().domain(o).range([4,42])},createAxes:function(){var e=this.margin,t=this.height,a=this.width;this.xAxis=d.svg.axis().scale(this.xScale).orient("bottom").ticks(5),this.yAxis=d.svg.axis().scale(this.yScale).orient("left").ticks(5),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+(t+4)+")").call(this.xAxis);var i=this.svg.append("g");i.append("text").attr("transform","translate("+a/2+","+(t+e.bottom-25)+")").style("text-anchor","middle").attr("class","x axis title").text(h.getDatasetName(this.xProperty)),i.append("text").attr("transform","translate("+a/2+","+(t+e.bottom-5)+")").style("text-anchor","middle").attr("class","x axis title subtitle").text(h.getUnits(this.xProperty,this.sortRatio)),this.svg.append("g").attr("class","y axis").attr("transform","translate(-4,0)").call(this.yAxis),i=this.svg.append("g"),i.append("text").attr("transform","rotate(-90)").attr("y",-e.left).attr("x",-(t/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title").text(h.getDatasetName(this.yProperty,this.sortRatio,!0)),i.append("text").attr("transform","rotate(-90)").attr("y",-e.left+20).attr("x",-(t/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title subtitle").text(h.getUnits(this.yProperty,this.sortRatio))},createData:function(){var e=this,t=this.svg.selectAll("circle").data(this.chartData,function(e){return e.name});t.transition().duration(this.transitionDuration).attr("cx",function(t){return e.xScale(t[e.xProperty])}).attr("cy",function(t){return e.yScale(t[e.yProperty])}).attr("opacity",.8),t.enter().append("circle").attr("fill",function(e){return h.categoryColorForType(e.type)}).attr("opacity",0).attr("cx",function(t){return e.xScale(t[e.xProperty])}).attr("cy",function(t){return e.yScale(t[e.yProperty])}).attr("r",function(t){return e.rScale(t.productionVolume)}).attr("clip-path","url(#chart-area)").on("mouseover",function(t){e.tip.show(t)}).on("mouseout",function(){h.insideTooltip(d.event.clientX,d.event.clientY)?u(".d3-tip").on("mouseleave",function(){e.tip.hide()}):e.tip.hide()}).transition().duration(this.transitionDuration).attr("opacity",.8),t.exit().transition().duration(this.transitionDuration).attr("opacity",0).remove()},createLegend:function(){var e=this.margin,t=this.width,a=this;d.select("svg").selectAll(".circle-legend").data([55,68,86]).enter().append("circle").classed("circle-legend",!0).attr("fill-opacity","0").attr("stroke","#777").attr("cx",function(a){return t+e.left+e.right-57}).attr("cy",function(e){return e}).attr("r",function(e,t){return a.rScale([9e4,4e4,4e3][t])}),d.select("svg").selectAll(".circle-text").data([{text:"90k",y:10},{text:"40k",y:38},{text:"4000",y:73}]).enter().append("text").attr("class","circle-text").attr("x",function(a){return t+e.left+e.right-57}).attr("y",function(e){return e.y}).attr("text-anchor","middle").style("fill","#777").text(function(e){return e.text}),d.select("svg").append("text").attr("x",function(a){return t+e.left+e.right-105}).attr("y",12).attr("text-anchor","end").attr("class","circle-text").style("fill","#777").text("Production Volume"),d.select("svg").append("text").attr("x",function(a){return t+e.left+e.right-105}).attr("y",27).attr("text-anchor","end").attr("class","circle-text").style("fill","#777").text("Barrels per Day")},createLine:function(){var e=this,t=this.chartData.map(function(t){return[e.xScale(t[e.xProperty]),e.yScale(t[e.yProperty])]}),a=d.min(this.chartData,function(t){return t[e.xProperty]}),i=d.max(this.chartData,function(t){return t[e.xProperty]});if(a===i)return this.svg.selectAll(".trend").transition().duration(this.transitionDuration).attr("opacity",0).remove();var s=m.linearRegressionLine(m.linearRegression(t)),o=m.rSquared(t,s);this.line=d.svg.line().x(function(e){return e}).y(function(e){return s(e)});var r=this.svg.selectAll(".trend").data([[]]);r.enter().append("path").attr("clip-path","url(#chart-area)").attr("d",this.line(this.xScale.range())).attr("class","trend").attr("opacity",Math.min(o+.2,1)),r.transition().duration(this.transitionDuration).attr("d",this.line(this.xScale.range())).attr("opacity",Math.min(o+.2,1))},chartInit:function(){var e=this.margin,t=this.width,a=this.height;this.svg=d.select(this.chartElement).append("svg").attr("width",t+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),this.svg.call(this.tip),this.svg.append("clipPath").attr("id","chart-area").append("rect").attr("width",t).attr("height",a),
this.createChartData(),this.createScales(),this.createAxes(),this.createLine(),this.createData(),this.createLegend()},createChartData:function(){var e=this;this.chartData=[];var t=this.modelParametersView.getModelValues(),a=h.getOPGEEModel(t.solarSteam,t.water,t.flaring,t.year),i=h.getPRELIMModel(t.refinery,t.lpg);if(!Oci.Collections.opgee.get(a)){var s=new v({id:a});s.fetch({async:!1,success:function(e){Oci.Collections.opgee.add(e)}})}if(!Oci.Collections.prelim.get(i)){var r=new y({id:i});r.fetch({async:!1,success:function(e){Oci.Collections.prelim.add(e)}})}var l={info:Oci.data.info,opgee:Oci.Collections.opgee.get(a).toJSON(),prelim:Oci.Collections.prelim.get(i).toJSON()};l.info=(0,n["default"])(l.info,function(t){var a=!0;return(0,o["default"])(e.filters,function(e,i){e.indexOf(t[i])===-1&&(a=!1)}),a});for(var c=Object.keys(l.info),u=0;u<c.length;u++){var m=l.info[c[u]],p=l.opgee[c[u]],f=l.prelim[c[u]];if(f){var g=+p["Net lifecycle emissions"],b=h.getRefiningTotal(f),w=+m[h.getDatasetKey("transport")],_=h.getCombustionTotal(f,t.showCoke);g=+h.getValueForRatio(g,this.sortRatio,f,t.showCoke,m),b=+h.getValueForRatio(b,this.sortRatio,f,t.showCoke,m),w=+h.getValueForRatio(w,this.sortRatio,f,t.showCoke,m),_=+h.getValueForRatio(_,this.sortRatio,f,t.showCoke,m);var x=d.sum([g,b,w,_]);isNaN(b)&&(x=NaN);var j={id:h.makeId(m.Unique),name:h.prettyOilName(m),type:m["Overall Crude Category"].trim(),ghgTotal:x,productionVolume:+m[h.getDatasetKey("productionVolume")],apiGravity:+m[h.getDatasetKey("apiGravity")],sulfurContent:100*+m[h.getDatasetKey("sulfurContent")],yearsProduction:+m[h.getDatasetKey("yearsProduction")],upstream:g,midstream:b,downstream:_+w,waterToOilRatio:+p[h.getDatasetKey("waterToOilRatio")],gasToOilRatio:+p[h.getDatasetKey("gasToOilRatio")],steamToOilRatio:+p[h.getDatasetKey("steamToOilRatio")],flaringToOilRatio:+p[h.getDatasetKey("flaringToOilRatio")],prodGasoline:+f[h.getDatasetKey("prodGasoline")],prodDiesel:+f[h.getDatasetKey("prodDiesel")],prodResidual:+f[h.getDatasetKey("prodResidual")],prodLPG:+f[h.getDatasetKey("prodLPG")],prodJet:+f[h.getDatasetKey("prodJet")],prodPetcoke:(+f[h.getDatasetKey("prodPetcoke")]+Number(m[h.getDatasetKey("prodUpstreamPetcoke")]))*t.showCoke,currentMarketValue:h.getPricePerBarrel(f,t.showCoke,m),historicMarketValue:h.getPricePerBarrel(f,t.showCoke,m,!0)};this.chartData.push(j)}}this.chartData=this.chartData.filter(function(t){var a=isNaN(t[e.xProperty]),i=isNaN(t[e.yProperty]);return!a&&!i}),this.chartData.sort(function(e,t){return t.productionVolume-e.productionVolume})},changeAxisCategory:function(e){this[e+"Property"]=u("#"+e+"-select").val(),this.updateChart(e)},handleRatioSelect:function(){for(var e,t=document.getElementsByName("ratio-select"),a=0;a<t.length;a++)if(t[a].checked){e=t[a].value,this.sortRatio=e;break}this.createChartData(),this.updateChart("y")},updateAxes:function(e){var t=this,a=this.transitionDuration;e&&"x"!==e||(this.xAxis=d.svg.axis().scale(this.xScale).orient("bottom").ticks(5),this.svg.select(".x.axis").transition().duration(a).call(this.xAxis),u(".x.axis.title").fadeOut(a/2,function(){t.svg.select(".x.axis.subtitle").text(h.getUnits(t.xProperty,t.sortRatio)),t.svg.select(".x.axis.title").text(h.getDatasetName(t.xProperty,t.sortRatio,!0)),u(this).fadeIn(a/2)})),e&&"y"!==e||(this.yAxis=d.svg.axis().scale(this.yScale).orient("left").ticks(5),this.svg.select(".y.axis").transition().duration(a).call(this.yAxis),u(".y.axis.title").fadeOut(a/2,function(){t.svg.select(".y.axis.subtitle").text(h.getUnits(t.yProperty,t.sortRatio)),t.svg.select(".y.axis.title").text(h.getDatasetName(t.yProperty,t.sortRatio,!0)),u(this).fadeIn(a/2)}))},handleShare:function(e){e.preventDefault()},updateChart:function(e){this.createChartData(),this.createScales(),this.updateAxes(e),this.createLine(),this.createData(),this._updateCopyLink()},handleFilter:function(e,t){for(var a=document.getElementsByName(e),i=[],s=0;s<a.length;s++){var o=a[s];o.checked&&i.push(o.value)}0===i.length?delete this.filters[t]:this.filters[t]=i,this.updateChart()},showPrices:function(e){e.preventDefault(),Oci.showPricesModal(!0)},updatePrices:function(){this.updateChart("y")},handleDropdown:function(e){return"x-select"===e.target.id?this.changeAxisCategory("x"):"y-select"===e.target.id?this.changeAxisCategory("y"):(u(".config-dropdown").blur(),void this.handleParametersChange())},handleParametersChange:function(){this.updateChart()},handleParametersToggle:function(){u("#model-parameters").toggleClass("open")}});t.exports=w},{"../models/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js","../models/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js","../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/emissionsdrivers.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/emissionsdrivers.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js","./modelparameters":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/modelparameters.js",d3:"d3","d3-tip":"d3-tip",jquery:"jquery","lodash/forOwn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forOwn.js","lodash/pickBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/pickBy.js","simple-statistics":"simple-statistics"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/glossary.js":[function(e,t,a){"use strict";var i=e("../utils"),s=e("../templates/glossary.ejs"),o=e("../templates/bluebar.ejs"),r=e("./baseview"),n=r.extend({template:s,el:".content",events:{},initialize:function(e){this._windowSizing(),this.render(e.scrollTo)},render:function(e){this.$el.html(this.template({blueBar:o()})),this._activateSearchBar(),e&&i.scrollToElementWithID(e)}});t.exports=n},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/glossary.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/glossary.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/homepage.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/map"),o=i(s),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=e("jquery"),l=e("d3");e("d3-tip");var d=e("../utils"),c=e("../animation-mock-data"),u=e("../templates/homepage.ejs"),h=e("../templates/bluebar.ejs"),m=e("./baseview"),p=function(){};p.prototype.init=function(e){this.el=e,this.animated=!1,this.width=n(this.el).width(),this.height=250,this.create()},p.prototype.create=function(){return this.createDataAndScales(),l.select(this.el).selectAll("*").remove(),this.svg=l.select(this.el).append("svg").attr("width",this.width).attr("height",this.height),this.draw(),this};var f=m.extend({template:u,el:".content",events:{},initialize:function(){var e=this;this._windowSizing(),this.chartElement="#home",this.charts={},this.charts.fakeMap=new p,this.charts.fakeMap.createDataAndScales=function(){this.height=387,this.data=c.map,this.colorScale=l.scale.linear().domain(l.extent((0,o["default"])(this.data,"g"))).range(["#ddd","orangered"])},this.charts.fakeMap.draw=function(){var e="pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q",t="https://api.mapbox.com/v4/devseed.f5a0e5c3/0,20,2/"+this.width+"x"+this.height+".png?access_token="+e;n(this.el).css("background-image","url("+t+")");var a=this,i=this.svg.selectAll("circle").data(this.data);i.enter().append("circle").attr("fill",function(e){return a.colorScale(e.g)}).attr("opacity",.5).attr("cx",function(e){return e.x*a.width}).attr("cy",function(e){return e.y*a.height}).attr("r",0)},this.charts.fakeMap.animate=function(){var e=this.svg.selectAll("circle").data(this.data),t=1e3;e.transition().delay(function(e,t){return 75*t}).duration(t).attr("r",function(e){return 2.2*e.r})},this.charts.fakeProductionGraph=new p,this.charts.fakeProductionGraph.createDataAndScales=function(){var e=0;this.data=c.productionGraph,this.data.forEach(function(t){t.x0=e,e+=t.p}),this.x=l.scale.linear().domain([0,e]).range([0,this.width]),this.y=l.scale.linear().domain([0,l.max(this.data,function(e){return e.g})]).range([this.height,0])},this.charts.fakeProductionGraph.draw=function(){var e=this;this.svg.selectAll("rect").data(this.data).enter().append("rect").attr("x",function(t,a){return e.x(12*a)}).attr("y",function(t){return e.y(0)}).attr("width",function(t){return e.x(12)}).attr("height",function(t){return e.height-e.y(0)}).attr("fill",function(e){return d.categoryColorForType(e.type)}).attr("opacity",.8)},this.charts.fakeProductionGraph.animate=function(){var e=this,t=750,a=50;this.svg.selectAll("rect").data(this.data).transition().delay(function(e,t){return t*a}).duration(t).attr("y",function(t){return e.y(t.g)}).attr("height",function(t){return e.height-e.y(t.g)}).transition().delay(t+(e.data.length-1)*a).duration(t).attr("x",function(t){return e.x(t.x0)}).attr("width",function(t){return e.x(t.p)})},this.charts.fakeSupplyChain=new p,this.charts.fakeSupplyChain.createDataAndScales=function(){var e=this;this.metrics=["upstream","midstream","downstream"],this.data=c.supplyChain;var t=l.layout.stack();t(this.data),this.data=this.data.map(function(t,a){return t.map(function(t){return{x:t.y,y:t.x,x0:t.y0,step:e.metrics[a],type:t.type,ghgTotal:t.g}})}),this.tip=l.tip().attr("class","d3-tip").html(function(){var t=e.data,a=[{name:"Upstream",value:t[0][1].x,units:""},{name:"Midstream",value:t[1][1].x,units:""},{name:"Downstream",value:t[2][1].x,units:""}];return a.unshift({name:"Total",value:t[0][1].x+t[1][1].x+t[2][1].x,units:d.getUnits("ghgTotal","perBarrel")}),d.createTooltipHtml("",t[0][1].type,a,"","")}).offset([50,0]),this.x=l.scale.linear().domain([0,120]).range([0,this.width]).nice(),this.y=l.scale.ordinal().domain(["oil1","oil2","oil3","oil4","oil5","oil6","oil7","oil8"].reverse()).rangeRoundBands([0,this.height],.05),this.processScale=l.scale.ordinal().domain(["upstream","midstream","downstream"]).rangePoints([1,.4])},this.charts.fakeSupplyChain.draw=function(){var e=this,t=this.svg.selectAll(".step").data(this.data);t.enter().append("g").attr("class",function(t,a){return"step "+e.metrics[a]});var a=t.selectAll("g.rect-container").data(function(e){return e},function(e){return e.y}),i=a.enter().append("g").attr("class","rect-container");i.append("rect").attr("x",function(t,a){return e.x(0)}).attr("y",function(t){return e.y(t.y)}).attr("height",function(){return e.y.rangeBand()}).attr("width",function(t){return e.x(0)}).attr("fill",function(e){return d.categoryColorForType(e.type)}).attr("opacity",function(t){return e.processScale(t.step)}),this.svg.call(this.tip)},this.charts.fakeSupplyChain.animate=function(){var e=this,t=this.svg.selectAll(".step").data(this.data);t.enter().append("g").attr("class",function(t,a){return"step "+e.metrics[a]});var a=t.selectAll("g.rect-container").data(function(e){return e},function(e){return e.y}),i=750,s=5;a.selectAll("rect").data(function(e){return[e]}).transition().delay(function(t){return e.y(t.y)*s}).duration(i).attr("x",function(t){return e.x(t.x0)}).attr("width",function(t){return e.x(t.x)}),setTimeout(function(){var t=e.svg.selectAll(".midstream .rect-container")[0][1];e.tip.show("",t),n(".popover").addClass("fake")},2e3)},this.charts.fakeOilAttributes=new p,this.charts.fakeOilAttributes.createDataAndScales=function(){this.margin={top:0,right:0,bottom:20,left:20},this.width=this.width-this.margin.left-this.margin.right,this.height=this.height-this.margin.top-this.margin.bottom,this.data=c.oilAttributes;var t=e.addExtentBuffer(l.max(this.data,function(e){return e.x}));this.x=l.scale.linear().domain([0,t]).range([0,this.width]);var a=e.addExtentBuffer([60,120]);this.y=l.scale.linear().domain(a).range([this.height,0]);var i=e.addExtentBuffer(l.extent(this.data,function(e){return e.p}));this.r=l.scale.sqrt().domain(i).range([4,42])},this.charts.fakeOilAttributes.draw=function(){this.svg=this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");var e=this,t=this.svg.selectAll("circle").data(this.data);t.enter().append("circle").attr("fill",function(e){return d.categoryColorForType(e.type)}).attr("opacity",.8).attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.g)}).attr("r",function(e){return 0});var a=l.svg.axis().scale(this.x).orient("bottom").ticks(5);this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+(this.height+8)+")").call(a),this.xProperty="waterToOilRatio",n(this.el).next().html(d.getDatasetName(this.xProperty))},this.charts.fakeOilAttributes.animate=function(){var e=this,t=this.svg.selectAll("circle").data(this.data),a=750,i=1250;t.transition().duration(a).attr("r",function(t){return e.r(t.p)}).transition().delay(i+a).duration(a).attr("cx",function(t){return e.x(t.xAlt)}),setTimeout(function(){n(e.el).next().fadeOut(0),n(e.el).next().html(d.getDatasetName("gasToOilRatio")).fadeIn(a)},a+i)},this.charts.oilDetails=new p,this.charts.oilDetails.init=function(e){this.el=e,this.animated=!1},this.charts.oilDetails.create=function(){n(this.el).removeClass("shown")},this.charts.oilDetails.animate=function(){n(this.el).addClass("shown")},this.render()},render:function(){this.$el.html(this.template({blueBar:h()})),this._activateSearchBar(),this.charts.fakeMap.init("#map-preview"),this.charts.fakeProductionGraph.init("#production-graph-preview"),this.charts.fakeSupplyChain.init("#supply-chain-preview"),this.charts.fakeOilAttributes.init("#oil-attributes-preview"),this.charts.oilDetails.init("#oil-details"),this.addScrollListener()},_handleResize:function(){var e=this;l.select(".d3-tip").remove(),Object.keys(this.charts).forEach(function(t){e.charts[t].create(),e.charts[t].animated=!1})},addExtentBuffer:function(e){var t=.1;return"object"===("undefined"==typeof e?"undefined":r(e))?(e[0]=e[0]*(1-t),e[1]=e[1]*(1+t)):e*=1+t,e},addScrollListener:function(){n(window).on("scroll.custom",this.handleScroll.bind(this))},handleScroll:function(){var e=this,t=n(window).scrollTop();Object.keys(e.charts).filter(function(t){return!e.charts[t].animated}).forEach(function(a){var i=n(e.charts[a].el).offset().top;i-300<t&&(e.charts[a].animate(),e.charts[a].animated=!0)})}});t.exports=f},{"../animation-mock-data":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/animation-mock-data.js","../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/homepage.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/homepage.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js",d3:"d3","d3-tip":"d3-tip",jquery:"jquery","lodash/map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/map.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/mapview.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/max"),o=i(s),r=e("lodash/sortBy"),n=i(r),l=e("lodash/maxBy"),d=i(l),c=e("lodash/minBy"),u=i(c),h=e("lodash/forEach"),m=i(h),p=e("jquery"),f=e("d3");e("d3-tip");var g=e("../utils"),b=e("../templates/mapview.ejs"),v=e("../templates/bluebar.ejs"),y=e("./baseview");e("mapbox.js");var w=e("turf-centroid"),_=y.extend({template:b,el:".content",events:{"change #year-select":"handleYearChange","click .world-zoom":"worldZoom","click .zoom-field":"handleZoomToField"},initialize:function(){var e=this;this.hasShareLinkBeenParsed=!1,this.SWITCH_FROM_MARKERS_TO_POLYGONS_AT_ZOOM=6;var t=[];(0,m["default"])(Oci.data.info,function(e){t.push(e)}),this.range=[Number((0,u["default"])(t,function(e){return Number(e["Total Emissions"])})["Total Emissions"]),Number((0,d["default"])(t,function(e){return Number(e["Total Emissions"])})["Total Emissions"])],this.shareParams=[{name:"yearSelect",input:"year-select"}],this._windowSizing(),this.render(),this.fillColor="#ddd",this.radiusRange=[5,35],this.radiusScale=f.scale.sqrt().domain(this.range).range(this.radiusRange);var a=L.latLng(-90,-250),i=L.latLng(90,250),s=L.latLngBounds(a,i);L.mapbox.accessToken="pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q",this.flaringLayers={2012:L.mapbox.tileLayer("carnegiecomms.9c2f044c"),2013:L.mapbox.tileLayer("carnegiecomms.9e285c3e"),2014:L.mapbox.tileLayer("carnegiecomms.1d1c0ebe"),off:null};var o=L.mapbox.map("map","carnegiecomms.34955fec",{zoomControl:!1,scrollWheelZoom:!1,maxBounds:s,maxZoom:18}).addLayer(this.flaringLayers[2014]).setView([30,0],2);new L.Control.Zoom({position:"bottomright"}).addTo(o),this.map=o,this.markers=[];var r=[];t.forEach(function(t){var a=g.getOilfield(t.Unique);if(a){var i=w(a),s=Number(t["Total Emissions"]),o=g.numberWithCommas(t["Total Emissions"]),n=g.createTooltipHtml(t.Unique,t["Overall Crude Category"],[{name:"GHG Emissions",value:o,units:g.getUnits("ghgTotal","perBarrel")}],g.makeId(t.Unique),"",t["Absolute Emissions Icons"],"",!0,g.getDataQuality(t.Unique).total),l={closeButton:!1},d=L.circleMarker(i.geometry.coordinates.reverse(),{radius:e.radiusScale(s),stroke:!0,weight:.75,color:"#222",fillColor:e.fillColor,fillOpacity:.2,className:g.makeId(t.Unique)}).bindPopup(n,l).on({mouseover:function(){d.setStyle({color:"white",weight:1.5})},mouseout:function(){d.setStyle({color:"#222",weight:.75})}});e.markers.push(d),g.makeId(t.Unique).indexOf("us-bakken")>-1&&(n=e.makeBakkenTooltip());var c=L.geoJson(a,{fillColor:"#FFF",fillOpacity:.2,color:"white",weight:2.5,className:g.makeId(t.Unique)}).bindPopup(n,l).on({mouseover:function(){c.setStyle({weight:4,fillOpacity:0})},mouseout:function(){c.setStyle({weight:2.5,fillOpacity:.3})}});r.push(c)}}),(0,n["default"])(e.markers,function(e){return e._radius*-1}).forEach(function(e){o.addLayer(e)}),o.on("zoomend",function(){o.getZoom()>e.SWITCH_FROM_MARKERS_TO_POLYGONS_AT_ZOOM?(e.markers.forEach(function(e){o.removeLayer(e)}),r.forEach(function(e){o.addLayer(e)})):(e.markers.forEach(function(e){o.addLayer(e)}),r.forEach(function(e){o.removeLayer(e)}))}),r.forEach(function(e){o.addLayer(e)});var l=f.select(".leaflet-overlay-pane svg");l.selectAll("path").on("dblclick",function(){var t=f.event.target.classList[0];e.handleZoomToField(null,t)}),r.forEach(function(e){o.removeLayer(e)}),this.createLegend(),this._parseURLAndSetState(),this.handleYearChange(),this.hasShareLinkBeenParsed=!0},render:function(){this.$el.html(this.template({blueBar:v()})),this._setupShare(),this._activateSearchBar()},createLegend:function(){var e=this,t=10,a=180,i=230,s=f.select("#bubble-legend").append("svg").attr("width",a+t+t).attr("height",i+t+t).append("g").attr("transform","translate("+t+","+t+")"),r=[900,700,500],n=[0,33,72],l="Total Emissions",d=g.getUnits("ghgTotal","perBarrel"),c=r.map(function(t){return e.radiusScale(t)}),u=(0,o["default"])(c),h=50,m=c.map(function(e){return h+(u-e)}),p=80;s.selectAll(".circle-legend").data(r).enter().append("circle").classed("circle-legend",!0).attr("fill-opacity","0").attr("stroke","#777").attr("cx",p).attr("cy",function(e,t){return m[t]}).attr("r",function(e,t){return c[t]}),s.selectAll(".circle-legend").data(r).attr("cx",p).attr("cy",function(e,t){return m[t]}).attr("r",function(e,t){return c[t]}),s.selectAll(".circle-text").data(r).enter().append("text").attr("class","circle-text").attr("x",p).attr("y",function(e,t){return n[t]}).attr("text-anchor","middle").style("fill","#fff").text(function(e,t){return r[t]}),s.append("text").attr("x",p).attr("y",116).attr("text-anchor","middle").attr("class","circle-text, legend-name").style("fill","#fff").text(l),s.append("text").attr("x",p).attr("y",132).attr("text-anchor","middle").attr("class","circle-text, legend-units").style("fill","#fff").text(d);var b=[-50,-25,0,25,50],v=180,y=["0+","1+","2+","3+","4+"],w=199,_=3,x=["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20"],j="Annual Flaring",C="million m³";s.selectAll(".dot-legend").data(y).enter().append("circle").classed("dot-legend",!0).attr("cx",function(e,t){return p+b[t]}).attr("cy",v).attr("r",_).attr("fill",function(e,t){return x[t]}),s.selectAll(".dot-text").data(y).enter().append("text").attr("class","dot-text").attr("x",function(e,t){return p+b[t]+3}).attr("y",w).attr("text-anchor","middle").style("fill","#fff").text(function(e,t){return e}),s.append("text").attr("x",p).attr("y",220).attr("text-anchor","middle").attr("class","dot-label, legend-name").style("fill","#fff").text(j),s.append("text").attr("x",p).attr("y",233).attr("text-anchor","middle").attr("class","dot-label, legend-units").style("fill","#fff").text(C)},handleZoomToField:function(e,t){e&&(t=e.currentTarget.classList[4]);var a;for(var i in Oci.data.info)if(g.makeId(i)===t){a=Oci.data.info[i];break}var s=g.getOilfield(a.Unique),o=w(s);this.map.setView(o.geometry.coordinates.reverse(),this.SWITCH_FROM_MARKERS_TO_POLYGONS_AT_ZOOM+2)},worldZoom:function(){this.map.setView([30,0],2)},handleYearChange:function(){var e=this;(0,m["default"])(this.flaringLayers,function(t,a){e.map.hasLayer(t)&&e.map.removeLayer(t)});var t=p("[name=year-select]:checked").val(),a=this.flaringLayers[t];a&&this.map.addLayer(a),this._updateCopyLink()},makeBakkenTooltip:function(e){var t=[];for(var a in Oci.data.info)g.makeId(a).indexOf("us-bakken")>-1&&t.push(Oci.data.info[a]);var i=[];t.forEach(function(e){var t=g.numberWithCommas(e["Total Emissions"]),a=g.createTooltipHtml(e.Unique,e["Overall Crude Category"],[{name:"GHG Emissions",value:t,units:g.getUnits("ghgTotal","perBarrel")}],g.makeId(e.Unique),"",e["Absolute Emissions Icons"],"",!0);i.push(a)});var s="",o=i[0].match(/^<div.+?><div.+?>/g)[0];return i.forEach(function(e){var t=p.parseHTML(e)[0].innerHTML;t=p.parseHTML(t)[0].innerHTML,s+=t}),s=o+s+"</div></div>"}});t.exports=_},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/mapview.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/mapview.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js",d3:"d3","d3-tip":"d3-tip",jquery:"jquery","lodash/forEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forEach.js","lodash/max":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/max.js","lodash/maxBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/maxBy.js","lodash/minBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/minBy.js","lodash/sortBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/sortBy.js","mapbox.js":"mapbox.js","turf-centroid":"turf-centroid"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/methodology.js":[function(e,t,a){"use strict";var i=e("jquery"),s=e("../utils"),o=e("../templates/methodology.ejs"),r=e("../templates/bluebar.ejs"),n=e("./baseview"),l=n.extend({template:o,el:".content",events:{"click .same-page-nav":"navigateWithinPage"},initialize:function(e){this._windowSizing(),this.render(e.scrollTo),i(window).on("scroll.custom",this.checkDataControlsPosition.bind(this))},render:function(e){this.$el.html(this.template({blueBar:r()})),this._activateSearchBar(),this.wrapperOffset=i(".doc-nav").offset(),this.checkDataControlsPosition(),e&&s.scrollToElementWithID(e)},checkDataControlsPosition:function(){var e=i(".doc-nav");if(e.length){var t=i("#methodology-view"),a=t.height(),s=a+t.offset().top;i(window).scrollTop()+90>=this.wrapperOffset.top?(e.addClass("sticky"),e.removeClass("bottom")):e.removeClass("sticky"),e.offset().top+e.height()>s?(e.addClass("bottom"),e.removeClass("sticky")):e.removeClass("bottom")}},navigateWithinPage:function(e){e.preventDefault();var t=e.currentTarget.href.split("#methodology/")[1];s.scrollToElementWithID(t)}});t.exports=l},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/methodology.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/methodology.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js",jquery:"jquery"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/modelparameters.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s,o,r,n,l,d,c,u,h,m,p,f=e("lodash/zipObject"),g=i(f),b=e("backbone"),v=e("d3"),y=e("jquery"),w=e("nouislider"),_=e("../templates/modelparameters.ejs"),x=b.View.extend({template:_,el:"#model-parameters",events:{"click .toggle":"toggleModelParameters","change input":"updateSummary","change .slider":"updateSummary","change select":"updateSummary"},initialize:function(){s=this,this.setSliders()},render:function(){this.$el.html(this.template()),this.addSliders(),this.updateSummary(),this.listenTo(this,"sliderUpdate",this.updateSummary)},getModelValues:function(){return{solarSteam:this.solarSteamSlider.get()/100,water:this.waterSlider.get()/100,flaring:this.flaringSlider.get()/100,year:this.yearSlider.get()/100,showCoke:this.cokeSlider.get()/100,refinery:y("#dropdown-refinery").val(),lpg:y("#toggle-lpg").is(":checked")}},setModelParameters:function(e){if(e.opgee)try{var t=e.opgee[3],a=e.opgee[4],i=e.opgee[5],o=e.opgee[6],r=100*parseFloat(Oci.data.metadata.solarSteam.split(",")[t]);this.solarSteamSlider.set(r);var n=100*parseFloat(Oci.data.metadata.water.split(",")[a]);this.waterSlider.set(n);var l=100*parseFloat(Oci.data.metadata.flare.split(",")[i]);this.flaringSlider.set(l);var d=parseFloat(Oci.data.metadata.year.split(",")[o]);this.yearSlider.set(d)}catch(c){console.warn("bad input parameter",c)}if(e.prelim)try{var u=e.prelim[3],h=e.prelim[4];y("#dropdown-refinery").prop("selectedIndex",u),y("#toggle-lpg").attr("checked",Boolean(h))}catch(c){console.warn("bad input parameter",c)}void 0!==e.showCoke&&this.cokeSlider.set(100*Number(e.showCoke)),s.updateSummary()},updateSummary:function(){var e=parseInt(this.solarSteamSlider.get());y(".value.solar-steam span").html(e+"%");var t=parseInt(this.flaringSlider.get());y(".value.flare span").html(t+"%");var a=parseInt(this.waterSlider.get());y(".value.water span").html(a+"%");var i=parseInt(this.yearSlider.get());y(".value.year span").html(i);var s=parseInt(this.cokeSlider.get());y(".value.petcoke span").html(s+"%");var o=y("#toggle-lpg").is(":checked")?"Sell":"Use";y(".value.lpg span").html(o);var r=y("#dropdown-refinery").val();switch(r){case"0 = Default":r="Default";break;case"1 = Hydroskimming":r="Hydro";break;case"2 = Medium Conversion":r="Medium";break;case"3 = Deep Conversion (Coking)":r="Deep Coke";break;case"4 = Deep Conversion (Hydrotreating)":r="Deep Hydro"}y(".value.refinery span").html(r)},addSliders:function(){var e=this;this.solarSteamSlider=w.create(y("#slider-solar-steam")[0],{start:0,connect:"lower",snap:!0,range:(0,g["default"])(r,o),pips:{mode:"values",values:o,density:10,format:wNumb({postfix:"%"}),stepped:!0}}),this.solarSteamSlider.on("update",function(t){e.trigger("sliderUpdate",t)}),this.flaringSlider=w.create(y("#slider-flaring")[0],{start:100,connect:"lower",snap:!0,range:(0,g["default"])(l,n),pips:{mode:"values",values:n,density:10,format:wNumb({postfix:"%"}),stepped:!0}}),this.flaringSlider.on("update",function(t){e.trigger("sliderUpdate",t)}),this.waterSlider=w.create(y("#slider-water")[0],{start:100,connect:"lower",snap:!0,range:(0,g["default"])(c,d),pips:{mode:"values",values:d,density:10,format:wNumb({postfix:"%"}),stepped:!0}}),this.waterSlider.on("update",function(t){e.trigger("sliderUpdate",t)}),this.yearSlider=w.create(y("#slider-year")[0],{start:2014,connect:"lower",snap:!0,range:(0,g["default"])(h,u),pips:{mode:"values",values:u,density:10,format:wNumb({toFixed:"10"}),stepped:!0}}),this.yearSlider.on("update",function(t){e.trigger("sliderUpdate",t)}),this.cokeSlider=w.create(y("#slider-coke")[0],{start:100,connect:"lower",snap:!0,range:(0,g["default"])(p,m),pips:{mode:"values",values:m,density:10,format:wNumb({postfix:"%"}),stepped:!0}}),this.cokeSlider.on("update",function(t){e.trigger("sliderUpdate",t)})},toggleModelParameters:function(e){e.preventDefault(),y("#model-parameters").toggleClass("open")},setSliders:function(){var e=Oci.data.metadata;o=this.metadataToArray(e.solarSteam),n=this.metadataToArray(e.flare),d=this.metadataToArray(e.water),u=this.metadataToArray(e.year),m=[0,50,100],r=this.sliderHelper(o),l=this.sliderHelper(n),c=this.sliderHelper(d),h=this.sliderHelperYear(u),p=this.sliderHelper(m)},sliderHelper:function(e){var t=v.min(e),a=v.max(e),i=e.map(function(e){return((e-t)/((a-t)/100)).toFixed(0)+"%"});return i[0]="min",i[i.length-1]="max",i},sliderHelperYear:function(e){var t=v.min(e),a=v.max(e),i=e.map(function(e){return((e-t)/((a-t)/100)).toFixed(5)});return i[0]="min",i[i.length-1]="max",i},metadataToArray:function(e){return e.split(",").sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return 100*Number(e)})}});t.exports=x},{"../templates/modelparameters.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/modelparameters.ejs",backbone:"backbone",d3:"d3",jquery:"jquery","lodash/zipObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/zipObject.js",nouislider:"nouislider"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/models.js":[function(e,t,a){"use strict";var i=e("../templates/models.ejs"),s=e("../templates/bluebar.ejs"),o=e("./baseview"),r=o.extend({template:i,el:".content",events:{},initialize:function(){this._windowSizing(),this.render()},render:function(){this.$el.html(this.template({blueBar:s()})),this._activateSearchBar()}});t.exports=r},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/models.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/models.ejs","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/oildetails.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/forEach"),o=i(s),r=e("lodash/every"),n=i(r);e("mapbox.js");var l=e("d3"),d=e("jquery"),c=e("turf-centroid"),u=e("../utils"),h=e("../templates/oildetails.ejs"),m=e("./modelparameters"),p=e("./baseview"),f=e("../models/opgee"),g=e("../models/prelim"),b=p.extend({
template:h,el:".content",events:{"change #toggle-lpg":"handleParametersChange","change .config-dropdown":"handleDropdown","click #oil-details-share":"handleShare","click .carosel-arrow":"handleCarosel","click .compare":"openCompare"},initialize:function(e){var t=this;this.margin={top:0,right:60,bottom:0,left:0},this.height=75-this.margin.top-this.margin.bottom,this.barBuffer=2,this.hasShareLinkBeenParsed=!1,this.chartElement="#oil-details";for(var a in Oci.data.info)if(u.makeId(a)===e.oil){this.oilKey=a;break}this.oilKey||console.warn("Unable to find key for oil id"),this.tip=l.tip().attr("class","d3-tip").html(function(e,a){for(var i=u.getUnits("ghgTotal","perBarrel"),s="",o=e.components[t.getStepName(a)],r=0;r<o.length;r++){s+='<dt style="width:80%;">'+o[r].name+"</dt>";var n=Number(o[r].value);n=Math.abs(n)<1?n.toFixed(1):n.toFixed(0),s+='<dd style="width:20%;">'+n+"</dd>"}return'<div class="popover in popover-compare"><div class="popover-inner"><div class="popover-header clearfix"><dl class="stats-list"><dt>'+t.getStepName(a)+' emissions<small class="units">'+i+"</small></dt><dd>"+t.dataForSvg(a,e).toFixed(0)+'</dd></dl></div><div class="popover-body"><dl class="stats-list">'+s+"</dl></div></div></div>"}).offset(function(e,a){return t.dataForSvg(a,e)<.3*t.xScale.domain()[1]?[0,25]:[-10,0]}).direction(function(e,a){return t.dataForSvg(a,e)<.3*t.xScale.domain()[1]?"e":"n"}),this.oil=u.generateOilInfo(this.oilKey),this.render()},render:function(){var e=this;this.$el.html(this.template({utils:u,oil:this.oil,totalUnits:u.getUnits("ghgTotal","perBarrel"),description:(Oci.blurbs[this.oilKey]||{}).description,icons:Oci.data.info[this.oilKey]["Absolute Emissions Icons"],suggestedOils:Oci.relatedOils[this.oilKey]||[],relatedOils:Oci.relatedOils[this.oilKey]&&Oci.relatedOils[this.oilKey].map(function(e){var t=Oci.data.info[e];return t?u.createTooltipHtml(t.Unique,t["Overall Crude Category"],[{name:"GHG Emissions",value:u.numberWithCommas(t["Total Emissions"]),units:u.getUnits("ghgTotal","perBarrel")},{name:"Current Production",value:u.numberWithCommas(t["Oil Production Volume"]),units:u.getUnits("productionVolume")},{name:"Estimated GHG Emission Rate",value:u.numberWithCommas(Number(t["Total Emissions"])*Number(t["Oil Production Volume"])*365/1e9),units:u.getUnits("emissionRate")}],u.makeId(t.Unique),"",t["Absolute Emissions Icons"]):""})||[]})),this.modelParametersView=new m,this.$("#model-parameters").html(this.modelParametersView.render()),this.listenTo(this.modelParametersView,"sliderUpdate",this.handleParametersChange),d("#dropdown-refinery").prop("selectedIndex",u.refineryNameToDropdown(Oci.data.info[this.oilKey]["Default Refinery"])),d('#dropdown-refinery option[value="0 = Default"]').hide(),Oci.data.metadata.refinery.split(", ").forEach(function(t,a){Number(Oci.data.info[e.oil.Unique]["Refinery exception"])===a&&d('#dropdown-refinery option[value="'+t+'"]').hide()}),this.defaultModelHeight=.5*(this.height-this.barBuffer),this.modelHeight=this.height-this.defaultModelHeight,this.width=d(".container-charts").width()-this.margin.left-this.margin.right,L.mapbox.accessToken="pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q";var t,a=L.mapbox.map("map","mapbox.light",{zoomControl:!1,keyboard:!1,tap:!1,dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1}),i=L.divIcon({html:"",iconSize:[24,24],iconAnchor:[12,12],className:"map-oil map-oil-main"}),s=u.getOilfield(this.oil.Unique);s&&(t=c(s),L.marker([t.geometry.coordinates[1],t.geometry.coordinates[0]],{icon:i,clickable:!1}).addTo(a),a.setView([t.geometry.coordinates[1],t.geometry.coordinates[0]],4)),this.chartInit(),this._setupShare(),this._activateSearchBar(),this.activateCompareSearchBar(),this._parseURLAndSetState(),this.handleParametersChange(),this.handleDropdown(),this.hasShareLinkBeenParsed=!0},getStepName:function(e){return e[0][0].parentNode.parentNode.id.split("-")[0]},updateSvg:function(e){var t=this;e.selectAll("rect").data(this.chartData).transition().duration(1e3).attr("width",function(a){return t.xScale(t.dataForSvg(e,a))});var a=0,i=this.chartData[1].components[t.getStepName(e)];e.selectAll(".component").data(i).transition().duration(1e3).attr("x",function(e){return a+=+e.value,t.xScale(a)});var s={upstream:(this.chartData[1].upstream-this.chartData[0].upstream)/this.chartData[0].upstream,midstream:(this.chartData[1].midstream-this.chartData[0].midstream)/this.chartData[0].midstream,downstream:(this.chartData[1].downstream-this.chartData[0].downstream)/this.chartData[0].downstream};e.selectAll(".diff-text").data([s]).text(function(a){var i=t.dataForSvg(e,a);return(i>0?"+":"-")+Math.abs(100*i).toFixed(0)+"%"}).classed("invisible",function(a){var i=t.dataForSvg(e,a);return Math.abs(i)<.01}).transition().duration(1e3).attr("x",function(a){return t.xScale(t.dataForSvg(e,t.chartData[1]))+12})},createChartData:function(){var e={info:Oci.data.info,opgee:Oci.Collections.opgee.get(u.getOPGEEModel("0","0","0","0")).toJSON(),prelim:Oci.Collections.prelim.get(u.getPRELIMModel("0 = Default",1)).toJSON()},t=this.modelParametersView.getModelValues(),a=u.getOPGEEModel(t.solarSteam,t.water,t.flaring,t.year),i=u.getPRELIMModel(t.refinery,t.lpg);if(!Oci.Collections.opgee.get(a)){var s=new f({id:a});s.fetch({async:!1,success:function(e){Oci.Collections.opgee.add(e)}})}if(!Oci.Collections.prelim.get(i)){var o=new g({id:i});o.fetch({async:!1,success:function(e){Oci.Collections.prelim.add(e)}})}var r={info:Oci.data.info,opgee:Oci.Collections.opgee.get(a).toJSON(),prelim:Oci.Collections.prelim.get(i).toJSON()};this.chartData=[u.generateOilObject(this.oilKey,e,!0,!0),u.generateOilObject(this.oilKey,r,t.showCoke,!1)]},dataForSvg:function(e,t){return e===this.upstreamSvg?t.upstream:e===this.downstreamSvg?t.downstream:e===this.midstreamSvg?t.midstream:void console.warn("oops!")},handleParametersChange:function(){this.createChartData(),d("#model-total").html(this.chartData[1].ghgTotal.toFixed(0));var e=(this.chartData[1].ghgTotal-this.chartData[0].ghgTotal)/this.chartData[0].ghgTotal,t="("+(e>0?"+":"-")+Math.abs(100*e).toFixed(0)+"%)";d("#diff").html(t),d("#diff").removeClass("invisible"),Math.abs(e)<.01&&d("#diff").addClass("invisible"),this.updateSvg(this.upstreamSvg),this.updateSvg(this.downstreamSvg),this.updateSvg(this.midstreamSvg),this._updateCopyLink()},createScales:function(){var e=this;this.xScale=l.scale.linear().domain([0,l.max(this.chartData,function(t){return l.max([u.getGlobalExtent("perBarrel","max","downstream",e.oilKey),u.getGlobalExtent("perBarrel","max","midstream",e.oilKey),u.getGlobalExtent("perBarrel","max","upstream",e.oilKey)])})]).range([0,e.width])},createData:function(e){var t=this;d("#model-total").html(this.chartData[1].ghgTotal.toFixed(0)),d("#default-total").html(this.chartData[0].ghgTotal.toFixed(0));var a=(this.chartData[1].ghgTotal-this.chartData[0].ghgTotal)/this.chartData[0].ghgTotal,i="("+(a>.01?"+":"")+(a<-.01?"-":"")+Math.abs(100*a).toFixed(0)+"%)";d("#diff").html(i),Math.abs(a)<.01&&d("#diff").addClass("invisible"),e.selectAll("rect").data(this.chartData).enter().append("rect").attr("x",function(){return t.xScale(0)}).attr("y",function(e){return e.isComparison?t.modelHeight+t.barBuffer:0}).attr("width",function(a){return t.xScale(t.dataForSvg(e,a))}).attr("height",function(e){return e.isComparison?t.defaultModelHeight:t.modelHeight}).attr("rx",2).attr("ry",2).attr("class",function(e){return e.isComparison?"default":"main"}).on("mouseover",function(a){!a.isComparison&&t.tip.show(a,e)}).on("mouseout",function(e){e.isComparison||(u.insideTooltip(l.event.clientX,l.event.clientY)?d(".d3-tip").on("mouseleave",function(){t.tip.hide()}):t.tip.hide())});var s=0,o=this.chartData[1].components[this.getStepName(e)],r=(0,n["default"])(o,function(e){return+e.value>=0});r&&e.selectAll(".component").data(o).enter().append("rect").attr("class","component").attr("pointer-events","none").attr("x",function(e){return s+=+e.value,t.xScale(s)}).attr("y",0).attr("width",t.xScale(.25)).attr("height",t.modelHeight).attr("rx",2).attr("ry",2).attr("fill","#fff");var c={upstream:(this.chartData[1].upstream-this.chartData[0].upstream)/this.chartData[0].upstream,midstream:(this.chartData[1].midstream-this.chartData[0].midstream)/this.chartData[0].midstream,downstream:(this.chartData[1].downstream-this.chartData[0].downstream)/this.chartData[0].downstream};e.selectAll(".diff-text").data([c]).enter().append("text").text(function(a){var i=t.dataForSvg(e,a);return(i>0?"+":"-")+Math.abs(100*i).toFixed(0)+"%"}).classed("invisible",function(a){var i=t.dataForSvg(e,a);return Math.abs(i)<.01}).attr("x",function(a){return t.xScale(t.dataForSvg(e,t.chartData[1]))+12}).attr("y",t.modelHeight/2+4).attr("class","diff-text")},chartInit:function(){var e=this.width,t=this.height,a=this.margin;this.upstreamSvg=l.select("#upstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.downstreamSvg=l.select("#downstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.midstreamSvg=l.select("#midstream-bar").append("svg").attr("width",e+a.left+a.right).attr("height",t+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),this.upstreamSvg.call(this.tip),this.midstreamSvg.call(this.tip),this.downstreamSvg.call(this.tip),this.createChartData(),this.createScales(),this.createData(this.upstreamSvg),this.createData(this.midstreamSvg),this.createData(this.downstreamSvg)},handleDropdown:function(){d(".config-dropdown").blur(),this.handleParametersChange()},_handleResize:function(){this.width=d(".container-charts").width()-this.margin.left-this.margin.right,l.select("#upstream-bar").html(""),l.select("#midstream-bar").html(""),l.select("#downstream-bar").html(""),this.chartInit()},handleShare:function(e){e.preventDefault()},handleCarosel:function(e){var t,a=d(e.currentTarget).hasClass("forward")?1:-1,i=d(e.currentTarget).parent().find(".carosel"),s=d(".carosel-arrow");[0,1,2,3,4].forEach(function(e){i.hasClass("offset-"+e)&&(t=e)}),i.removeClass("offset-"+t),s.removeClass("offset-"+t),i.addClass("offset-"+(Number(t)+a)),s.addClass("offset-"+(Number(t)+a))},openCompare:function(e){e.preventDefault(),e.stopPropagation();var t=d(e.currentTarget).parent().find(".dropdown-compare");t.toggleClass("open"),t.hasClass("open")&&t.find("input").focus()},activateCompareSearchBar:function(){var e=this,t=[];(0,o["default"])(Oci.data.info,function(e){t.push(e.Unique)}),t=t.concat(Oci.regions,Oci.types);var a=1;d(".dropdown-compare input").on("input",function(){var i=d(this).val(),s=new RegExp(i,"i"),o=t.filter(function(e){return i.length>=a&&e.search(s)>-1}),r=o.map(function(t){var a=u.makeId(t);return'<div class="search-result"><a href="#compare/'+u.makeId(e.oilKey)+"/"+a+'">'+t+"</a></div>"}).join("");d(this).parent().find(".search-results").html(r)}),d(".dropdown-compare input").focus(function(e){d(e.currentTarget).parent().find(".search-results").addClass("visible")}),d(".dropdown-compare input").blur(function(e){setTimeout(function(){d(e.currentTarget).parent().find(".search-results").removeClass("visible")},200)}),d("body").on("click.custom",function(){d(".dropdown-compare").removeClass("open")}),d(".dropdown-compare").on("click.custom",function(e){e.stopPropagation()}),d(".dropdown-compare input").on("keyup",function(e){e.preventDefault(),e.stopPropagation();var t,a,i,s=d(this).parent().find(".search-results"),o=d(this).parent().find(".search-result"),r=o.hasClass("active"),n=o.parent().find(".active");if(s.html())switch(e.keyCode){case 38:r?(n.removeClass("active"),t=n.prev(),t.length?(i=t.addClass("active"),i.position().top<0&&s.scrollTop(s.scrollTop()-i.outerHeight())):(o.last().addClass("active"),s.scrollTop(s[0].scrollHeight))):(o.last().addClass("active"),s.scrollTop(s[0].scrollHeight));break;case 40:r?(n.removeClass("active"),a=n.next(),a.length?(i=a.addClass("active"),i.position().top+i.outerHeight()>s.outerHeight()&&s.scrollTop(s.scrollTop()+i.outerHeight())):(o.first().addClass("active"),s.scrollTop(0))):o.first().addClass("active");break;case 13:o.hasClass("active")&&Oci.router.navigate(n.find("a").attr("href"),{trigger:!0})}})}});t.exports=b},{"../models/opgee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/opgee.js","../models/prelim":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/models/prelim.js","../templates/oildetails.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/oildetails.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js","./modelparameters":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/modelparameters.js",d3:"d3",jquery:"jquery","lodash/every":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/every.js","lodash/forEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forEach.js","mapbox.js":"mapbox.js","turf-centroid":"turf-centroid"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/prices.js":[function(e,t,a){"use strict";var i,s=e("backbone"),o=e("jquery"),r=e("../utils"),n=e("../templates/prices.ejs"),l=s.View.extend({template:n,el:"#modal-prices",events:{"click .apply":"handleApply","click [data-modal-dismiss]":"handleDismissClick","keyup .price-input":"verifyPrice","click .reset":"handleReset"},initialize:function(){i=this,this.render(),this.loadPrices()},render:function(){this.$el.html(this.template())},loadPrices:function(){for(var e in Oci.prices){var t='input[name="'+e+'"]';o(t).val(parseFloat(Oci.prices[e].currentPrice).toFixed(2))}},handleDismissClick:function(e){e.preventDefault(),Oci.showPricesModal(!1),i.loadPrices()},handleApply:function(e){e.preventDefault(),Oci.showPricesModal(!1);for(var t in Oci.prices){var a='input[name="'+t+'"]',i=o(a),s=parseFloat(i.val()).toFixed(2);i.val(s),Oci.prices[t].currentPrice=s}Oci.view.updatePrices&&Oci.view.updatePrices()},verifyPrice:function(e){var t=e.target,a=/^\d{0,5}(\.\d{0,2})?$/.test(t.value);if(!a){var i=t.value;i=i.replace(/[^\d.]/g,""),i=parseFloat(i).toFixed(2),(isNaN(i)||i.length>=9)&&(i=parseFloat(2).toFixed(2)),t.value=i}},handleReset:function(e){e.preventDefault(),Oci.prices=r.cloneObject(Oci.origPrices),i.loadPrices()}});t.exports=l},{"../templates/prices.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/prices.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js",backbone:"backbone",jquery:"jquery"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/supplycurve.js":[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("lodash/forOwn"),o=i(s),r=e("jquery"),n=e("d3"),l=e("d3-tip");l(n);var d=e("../utils"),c=e("../templates/supplycurve.ejs"),u=e("../templates/bluebar.ejs"),h=e("./baseview"),m=h.extend({template:c,el:".content",events:{"click .share":"handleShare","click .button-filter, .header-filter":"handleFilterHide",click:"hideFilterIfClickOutside","click #ratio-select":"handleRatioSelect","change #region-select":function(){this.handleFilter("region-select","Region")},"change #oiltype-select":function(){this.handleFilter("oiltype-select","Overall Crude Category")}},initialize:function(){var e=this;this.chartElement="#supply-curve",this.margin={top:38,right:8,bottom:72,left:84},this.aspectRatio=2.5,this.minProductionDisplayWidth=6e4,this.transitionDuration=1e3,this.filters={},this.hasShareLinkBeenParsed=!1,this.yProperty="perBarrel",this.shareParams=[{name:"ratioSelect",input:"ratio-select"},{name:"regionSelect",input:"region-select"},{name:"oiltypeSelect",input:"oiltype-select"}],this.tip=n.tip().attr("class","d3-tip").html(function(t){var a,i=d.numberWithCommas(t.ghgTotal),s=d.numberWithCommas(t.ghgPerMJ),o=d.numberWithCommas(t.productionVolume),r=d.numberWithCommas(t.ghgTotal*t.productionVolume*365/1e9);a="perBarrel"===e.yProperty?i:s;var n=[{name:"GHG Emissions",value:a,units:d.getUnits("ghgTotal",e.yProperty)},{name:"Current Production",value:o,units:d.getUnits("productionVolume")},{name:"Estimated GHG Emission Rate",value:r,units:d.getUnits("emissionRate")}],l="";return d.createTooltipHtml(t.name,t.type,n,t.id,l,Oci.data.info[t.name]["Absolute Emissions Icons"],!1,!1,d.getDataQuality(t.name).total)}).offset(function(t){if(e.xScale(t.x0)<.9*e.width){var a="perBarrel"===e.yProperty?"ghgTotal":"ghgPerMJ";return[-e.yScale(t[a])+(e.height-100),0]}return[0,-5]}).direction(function(t){return e.xScale(t.x0)<.9*e.width?"n":"w"}),this.render()},render:function(){this.$el.html(this.template({blueBar:u()}));var e=this.margin;this.width=r(this.chartElement).width()-e.left-e.right,this.height=Math.round(this.width/this.aspectRatio),this.chartInit(),this._setupShare(),this._activateSearchBar(),this._parseURLAndSetState(),this.handleRatioSelect(),this.handleFilter("region-select","Region"),this.handleFilter("oiltype-select","Overall Crude Category"),this.hasShareLinkBeenParsed=!0},formatStackedData:function(){var e,t=this;e="perBarrel"===t.yProperty?"ghgTotal":"ghgPerMJ",this.stackedTotal=0,this.dataset.sort(function(t,a){return t[e]-a[e]}),this.dataset.map(function(e,a,i){e.plotProductionVolume=e.productionVolume<t.minProductionDisplayWidth?t.minProductionDisplayWidth:e.productionVolume,0===a?e.x0=0:e.x0=i[a-1].x0+i[a-1].plotProductionVolume,t.stackedTotal+=i[a].plotProductionVolume})},buildDataset:function(e){var t=[];this.yMax=0;for(var a=Object.keys(e.info),i=0;i<a.length;i++){var s,r=e.info[a[i]],n=+r["Total Emissions"],l=Oci.Collections.prelim.get("run01").toJSON()[a[i]],c=d.getValueForRatio(n,"perMJ",l,0,r),u={id:d.makeId(r.Unique),name:d.prettyOilName(r),productionVolume:+r["Oil Production Volume"],ghgTotal:n,ghgPerMJ:c,type:r["Overall Crude Category"].trim(),category:r["Sulfur Category"],productionVolumeCategory:r["Production Volume"],country:r.Country,onshore:r["Onshore/Offshore"]};s="perBarrel"===this.yProperty?"ghgTotal":"ghgPerMJ",this.yMax=Math.max(this.yMax,u[s]);var h=!0;(0,o["default"])(this.filters,function(e,t){e.indexOf(r[t])===-1&&(h=!1)}),h&&t.push(u)}return t},createScales:function(e){"x"!==e&&"undefined"!=typeof e||(this.xScale=n.scale.linear().domain([0,this.stackedTotal]).range([0,this.width])),"y"!==e&&"undefined"!=typeof e||(this.yScale=n.scale.linear().domain([0,this.yMax]).range([this.height,0]).nice())},createAxes:function(){this.xAxis=n.svg.axis().scale(this.xScale).orient("bottom").ticks(10).tickFormat(function(e){return e/1e6}),this.yAxis=n.svg.axis().scale(this.yScale).orient("left").ticks(5),this.svg.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(this.yAxis),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+(this.height+4)+")").call(this.xAxis);var e=this.svg.append("g");e.append("text").attr("transform","translate("+this.width/2+","+(this.height+this.margin.bottom-25)+")").style("text-anchor","middle").attr("class","x axis title").text(d.getDatasetName("productionVolume")),e.append("text").attr("transform","translate("+this.width/2+","+(this.height+this.margin.bottom-5)+")").style("text-anchor","middle").attr("class","x axis title subtitle").text("Million barrels per day"),e=this.svg.append("g"),e.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left).attr("x",-(this.height/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title").text(d.getDatasetName("ghgTotal",this.yProperty)),e.append("text").attr("transform","rotate(-90)").attr("y",-this.margin.left+20).attr("x",-(this.height/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title subtitle").text(d.getUnits("ghgTotal",this.yProperty)),this.svg.append("text").attr("y",-20).attr("x",this.width/2).style("text-anchor","middle").attr("class","title main-title").text("Total Estimated GHG Emissions and Production Volumes for 75 OCI Test Oils")},updateAxes:function(e){var t=this;this[e+"Axis"].scale(this[e+"Scale"]),this.svg.select("."+e+".axis").transition().duration(this.transitionDuration).call(this[e+"Axis"]),"y"===e&&r(".y.axis.title").fadeOut(this.transitionDuration/2,function(){t.svg.select(".y.axis.title").text(d.getDatasetName("ghgTotal",t.yProperty)),t.svg.select(".y.axis.title.subtitle").text(d.getUnits("ghgTotal",t.yProperty)),r(this).fadeIn(t.transitionDuration/2)})},createData:function(){var e,t=this;e="perBarrel"===this.yProperty?"ghgTotal":"ghgPerMJ";var a=this.svg.selectAll("rect").data(this.dataset,function(e){return e.name});a.exit().transition().duration(this.transitionDuration/2).attr("opacity",0).remove(),a.transition().duration(this.transitionDuration).attr("x",function(e){return t.xScale(e.x0)}).attr("y",function(a){return t.yScale(a[e])}).attr("height",function(a){return t.height-t.yScale(a[e])}).attr("width",function(e){return t.xScale(e.plotProductionVolume)}).attr("opacity",.8),a.enter().append("rect").attr("x",function(e){return t.xScale(e.x0)}).attr("y",function(a){return t.yScale(a[e])}).attr("height",function(a){return t.height-t.yScale(a[e])}).attr("width",function(e){return t.xScale(e.plotProductionVolume)}).attr("fill",function(e){return d.categoryColorForType(e.type)}).attr("opacity",0).on("mouseover",function(e){t.tip.show(e)}).on("mouseout",function(){d.insideTooltip(n.event.clientX,n.event.clientY)?r(".d3-tip").on("mouseleave",function(){t.tip.hide()}):t.tip.hide()}).transition().duration(this.transitionDuration/2).delay(this.transitionDuration/2).attr("opacity",.8),0===this.dataset.length?r("#no-results-message").show():r("#no-results-message").hide()},chartInit:function(){var e=this.margin,t=this.width,a=this.height;this.svg=n.select("#supply-curve").append("svg").attr("width",t+e.left+e.right).attr("height",a+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),this.svg.call(this.tip),this.dataset=this.buildDataset(Oci.data),this.formatStackedData(),this.createScales(),this.createAxes(),this.createData()},updateChart:function(e){this.dataset=this.buildDataset(Oci.data),this.formatStackedData(),this.createScales(e),this.updateAxes(e),this.createData(),this._updateCopyLink()},handleShare:function(e){e.preventDefault()},handleRatioSelect:function(){for(var e,t=document.getElementsByName("ratio-select"),a=0;a<t.length;a++)if(t[a].checked){e=t[a].value,this.yProperty=e;break}this.updateChart("y")},handleFilter:function(e,t){for(var a=document.getElementsByName(e),i=[],s=0;s<a.length;s++){var o=a[s];o.checked&&i.push(o.value)}0===i.length?delete this.filters[t]:this.filters[t]=i,this.updateChart("x")},handleFilterHide:function(){r(".filter-hideable").toggleClass("filter-hidden")},hideFilterIfClickOutside:function(e){0!==r(e.target).closest(".filter-hideable").length||r(e.target).is(".button-filter")||r(".filter-hideable").addClass("filter-hidden")}});t.exports=m},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/supplycurve.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/supplycurve.ejs","../utils":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/utils.js","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js",d3:"d3","d3-tip":"d3-tip",jquery:"jquery","lodash/forOwn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forOwn.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/team.js":[function(e,t,a){"use strict";var i=e("../templates/team.ejs"),s=e("../templates/bluebar.ejs"),o=e("./baseview"),r=o.extend({template:i,el:".content",events:{},initialize:function(){this._windowSizing(),this.render()},render:function(){this.$el.html(this.template({blueBar:s()})),this._activateSearchBar()}});t.exports=r},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/team.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/team.ejs","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/termsofuse.js":[function(e,t,a){"use strict";var i=e("../templates/termsofuse.ejs"),s=e("../templates/bluebar.ejs"),o=e("./baseview"),r=o.extend({template:i,el:".content",events:{},initialize:function(){this._windowSizing(),this.render()},render:function(){this.$el.html(this.template({blueBar:s()})),this._activateSearchBar()}});t.exports=r},{"../templates/bluebar.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/bluebar.ejs","../templates/termsofuse.ejs":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/templates/termsofuse.ejs","./baseview":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/views/baseview.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/wnumb.js":[function(e,t,a){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){return e.split("").reverse().join("")}function t(e,t){return e.substring(0,t.length)===t}function a(e,t){return e.slice(-1*t.length)===t}function s(e,t,a){if((e[t]||e[a])&&e[t]===e[a])throw new Error(t)}function o(e){return"number"==typeof e&&isFinite(e)}function r(e,t){var a=Math.pow(10,t);return(Math.round(e*a)/a).toFixed(t)}function n(t,a,i,s,n,l,d,c,u,h,m,p){var f,g,b,v=p,y="",w="";return l&&(p=l(p)),!!o(p)&&(t!==!1&&0===parseFloat(p.toFixed(t))&&(p=0),p<0&&(f=!0,p=Math.abs(p)),t!==!1&&(p=r(p,t)),p=p.toString(),p.indexOf(".")!==-1?(g=p.split("."),b=g[0],i&&(y=i+g[1])):b=p,a&&(b=e(b).match(/.{1,3}/g),b=e(b.join(e(a)))),f&&c&&(w+=c),s&&(w+=s),f&&u&&(w+=u),w+=b,w+=y,n&&(w+=n),h&&(w=h(w,v)),w)}function l(e,i,s,r,n,l,d,c,u,h,m,p){var f,g="";return m&&(p=m(p)),!(!p||"string"!=typeof p)&&(c&&t(p,c)&&(p=p.replace(c,""),f=!0),r&&t(p,r)&&(p=p.replace(r,"")),u&&t(p,u)&&(p=p.replace(u,""),f=!0),n&&a(p,n)&&(p=p.slice(0,-1*n.length)),i&&(p=p.split(i).join("")),s&&(p=p.replace(s,".")),f&&(g+="-"),g+=p,g=g.replace(/[^0-9\.\-.]/g,""),""!==g&&(g=Number(g),d&&(g=d(g)),!!o(g)&&g))}function d(e){var t,a,i,o={};for(t=0;t<h.length;t+=1)if(a=h[t],i=e[a],void 0===i)"negative"!==a||o.negativeBefore?"mark"===a&&"."!==o.thousand?o[a]=".":o[a]=!1:o[a]="-";else if("decimals"===a){if(!(i>=0&&i<8))throw new Error(a);o[a]=i}else if("encoder"===a||"decoder"===a||"edit"===a||"undo"===a){if("function"!=typeof i)throw new Error(a);o[a]=i}else{if("string"!=typeof i)throw new Error(a);o[a]=i}return s(o,"mark","thousand"),s(o,"prefix","negative"),s(o,"prefix","negativeBefore"),o}function c(e,t,a){var i,s=[];for(i=0;i<h.length;i+=1)s.push(e[h[i]]);return s.push(a),t.apply("",s)}function u(e){return this instanceof u?void("object"===("undefined"==typeof e?"undefined":i(e))&&(e=d(e),this.to=function(t){return c(e,n,t)},this.from=function(t){return c(e,l,t)})):new u(e)}var h=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=u}()},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_DataView.js":[function(e,t,a){var i=e("./_getNative"),s=e("./_root"),o=i(s,"DataView");t.exports=o},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js","./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Hash.js":[function(e,t,a){function i(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var i=e[t];this.set(i[0],i[1])}}var s=e("./_hashClear"),o=e("./_hashDelete"),r=e("./_hashGet"),n=e("./_hashHas"),l=e("./_hashSet");i.prototype.clear=s,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=n,i.prototype.set=l,t.exports=i},{"./_hashClear":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashClear.js","./_hashDelete":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashDelete.js","./_hashGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashGet.js","./_hashHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashHas.js","./_hashSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashSet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_ListCache.js":[function(e,t,a){function i(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var i=e[t];this.set(i[0],i[1])}}var s=e("./_listCacheClear"),o=e("./_listCacheDelete"),r=e("./_listCacheGet"),n=e("./_listCacheHas"),l=e("./_listCacheSet");i.prototype.clear=s,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=n,i.prototype.set=l,t.exports=i},{"./_listCacheClear":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheClear.js","./_listCacheDelete":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheDelete.js","./_listCacheGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheGet.js","./_listCacheHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheHas.js","./_listCacheSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheSet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Map.js":[function(e,t,a){var i=e("./_getNative"),s=e("./_root"),o=i(s,"Map");t.exports=o},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js","./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_MapCache.js":[function(e,t,a){function i(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var i=e[t];this.set(i[0],i[1])}}var s=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),r=e("./_mapCacheGet"),n=e("./_mapCacheHas"),l=e("./_mapCacheSet");i.prototype.clear=s,i.prototype["delete"]=o,i.prototype.get=r,i.prototype.has=n,i.prototype.set=l,t.exports=i},{"./_mapCacheClear":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheClear.js","./_mapCacheDelete":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheDelete.js","./_mapCacheGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheGet.js","./_mapCacheHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheHas.js","./_mapCacheSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheSet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Promise.js":[function(e,t,a){var i=e("./_getNative"),s=e("./_root"),o=i(s,"Promise");t.exports=o},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js",
"./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Set.js":[function(e,t,a){var i=e("./_getNative"),s=e("./_root"),o=i(s,"Set");t.exports=o},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js","./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_SetCache.js":[function(e,t,a){function i(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new s;++t<a;)this.add(e[t])}var s=e("./_MapCache"),o=e("./_setCacheAdd"),r=e("./_setCacheHas");i.prototype.add=i.prototype.push=o,i.prototype.has=r,t.exports=i},{"./_MapCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_MapCache.js","./_setCacheAdd":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setCacheAdd.js","./_setCacheHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setCacheHas.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Stack.js":[function(e,t,a){function i(e){var t=this.__data__=new s(e);this.size=t.size}var s=e("./_ListCache"),o=e("./_stackClear"),r=e("./_stackDelete"),n=e("./_stackGet"),l=e("./_stackHas"),d=e("./_stackSet");i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=n,i.prototype.has=l,i.prototype.set=d,t.exports=i},{"./_ListCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_ListCache.js","./_stackClear":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackClear.js","./_stackDelete":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackDelete.js","./_stackGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackGet.js","./_stackHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackHas.js","./_stackSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackSet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js":[function(e,t,a){var i=e("./_root"),s=i.Symbol;t.exports=s},{"./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Uint8Array.js":[function(e,t,a){var i=e("./_root"),s=i.Uint8Array;t.exports=s},{"./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_WeakMap.js":[function(e,t,a){var i=e("./_getNative"),s=e("./_root"),o=i(s,"WeakMap");t.exports=o},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js","./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_apply.js":[function(e,t,a){function i(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayAggregator.js":[function(e,t,a){function i(e,t,a,i){for(var s=-1,o=null==e?0:e.length;++s<o;){var r=e[s];t(i,r,a(r),e)}return i}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayEach.js":[function(e,t,a){function i(e,t){for(var a=-1,i=null==e?0:e.length;++a<i&&t(e[a],a,e)!==!1;);return e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayEvery.js":[function(e,t,a){function i(e,t){for(var a=-1,i=null==e?0:e.length;++a<i;)if(!t(e[a],a,e))return!1;return!0}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayFilter.js":[function(e,t,a){function i(e,t){for(var a=-1,i=null==e?0:e.length,s=0,o=[];++a<i;){var r=e[a];t(r,a,e)&&(o[s++]=r)}return o}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayIncludes.js":[function(e,t,a){function i(e,t){var a=null==e?0:e.length;return!!a&&s(e,t,0)>-1}var s=e("./_baseIndexOf");t.exports=i},{"./_baseIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayIncludesWith.js":[function(e,t,a){function i(e,t,a){for(var i=-1,s=null==e?0:e.length;++i<s;)if(a(t,e[i]))return!0;return!1}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayLikeKeys.js":[function(e,t,a){function i(e,t){var a=r(e),i=!a&&o(e),c=!a&&!i&&n(e),h=!a&&!i&&!c&&d(e),m=a||i||c||h,p=m?s(e.length,String):[],f=p.length;for(var g in e)!t&&!u.call(e,g)||m&&("length"==g||c&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||l(g,f))||p.push(g);return p}var s=e("./_baseTimes"),o=e("./isArguments"),r=e("./isArray"),n=e("./isBuffer"),l=e("./_isIndex"),d=e("./isTypedArray"),c=Object.prototype,u=c.hasOwnProperty;t.exports=i},{"./_baseTimes":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseTimes.js","./_isIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIndex.js","./isArguments":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArguments.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./isBuffer":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isBuffer.js","./isTypedArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isTypedArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayMap.js":[function(e,t,a){function i(e,t){for(var a=-1,i=null==e?0:e.length,s=Array(i);++a<i;)s[a]=t(e[a],a,e);return s}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayPush.js":[function(e,t,a){function i(e,t){for(var a=-1,i=t.length,s=e.length;++a<i;)e[s+a]=t[a];return e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayReduce.js":[function(e,t,a){function i(e,t,a,i){var s=-1,o=null==e?0:e.length;for(i&&o&&(a=e[++s]);++s<o;)a=t(a,e[s],s,e);return a}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arraySome.js":[function(e,t,a){function i(e,t){for(var a=-1,i=null==e?0:e.length;++a<i;)if(t(e[a],a,e))return!0;return!1}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assignValue.js":[function(e,t,a){function i(e,t,a){var i=e[t];n.call(e,t)&&o(i,a)&&(void 0!==a||t in e)||s(e,t,a)}var s=e("./_baseAssignValue"),o=e("./eq"),r=Object.prototype,n=r.hasOwnProperty;t.exports=i},{"./_baseAssignValue":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseAssignValue.js","./eq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/eq.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assocIndexOf.js":[function(e,t,a){function i(e,t){for(var a=e.length;a--;)if(s(e[a][0],t))return a;return-1}var s=e("./eq");t.exports=i},{"./eq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/eq.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseAggregator.js":[function(e,t,a){function i(e,t,a,i){return s(e,function(e,s,o){t(i,e,a(e),o)}),i}var s=e("./_baseEach");t.exports=i},{"./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseAssignValue.js":[function(e,t,a){function i(e,t,a){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var s=e("./_defineProperty");t.exports=i},{"./_defineProperty":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_defineProperty.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js":[function(e,t,a){var i=e("./_baseForOwn"),s=e("./_createBaseEach"),o=s(i);t.exports=o},{"./_baseForOwn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseForOwn.js","./_createBaseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createBaseEach.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEvery.js":[function(e,t,a){function i(e,t){var a=!0;return s(e,function(e,i,s){return a=!!t(e,i,s)}),a}var s=e("./_baseEach");t.exports=i},{"./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseExtremum.js":[function(e,t,a){function i(e,t,a){for(var i=-1,o=e.length;++i<o;){var r=e[i],n=t(r);if(null!=n&&(void 0===l?n===n&&!s(n):a(n,l)))var l=n,d=r}return d}var s=e("./isSymbol");t.exports=i},{"./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFilter.js":[function(e,t,a){function i(e,t){var a=[];return s(e,function(e,i,s){t(e,i,s)&&a.push(e)}),a}var s=e("./_baseEach");t.exports=i},{"./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFindIndex.js":[function(e,t,a){function i(e,t,a,i){for(var s=e.length,o=a+(i?1:-1);i?o--:++o<s;)if(t(e[o],o,e))return o;return-1}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFlatten.js":[function(e,t,a){function i(e,t,a,r,n){var l=-1,d=e.length;for(a||(a=o),n||(n=[]);++l<d;){var c=e[l];t>0&&a(c)?t>1?i(c,t-1,a,r,n):s(n,c):r||(n[n.length]=c)}return n}var s=e("./_arrayPush"),o=e("./_isFlattenable");t.exports=i},{"./_arrayPush":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayPush.js","./_isFlattenable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isFlattenable.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFor.js":[function(e,t,a){var i=e("./_createBaseFor"),s=i();t.exports=s},{"./_createBaseFor":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createBaseFor.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseForOwn.js":[function(e,t,a){function i(e,t){return e&&s(e,t,o)}var s=e("./_baseFor"),o=e("./keys");t.exports=i},{"./_baseFor":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFor.js","./keys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGet.js":[function(e,t,a){function i(e,t){t=s(t,e);for(var a=0,i=t.length;null!=e&&a<i;)e=e[o(t[a++])];return a&&a==i?e:void 0}var s=e("./_castPath"),o=e("./_toKey");t.exports=i},{"./_castPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castPath.js","./_toKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetAllKeys.js":[function(e,t,a){function i(e,t,a){var i=t(e);return o(e)?i:s(i,a(e))}var s=e("./_arrayPush"),o=e("./isArray");t.exports=i},{"./_arrayPush":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayPush.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js":[function(e,t,a){function i(e){return null==e?void 0===e?l:n:d&&d in Object(e)?o(e):r(e)}var s=e("./_Symbol"),o=e("./_getRawTag"),r=e("./_objectToString"),n="[object Null]",l="[object Undefined]",d=s?s.toStringTag:void 0;t.exports=i},{"./_Symbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js","./_getRawTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getRawTag.js","./_objectToString":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_objectToString.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGt.js":[function(e,t,a){function i(e,t){return e>t}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseHasIn.js":[function(e,t,a){function i(e,t){return null!=e&&t in Object(e)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIndexOf.js":[function(e,t,a){function i(e,t,a){return t===t?r(e,t,a):s(e,o,a)}var s=e("./_baseFindIndex"),o=e("./_baseIsNaN"),r=e("./_strictIndexOf");t.exports=i},{"./_baseFindIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFindIndex.js","./_baseIsNaN":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsNaN.js","./_strictIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_strictIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsArguments.js":[function(e,t,a){function i(e){return o(e)&&s(e)==r}var s=e("./_baseGetTag"),o=e("./isObjectLike"),r="[object Arguments]";t.exports=i},{"./_baseGetTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js","./isObjectLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqual.js":[function(e,t,a){function i(e,t,a,r,n){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:s(e,t,a,r,i,n))}var s=e("./_baseIsEqualDeep"),o=e("./isObjectLike");t.exports=i},{"./_baseIsEqualDeep":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqualDeep.js","./isObjectLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqualDeep.js":[function(e,t,a){function i(e,t,a,i,g,v){var y=d(e),w=d(t),_=y?p:l(e),x=w?p:l(t);_=_==m?f:_,x=x==m?f:x;var j=_==f,C=x==f,k=_==x;if(k&&c(e)){if(!c(t))return!1;y=!0,j=!1}if(k&&!j)return v||(v=new s),y||u(e)?o(e,t,a,i,g,v):r(e,t,_,a,i,g,v);if(!(a&h)){var O=j&&b.call(e,"__wrapped__"),S=C&&b.call(t,"__wrapped__");if(O||S){var P=O?e.value():e,E=S?t.value():t;return v||(v=new s),g(P,E,a,i,v)}}return!!k&&(v||(v=new s),n(e,t,a,i,g,v))}var s=e("./_Stack"),o=e("./_equalArrays"),r=e("./_equalByTag"),n=e("./_equalObjects"),l=e("./_getTag"),d=e("./isArray"),c=e("./isBuffer"),u=e("./isTypedArray"),h=1,m="[object Arguments]",p="[object Array]",f="[object Object]",g=Object.prototype,b=g.hasOwnProperty;t.exports=i},{"./_Stack":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Stack.js","./_equalArrays":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalArrays.js","./_equalByTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalByTag.js","./_equalObjects":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalObjects.js","./_getTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getTag.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./isBuffer":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isBuffer.js","./isTypedArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isTypedArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsMatch.js":[function(e,t,a){function i(e,t,a,i){var l=a.length,d=l,c=!i;if(null==e)return!d;for(e=Object(e);l--;){var u=a[l];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++l<d;){u=a[l];var h=u[0],m=e[h],p=u[1];if(c&&u[2]){if(void 0===m&&!(h in e))return!1}else{var f=new s;if(i)var g=i(m,p,h,e,t,f);if(!(void 0===g?o(p,m,r|n,i,f):g))return!1}}return!0}var s=e("./_Stack"),o=e("./_baseIsEqual"),r=1,n=2;t.exports=i},{"./_Stack":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Stack.js","./_baseIsEqual":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqual.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsNaN.js":[function(e,t,a){function i(e){return e!==e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsNative.js":[function(e,t,a){function i(e){if(!r(e)||o(e))return!1;var t=s(e)?p:d;return t.test(n(e))}var s=e("./isFunction"),o=e("./_isMasked"),r=e("./isObject"),n=e("./_toSource"),l=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,m=u.hasOwnProperty,p=RegExp("^"+h.call(m).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{"./_isMasked":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isMasked.js","./_toSource":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toSource.js","./isFunction":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isFunction.js","./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsTypedArray.js":[function(e,t,a){function i(e){return r(e)&&o(e.length)&&!!A[s(e)]}var s=e("./_baseGetTag"),o=e("./isLength"),r=e("./isObjectLike"),n="[object Arguments]",l="[object Array]",d="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",m="[object Map]",p="[object Number]",f="[object Object]",g="[object RegExp]",b="[object Set]",v="[object String]",y="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",x="[object Float32Array]",j="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",E="[object Uint16Array]",I="[object Uint32Array]",A={};A[x]=A[j]=A[C]=A[k]=A[O]=A[S]=A[P]=A[E]=A[I]=!0,A[n]=A[l]=A[w]=A[d]=A[_]=A[c]=A[u]=A[h]=A[m]=A[p]=A[f]=A[g]=A[b]=A[v]=A[y]=!1,t.exports=i},{"./_baseGetTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js","./isLength":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isLength.js","./isObjectLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js":[function(e,t,a){function i(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?n(e)?o(e[0],e[1]):s(e):l(e)}var s=e("./_baseMatches"),o=e("./_baseMatchesProperty"),r=e("./identity"),n=e("./isArray"),l=e("./property");t.exports=i},{"./_baseMatches":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMatches.js","./_baseMatchesProperty":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMatchesProperty.js","./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./property":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/property.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseKeys.js":[function(e,t,a){function i(e){if(!s(e))return o(e);var t=[];for(var a in Object(e))n.call(e,a)&&"constructor"!=a&&t.push(a);return t}var s=e("./_isPrototype"),o=e("./_nativeKeys"),r=Object.prototype,n=r.hasOwnProperty;t.exports=i},{"./_isPrototype":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isPrototype.js","./_nativeKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeKeys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseKeysIn.js":[function(e,t,a){function i(e){if(!s(e))return r(e);var t=o(e),a=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&a.push(i);return a}var s=e("./isObject"),o=e("./_isPrototype"),r=e("./_nativeKeysIn"),n=Object.prototype,l=n.hasOwnProperty;t.exports=i},{"./_isPrototype":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isPrototype.js","./_nativeKeysIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeKeysIn.js","./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseLt.js":[function(e,t,a){function i(e,t){return e<t}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMap.js":[function(e,t,a){function i(e,t){var a=-1,i=o(e)?Array(e.length):[];return s(e,function(e,s,o){i[++a]=t(e,s,o)}),i}var s=e("./_baseEach"),o=e("./isArrayLike");t.exports=i},{"./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js","./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMatches.js":[function(e,t,a){function i(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(a){return a===e||s(a,e,t)}}var s=e("./_baseIsMatch"),o=e("./_getMatchData"),r=e("./_matchesStrictComparable");t.exports=i},{"./_baseIsMatch":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsMatch.js","./_getMatchData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMatchData.js","./_matchesStrictComparable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_matchesStrictComparable.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMatchesProperty.js":[function(e,t,a){function i(e,t){return n(e)&&l(t)?d(c(e),t):function(a){var i=o(a,e);return void 0===i&&i===t?r(a,e):s(t,i,u|h)}}var s=e("./_baseIsEqual"),o=e("./get"),r=e("./hasIn"),n=e("./_isKey"),l=e("./_isStrictComparable"),d=e("./_matchesStrictComparable"),c=e("./_toKey"),u=1,h=2;t.exports=i},{"./_baseIsEqual":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqual.js","./_isKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKey.js","./_isStrictComparable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isStrictComparable.js","./_matchesStrictComparable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_matchesStrictComparable.js","./_toKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js","./get":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/get.js","./hasIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/hasIn.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseOrderBy.js":[function(e,t,a){function i(e,t,a){var i=-1;t=s(t.length?t:[c],l(o));var u=r(e,function(e,a,o){var r=s(t,function(t){return t(e)});return{criteria:r,index:++i,value:e}});return n(u,function(e,t){return d(e,t,a)})}var s=e("./_arrayMap"),o=e("./_baseIteratee"),r=e("./_baseMap"),n=e("./_baseSortBy"),l=e("./_baseUnary"),d=e("./_compareMultiple"),c=e("./identity");t.exports=i},{"./_arrayMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayMap.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_baseMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMap.js","./_baseSortBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSortBy.js","./_baseUnary":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseUnary.js","./_compareMultiple":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_compareMultiple.js","./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_basePickBy.js":[function(e,t,a){function i(e,t,a){for(var i=-1,n=t.length,l={};++i<n;){var d=t[i],c=s(e,d);a(c,d)&&o(l,r(d,e),c)}return l}var s=e("./_baseGet"),o=e("./_baseSet"),r=e("./_castPath");t.exports=i},{"./_baseGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGet.js","./_baseSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSet.js","./_castPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castPath.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseProperty.js":[function(e,t,a){function i(e){return function(t){return null==t?void 0:t[e]}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_basePropertyDeep.js":[function(e,t,a){function i(e){return function(t){return s(t,e)}}var s=e("./_baseGet");t.exports=i},{"./_baseGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseReduce.js":[function(e,t,a){function i(e,t,a,i,s){return s(e,function(e,s,o){a=i?(i=!1,e):t(a,e,s,o)}),a}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseRest.js":[function(e,t,a){function i(e,t){return r(o(e,t,s),e+"")}var s=e("./identity"),o=e("./_overRest"),r=e("./_setToString");t.exports=i},{"./_overRest":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_overRest.js","./_setToString":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToString.js","./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSet.js":[function(e,t,a){function i(e,t,a,i){if(!n(e))return e;t=o(t,e);for(var d=-1,c=t.length,u=c-1,h=e;null!=h&&++d<c;){var m=l(t[d]),p=a;if(d!=u){var f=h[m];p=i?i(f,m,h):void 0,void 0===p&&(p=n(f)?f:r(t[d+1])?[]:{})}s(h,m,p),h=h[m]}return e}var s=e("./_assignValue"),o=e("./_castPath"),r=e("./_isIndex"),n=e("./isObject"),l=e("./_toKey");t.exports=i},{"./_assignValue":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assignValue.js","./_castPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castPath.js","./_isIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIndex.js","./_toKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js","./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSetToString.js":[function(e,t,a){var i=e("./constant"),s=e("./_defineProperty"),o=e("./identity"),r=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:o;t.exports=r},{"./_defineProperty":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_defineProperty.js","./constant":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/constant.js","./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSortBy.js":[function(e,t,a){function i(e,t){var a=e.length;for(e.sort(t);a--;)e[a]=e[a].value;return e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseTimes.js":[function(e,t,a){function i(e,t){for(var a=-1,i=Array(e);++a<e;)i[a]=t(a);return i}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseToString.js":[function(e,t,a){function i(e){if("string"==typeof e)return e;if(r(e))return o(e,i)+"";if(n(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var s=e("./_Symbol"),o=e("./_arrayMap"),r=e("./isArray"),n=e("./isSymbol"),l=1/0,d=s?s.prototype:void 0,c=d?d.toString:void 0;t.exports=i},{"./_Symbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js","./_arrayMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayMap.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseUnary.js":[function(e,t,a){function i(e){return function(t){return e(t)}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseUniq.js":[function(e,t,a){function i(e,t,a){var i=-1,u=o,h=e.length,m=!0,p=[],f=p;if(a)m=!1,u=r;else if(h>=c){var g=t?null:l(e);if(g)return d(g);m=!1,u=n,f=new s}else f=t?[]:p;e:for(;++i<h;){var b=e[i],v=t?t(b):b;if(b=a||0!==b?b:0,m&&v===v){for(var y=f.length;y--;)if(f[y]===v)continue e;t&&f.push(v),p.push(b)}else u(f,v,a)||(f!==p&&f.push(v),p.push(b))}return p}var s=e("./_SetCache"),o=e("./_arrayIncludes"),r=e("./_arrayIncludesWith"),n=e("./_cacheHas"),l=e("./_createSet"),d=e("./_setToArray"),c=200;t.exports=i},{"./_SetCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_SetCache.js","./_arrayIncludes":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayIncludes.js","./_arrayIncludesWith":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayIncludesWith.js","./_cacheHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_cacheHas.js","./_createSet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createSet.js","./_setToArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToArray.js"
}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseZipObject.js":[function(e,t,a){function i(e,t,a){for(var i=-1,s=e.length,o=t.length,r={};++i<s;){var n=i<o?t[i]:void 0;a(r,e[i],n)}return r}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_cacheHas.js":[function(e,t,a){function i(e,t){return e.has(t)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castFunction.js":[function(e,t,a){function i(e){return"function"==typeof e?e:s}var s=e("./identity");t.exports=i},{"./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castPath.js":[function(e,t,a){function i(e,t){return s(e)?e:o(e,t)?[e]:r(n(e))}var s=e("./isArray"),o=e("./_isKey"),r=e("./_stringToPath"),n=e("./toString");t.exports=i},{"./_isKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKey.js","./_stringToPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stringToPath.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./toString":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toString.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_compareAscending.js":[function(e,t,a){function i(e,t){if(e!==t){var a=void 0!==e,i=null===e,o=e===e,r=s(e),n=void 0!==t,l=null===t,d=t===t,c=s(t);if(!l&&!c&&!r&&e>t||r&&n&&d&&!l&&!c||i&&n&&d||!a&&d||!o)return 1;if(!i&&!r&&!c&&e<t||c&&a&&o&&!i&&!r||l&&a&&o||!n&&o||!d)return-1}return 0}var s=e("./isSymbol");t.exports=i},{"./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_compareMultiple.js":[function(e,t,a){function i(e,t,a){for(var i=-1,o=e.criteria,r=t.criteria,n=o.length,l=a.length;++i<n;){var d=s(o[i],r[i]);if(d){if(i>=l)return d;var c=a[i];return d*("desc"==c?-1:1)}}return e.index-t.index}var s=e("./_compareAscending");t.exports=i},{"./_compareAscending":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_compareAscending.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_coreJsData.js":[function(e,t,a){var i=e("./_root"),s=i["__core-js_shared__"];t.exports=s},{"./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createAggregator.js":[function(e,t,a){function i(e,t){return function(a,i){var l=n(a)?s:o,d=t?t():{};return l(a,e,r(i,2),d)}}var s=e("./_arrayAggregator"),o=e("./_baseAggregator"),r=e("./_baseIteratee"),n=e("./isArray");t.exports=i},{"./_arrayAggregator":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayAggregator.js","./_baseAggregator":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseAggregator.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createBaseEach.js":[function(e,t,a){function i(e,t){return function(a,i){if(null==a)return a;if(!s(a))return e(a,i);for(var o=a.length,r=t?o:-1,n=Object(a);(t?r--:++r<o)&&i(n[r],r,n)!==!1;);return a}}var s=e("./isArrayLike");t.exports=i},{"./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createBaseFor.js":[function(e,t,a){function i(e){return function(t,a,i){for(var s=-1,o=Object(t),r=i(t),n=r.length;n--;){var l=r[e?n:++s];if(a(o[l],l,o)===!1)break}return t}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createFind.js":[function(e,t,a){function i(e){return function(t,a,i){var n=Object(t);if(!o(t)){var l=s(a,3);t=r(t),a=function(e){return l(n[e],e,n)}}var d=e(t,a,i);return d>-1?n[l?t[d]:d]:void 0}}var s=e("./_baseIteratee"),o=e("./isArrayLike"),r=e("./keys");t.exports=i},{"./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js","./keys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createSet.js":[function(e,t,a){var i=e("./_Set"),s=e("./noop"),o=e("./_setToArray"),r=1/0,n=i&&1/o(new i([,-0]))[1]==r?function(e){return new i(e)}:s;t.exports=n},{"./_Set":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Set.js","./_setToArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToArray.js","./noop":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/noop.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_defineProperty.js":[function(e,t,a){var i=e("./_getNative"),s=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.exports=s},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalArrays.js":[function(e,t,a){function i(e,t,a,i,d,c){var u=a&n,h=e.length,m=t.length;if(h!=m&&!(u&&m>h))return!1;var p=c.get(e);if(p&&c.get(t))return p==t;var f=-1,g=!0,b=a&l?new s:void 0;for(c.set(e,t),c.set(t,e);++f<h;){var v=e[f],y=t[f];if(i)var w=u?i(y,v,f,t,e,c):i(v,y,f,e,t,c);if(void 0!==w){if(w)continue;g=!1;break}if(b){if(!o(t,function(e,t){if(!r(b,t)&&(v===e||d(v,e,a,i,c)))return b.push(t)})){g=!1;break}}else if(v!==y&&!d(v,y,a,i,c)){g=!1;break}}return c["delete"](e),c["delete"](t),g}var s=e("./_SetCache"),o=e("./_arraySome"),r=e("./_cacheHas"),n=1,l=2;t.exports=i},{"./_SetCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_SetCache.js","./_arraySome":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arraySome.js","./_cacheHas":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_cacheHas.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalByTag.js":[function(e,t,a){function i(e,t,a,i,s,j,k){switch(a){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!j(new o(e),new o(t)));case h:case m:case g:return r(+e,+t);case p:return e.name==t.name&&e.message==t.message;case b:case y:return e==t+"";case f:var O=l;case v:var S=i&c;if(O||(O=d),e.size!=t.size&&!S)return!1;var P=k.get(e);if(P)return P==t;i|=u,k.set(e,t);var E=n(O(e),O(t),i,s,j,k);return k["delete"](e),E;case w:if(C)return C.call(e)==C.call(t)}return!1}var s=e("./_Symbol"),o=e("./_Uint8Array"),r=e("./eq"),n=e("./_equalArrays"),l=e("./_mapToArray"),d=e("./_setToArray"),c=1,u=2,h="[object Boolean]",m="[object Date]",p="[object Error]",f="[object Map]",g="[object Number]",b="[object RegExp]",v="[object Set]",y="[object String]",w="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",j=s?s.prototype:void 0,C=j?j.valueOf:void 0;t.exports=i},{"./_Symbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js","./_Uint8Array":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Uint8Array.js","./_equalArrays":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalArrays.js","./_mapToArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapToArray.js","./_setToArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToArray.js","./eq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/eq.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_equalObjects.js":[function(e,t,a){function i(e,t,a,i,r,l){var d=a&o,c=s(e),u=c.length,h=s(t),m=h.length;if(u!=m&&!d)return!1;for(var p=u;p--;){var f=c[p];if(!(d?f in t:n.call(t,f)))return!1}var g=l.get(e);if(g&&l.get(t))return g==t;var b=!0;l.set(e,t),l.set(t,e);for(var v=d;++p<u;){f=c[p];var y=e[f],w=t[f];if(i)var _=d?i(w,y,f,t,e,l):i(y,w,f,e,t,l);if(!(void 0===_?y===w||r(y,w,a,i,l):_)){b=!1;break}v||(v="constructor"==f)}if(b&&!v){var x=e.constructor,j=t.constructor;x!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j)&&(b=!1)}return l["delete"](e),l["delete"](t),b}var s=e("./_getAllKeys"),o=1,r=Object.prototype,n=r.hasOwnProperty;t.exports=i},{"./_getAllKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getAllKeys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_freeGlobal.js":[function(e,t,a){(function(e){var a="object"==typeof e&&e&&e.Object===Object&&e;t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getAllKeys.js":[function(e,t,a){function i(e){return s(e,r,o)}var s=e("./_baseGetAllKeys"),o=e("./_getSymbols"),r=e("./keys");t.exports=i},{"./_baseGetAllKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetAllKeys.js","./_getSymbols":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getSymbols.js","./keys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getAllKeysIn.js":[function(e,t,a){function i(e){return s(e,r,o)}var s=e("./_baseGetAllKeys"),o=e("./_getSymbolsIn"),r=e("./keysIn");t.exports=i},{"./_baseGetAllKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetAllKeys.js","./_getSymbolsIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getSymbolsIn.js","./keysIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keysIn.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMapData.js":[function(e,t,a){function i(e,t){var a=e.__data__;return s(t)?a["string"==typeof t?"string":"hash"]:a.map}var s=e("./_isKeyable");t.exports=i},{"./_isKeyable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKeyable.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMatchData.js":[function(e,t,a){function i(e){for(var t=o(e),a=t.length;a--;){var i=t[a],r=e[i];t[a]=[i,r,s(r)]}return t}var s=e("./_isStrictComparable"),o=e("./keys");t.exports=i},{"./_isStrictComparable":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isStrictComparable.js","./keys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keys.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js":[function(e,t,a){function i(e,t){var a=o(e,t);return s(a)?a:void 0}var s=e("./_baseIsNative"),o=e("./_getValue");t.exports=i},{"./_baseIsNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsNative.js","./_getValue":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getValue.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getPrototype.js":[function(e,t,a){var i=e("./_overArg"),s=i(Object.getPrototypeOf,Object);t.exports=s},{"./_overArg":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_overArg.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getRawTag.js":[function(e,t,a){function i(e){var t=r.call(e,l),a=e[l];try{e[l]=void 0;var i=!0}catch(s){}var o=n.call(e);return i&&(t?e[l]=a:delete e[l]),o}var s=e("./_Symbol"),o=Object.prototype,r=o.hasOwnProperty,n=o.toString,l=s?s.toStringTag:void 0;t.exports=i},{"./_Symbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getSymbols.js":[function(e,t,a){var i=e("./_arrayFilter"),s=e("./stubArray"),o=Object.prototype,r=o.propertyIsEnumerable,n=Object.getOwnPropertySymbols,l=n?function(e){return null==e?[]:(e=Object(e),i(n(e),function(t){return r.call(e,t)}))}:s;t.exports=l},{"./_arrayFilter":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayFilter.js","./stubArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/stubArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getSymbolsIn.js":[function(e,t,a){var i=e("./_arrayPush"),s=e("./_getPrototype"),o=e("./_getSymbols"),r=e("./stubArray"),n=Object.getOwnPropertySymbols,l=n?function(e){for(var t=[];e;)i(t,o(e)),e=s(e);return t}:r;t.exports=l},{"./_arrayPush":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayPush.js","./_getPrototype":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getPrototype.js","./_getSymbols":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getSymbols.js","./stubArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/stubArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getTag.js":[function(e,t,a){var i=e("./_DataView"),s=e("./_Map"),o=e("./_Promise"),r=e("./_Set"),n=e("./_WeakMap"),l=e("./_baseGetTag"),d=e("./_toSource"),c="[object Map]",u="[object Object]",h="[object Promise]",m="[object Set]",p="[object WeakMap]",f="[object DataView]",g=d(i),b=d(s),v=d(o),y=d(r),w=d(n),_=l;(i&&_(new i(new ArrayBuffer(1)))!=f||s&&_(new s)!=c||o&&_(o.resolve())!=h||r&&_(new r)!=m||n&&_(new n)!=p)&&(_=function(e){var t=l(e),a=t==u?e.constructor:void 0,i=a?d(a):"";if(i)switch(i){case g:return f;case b:return c;case v:return h;case y:return m;case w:return p}return t}),t.exports=_},{"./_DataView":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_DataView.js","./_Map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Map.js","./_Promise":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Promise.js","./_Set":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Set.js","./_WeakMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_WeakMap.js","./_baseGetTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js","./_toSource":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toSource.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getValue.js":[function(e,t,a){function i(e,t){return null==e?void 0:e[t]}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hasPath.js":[function(e,t,a){function i(e,t,a){t=s(t,e);for(var i=-1,c=t.length,u=!1;++i<c;){var h=d(t[i]);if(!(u=null!=e&&a(e,h)))break;e=e[h]}return u||++i!=c?u:(c=null==e?0:e.length,!!c&&l(c)&&n(h,c)&&(r(e)||o(e)))}var s=e("./_castPath"),o=e("./isArguments"),r=e("./isArray"),n=e("./_isIndex"),l=e("./isLength"),d=e("./_toKey");t.exports=i},{"./_castPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castPath.js","./_isIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIndex.js","./_toKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js","./isArguments":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArguments.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./isLength":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isLength.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashClear.js":[function(e,t,a){function i(){this.__data__=s?s(null):{},this.size=0}var s=e("./_nativeCreate");t.exports=i},{"./_nativeCreate":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeCreate.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashDelete.js":[function(e,t,a){function i(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashGet.js":[function(e,t,a){function i(e){var t=this.__data__;if(s){var a=t[e];return a===o?void 0:a}return n.call(t,e)?t[e]:void 0}var s=e("./_nativeCreate"),o="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;t.exports=i},{"./_nativeCreate":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeCreate.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashHas.js":[function(e,t,a){function i(e){var t=this.__data__;return s?void 0!==t[e]:r.call(t,e)}var s=e("./_nativeCreate"),o=Object.prototype,r=o.hasOwnProperty;t.exports=i},{"./_nativeCreate":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeCreate.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hashSet.js":[function(e,t,a){function i(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=s&&void 0===t?o:t,this}var s=e("./_nativeCreate"),o="__lodash_hash_undefined__";t.exports=i},{"./_nativeCreate":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeCreate.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isFlattenable.js":[function(e,t,a){function i(e){return r(e)||o(e)||!!(n&&e&&e[n])}var s=e("./_Symbol"),o=e("./isArguments"),r=e("./isArray"),n=s?s.isConcatSpreadable:void 0;t.exports=i},{"./_Symbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Symbol.js","./isArguments":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArguments.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIndex.js":[function(e,t,a){function i(e,t){return t=null==t?s:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var s=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIterateeCall.js":[function(e,t,a){function i(e,t,a){if(!n(a))return!1;var i=typeof t;return!!("number"==i?o(a)&&r(t,a.length):"string"==i&&t in a)&&s(a[t],e)}var s=e("./eq"),o=e("./isArrayLike"),r=e("./_isIndex"),n=e("./isObject");t.exports=i},{"./_isIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIndex.js","./eq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/eq.js","./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js","./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKey.js":[function(e,t,a){function i(e,t){if(s(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!o(e))||(n.test(e)||!r.test(e)||null!=t&&e in Object(t))}var s=e("./isArray"),o=e("./isSymbol"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;t.exports=i},{"./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js","./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKeyable.js":[function(e,t,a){function i(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isMasked.js":[function(e,t,a){function i(e){return!!o&&o in e}var s=e("./_coreJsData"),o=function(){var e=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=i},{"./_coreJsData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_coreJsData.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isPrototype.js":[function(e,t,a){function i(e){var t=e&&e.constructor,a="function"==typeof t&&t.prototype||s;return e===a}var s=Object.prototype;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isStrictComparable.js":[function(e,t,a){function i(e){return e===e&&!s(e)}var s=e("./isObject");t.exports=i},{"./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheClear.js":[function(e,t,a){function i(){this.__data__=[],this.size=0}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheDelete.js":[function(e,t,a){function i(e){var t=this.__data__,a=s(t,e);if(a<0)return!1;var i=t.length-1;return a==i?t.pop():r.call(t,a,1),--this.size,!0}var s=e("./_assocIndexOf"),o=Array.prototype,r=o.splice;t.exports=i},{"./_assocIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assocIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheGet.js":[function(e,t,a){function i(e){var t=this.__data__,a=s(t,e);return a<0?void 0:t[a][1]}var s=e("./_assocIndexOf");t.exports=i},{"./_assocIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assocIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheHas.js":[function(e,t,a){function i(e){return s(this.__data__,e)>-1}var s=e("./_assocIndexOf");t.exports=i},{"./_assocIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assocIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_listCacheSet.js":[function(e,t,a){function i(e,t){var a=this.__data__,i=s(a,e);return i<0?(++this.size,a.push([e,t])):a[i][1]=t,this}var s=e("./_assocIndexOf");t.exports=i},{"./_assocIndexOf":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assocIndexOf.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheClear.js":[function(e,t,a){function i(){this.size=0,this.__data__={hash:new s,map:new(r||o),string:new s}}var s=e("./_Hash"),o=e("./_ListCache"),r=e("./_Map");t.exports=i},{"./_Hash":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Hash.js","./_ListCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_ListCache.js","./_Map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Map.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheDelete.js":[function(e,t,a){function i(e){var t=s(this,e)["delete"](e);return this.size-=t?1:0,t}var s=e("./_getMapData");t.exports=i},{"./_getMapData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMapData.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheGet.js":[function(e,t,a){function i(e){return s(this,e).get(e)}var s=e("./_getMapData");t.exports=i},{"./_getMapData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMapData.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheHas.js":[function(e,t,a){function i(e){return s(this,e).has(e)}var s=e("./_getMapData");t.exports=i},{"./_getMapData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMapData.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapCacheSet.js":[function(e,t,a){function i(e,t){var a=s(this,e),i=a.size;return a.set(e,t),this.size+=a.size==i?0:1,this}var s=e("./_getMapData");t.exports=i},{"./_getMapData":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getMapData.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_mapToArray.js":[function(e,t,a){function i(e){var t=-1,a=Array(e.size);return e.forEach(function(e,i){a[++t]=[i,e]}),a}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_matchesStrictComparable.js":[function(e,t,a){function i(e,t){return function(a){return null!=a&&(a[e]===t&&(void 0!==t||e in Object(a)))}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_memoizeCapped.js":[function(e,t,a){function i(e){var t=s(e,function(e){return a.size===o&&a.clear(),e}),a=t.cache;return t}var s=e("./memoize"),o=500;t.exports=i},{"./memoize":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/memoize.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeCreate.js":[function(e,t,a){var i=e("./_getNative"),s=i(Object,"create");t.exports=s},{"./_getNative":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getNative.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeKeys.js":[function(e,t,a){var i=e("./_overArg"),s=i(Object.keys,Object);t.exports=s},{"./_overArg":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_overArg.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nativeKeysIn.js":[function(e,t,a){function i(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nodeUtil.js":[function(e,t,a){var i=e("./_freeGlobal"),s="object"==typeof a&&a&&!a.nodeType&&a,o=s&&"object"==typeof t&&t&&!t.nodeType&&t,r=o&&o.exports===s,n=r&&i.process,l=function(){try{return n&&n.binding&&n.binding("util")}catch(e){}}();t.exports=l},{"./_freeGlobal":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_freeGlobal.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_objectToString.js":[function(e,t,a){function i(e){return o.call(e)}var s=Object.prototype,o=s.toString;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_overArg.js":[function(e,t,a){function i(e,t){return function(a){return e(t(a))}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_overRest.js":[function(e,t,a){function i(e,t,a){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,n=o(i.length-t,0),l=Array(n);++r<n;)l[r]=i[t+r];r=-1;for(var d=Array(t+1);++r<t;)d[r]=i[r];return d[t]=a(l),s(e,this,d)}}var s=e("./_apply"),o=Math.max;t.exports=i},{"./_apply":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_apply.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js":[function(e,t,a){var i=e("./_freeGlobal"),s="object"==typeof self&&self&&self.Object===Object&&self,o=i||s||Function("return this")();t.exports=o},{"./_freeGlobal":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_freeGlobal.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setCacheAdd.js":[function(e,t,a){function i(e){return this.__data__.set(e,s),this}var s="__lodash_hash_undefined__";t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setCacheHas.js":[function(e,t,a){function i(e){return this.__data__.has(e)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToArray.js":[function(e,t,a){function i(e){var t=-1,a=Array(e.size);return e.forEach(function(e){a[++t]=e}),a}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_setToString.js":[function(e,t,a){var i=e("./_baseSetToString"),s=e("./_shortOut"),o=s(i);t.exports=o},{"./_baseSetToString":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseSetToString.js","./_shortOut":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_shortOut.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_shortOut.js":[function(e,t,a){function i(e){var t=0,a=0;return function(){var i=r(),n=o-(i-a);if(a=i,n>0){if(++t>=s)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var s=800,o=16,r=Date.now;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackClear.js":[function(e,t,a){function i(){this.__data__=new s,this.size=0}var s=e("./_ListCache");t.exports=i},{"./_ListCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_ListCache.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackDelete.js":[function(e,t,a){function i(e){var t=this.__data__,a=t["delete"](e);return this.size=t.size,a}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackGet.js":[function(e,t,a){function i(e){return this.__data__.get(e)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackHas.js":[function(e,t,a){function i(e){return this.__data__.has(e)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stackSet.js":[function(e,t,a){function i(e,t){var a=this.__data__;if(a instanceof s){var i=a.__data__;if(!o||i.length<n-1)return i.push([e,t]),this.size=++a.size,this;a=this.__data__=new r(i)}return a.set(e,t),this.size=a.size,this}var s=e("./_ListCache"),o=e("./_Map"),r=e("./_MapCache"),n=200;t.exports=i},{"./_ListCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_ListCache.js","./_Map":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_Map.js","./_MapCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_MapCache.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_strictIndexOf.js":[function(e,t,a){function i(e,t,a){for(var i=a-1,s=e.length;++i<s;)if(e[i]===t)return i;return-1}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_stringToPath.js":[function(e,t,a){
var i=e("./_memoizeCapped"),s=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=i(function(e){var t=[];return s.test(e)&&t.push(""),e.replace(o,function(e,a,i,s){t.push(i?s.replace(r,"$1"):a||e)}),t});t.exports=n},{"./_memoizeCapped":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_memoizeCapped.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js":[function(e,t,a){function i(e){if("string"==typeof e||s(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var s=e("./isSymbol"),o=1/0;t.exports=i},{"./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toSource.js":[function(e,t,a){function i(e){if(null!=e){try{return o.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var s=Function.prototype,o=s.toString;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/constant.js":[function(e,t,a){function i(e){return function(){return e}}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/each.js":[function(e,t,a){t.exports=e("./forEach")},{"./forEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forEach.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/eq.js":[function(e,t,a){function i(e,t){return e===t||e!==e&&t!==t}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/every.js":[function(e,t,a){function i(e,t,a){var i=n(e)?s:o;return a&&l(e,t,a)&&(t=void 0),i(e,r(t,3))}var s=e("./_arrayEvery"),o=e("./_baseEvery"),r=e("./_baseIteratee"),n=e("./isArray"),l=e("./_isIterateeCall");t.exports=i},{"./_arrayEvery":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayEvery.js","./_baseEvery":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEvery.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_isIterateeCall":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIterateeCall.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/filter.js":[function(e,t,a){function i(e,t){var a=n(e)?s:o;return a(e,r(t,3))}var s=e("./_arrayFilter"),o=e("./_baseFilter"),r=e("./_baseIteratee"),n=e("./isArray");t.exports=i},{"./_arrayFilter":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayFilter.js","./_baseFilter":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFilter.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/find.js":[function(e,t,a){var i=e("./_createFind"),s=e("./findIndex"),o=i(s);t.exports=o},{"./_createFind":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createFind.js","./findIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/findIndex.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/findIndex.js":[function(e,t,a){function i(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var l=null==a?0:r(a);return l<0&&(l=n(i+l,0)),s(e,o(t,3),l)}var s=e("./_baseFindIndex"),o=e("./_baseIteratee"),r=e("./toInteger"),n=Math.max;t.exports=i},{"./_baseFindIndex":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFindIndex.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./toInteger":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toInteger.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forEach.js":[function(e,t,a){function i(e,t){var a=n(e)?s:o;return a(e,r(t))}var s=e("./_arrayEach"),o=e("./_baseEach"),r=e("./_castFunction"),n=e("./isArray");t.exports=i},{"./_arrayEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayEach.js","./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js","./_castFunction":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castFunction.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/forOwn.js":[function(e,t,a){function i(e,t){return e&&s(e,o(t))}var s=e("./_baseForOwn"),o=e("./_castFunction");t.exports=i},{"./_baseForOwn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseForOwn.js","./_castFunction":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_castFunction.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/get.js":[function(e,t,a){function i(e,t,a){var i=null==e?void 0:s(e,t);return void 0===i?a:i}var s=e("./_baseGet");t.exports=i},{"./_baseGet":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGet.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/groupBy.js":[function(e,t,a){var i=e("./_baseAssignValue"),s=e("./_createAggregator"),o=Object.prototype,r=o.hasOwnProperty,n=s(function(e,t,a){r.call(e,a)?e[a].push(t):i(e,a,[t])});t.exports=n},{"./_baseAssignValue":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseAssignValue.js","./_createAggregator":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_createAggregator.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/hasIn.js":[function(e,t,a){function i(e,t){return null!=e&&o(e,t,s)}var s=e("./_baseHasIn"),o=e("./_hasPath");t.exports=i},{"./_baseHasIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseHasIn.js","./_hasPath":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_hasPath.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js":[function(e,t,a){function i(e){return e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArguments.js":[function(e,t,a){var i=e("./_baseIsArguments"),s=e("./isObjectLike"),o=Object.prototype,r=o.hasOwnProperty,n=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return s(e)&&r.call(e,"callee")&&!n.call(e,"callee")};t.exports=l},{"./_baseIsArguments":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsArguments.js","./isObjectLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js":[function(e,t,a){var i=Array.isArray;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js":[function(e,t,a){function i(e){return null!=e&&o(e.length)&&!s(e)}var s=e("./isFunction"),o=e("./isLength");t.exports=i},{"./isFunction":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isFunction.js","./isLength":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isLength.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isBuffer.js":[function(e,t,a){var i=e("./_root"),s=e("./stubFalse"),o="object"==typeof a&&a&&!a.nodeType&&a,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,n=r&&r.exports===o,l=n?i.Buffer:void 0,d=l?l.isBuffer:void 0,c=d||s;t.exports=c},{"./_root":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_root.js","./stubFalse":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/stubFalse.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isEqual.js":[function(e,t,a){function i(e,t){return s(e,t)}var s=e("./_baseIsEqual");t.exports=i},{"./_baseIsEqual":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsEqual.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isFunction.js":[function(e,t,a){function i(e){if(!o(e))return!1;var t=s(e);return t==n||t==l||t==r||t==d}var s=e("./_baseGetTag"),o=e("./isObject"),r="[object AsyncFunction]",n="[object Function]",l="[object GeneratorFunction]",d="[object Proxy]";t.exports=i},{"./_baseGetTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js","./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isLength.js":[function(e,t,a){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}var s=9007199254740991;t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js":[function(e,t,a){function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js":[function(e,t,a){function i(e){return null!=e&&"object"==typeof e}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js":[function(e,t,a){function i(e){return"symbol"==typeof e||o(e)&&s(e)==r}var s=e("./_baseGetTag"),o=e("./isObjectLike"),r="[object Symbol]";t.exports=i},{"./_baseGetTag":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGetTag.js","./isObjectLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObjectLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isTypedArray.js":[function(e,t,a){var i=e("./_baseIsTypedArray"),s=e("./_baseUnary"),o=e("./_nodeUtil"),r=o&&o.isTypedArray,n=r?s(r):i;t.exports=n},{"./_baseIsTypedArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIsTypedArray.js","./_baseUnary":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseUnary.js","./_nodeUtil":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_nodeUtil.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keys.js":[function(e,t,a){function i(e){return r(e)?s(e):o(e)}var s=e("./_arrayLikeKeys"),o=e("./_baseKeys"),r=e("./isArrayLike");t.exports=i},{"./_arrayLikeKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayLikeKeys.js","./_baseKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseKeys.js","./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/keysIn.js":[function(e,t,a){function i(e){return r(e)?s(e,!0):o(e)}var s=e("./_arrayLikeKeys"),o=e("./_baseKeysIn"),r=e("./isArrayLike");t.exports=i},{"./_arrayLikeKeys":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayLikeKeys.js","./_baseKeysIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseKeysIn.js","./isArrayLike":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArrayLike.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/map.js":[function(e,t,a){function i(e,t){var a=n(e)?s:r;return a(e,o(t,3))}var s=e("./_arrayMap"),o=e("./_baseIteratee"),r=e("./_baseMap"),n=e("./isArray");t.exports=i},{"./_arrayMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayMap.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_baseMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseMap.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/max.js":[function(e,t,a){function i(e){return e&&e.length?s(e,r,o):void 0}var s=e("./_baseExtremum"),o=e("./_baseGt"),r=e("./identity");t.exports=i},{"./_baseExtremum":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseExtremum.js","./_baseGt":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGt.js","./identity":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/identity.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/maxBy.js":[function(e,t,a){function i(e,t){return e&&e.length?s(e,r(t,2),o):void 0}var s=e("./_baseExtremum"),o=e("./_baseGt"),r=e("./_baseIteratee");t.exports=i},{"./_baseExtremum":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseExtremum.js","./_baseGt":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseGt.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/memoize.js":[function(e,t,a){function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var a=function(){var i=arguments,s=t?t.apply(this,i):i[0],o=a.cache;if(o.has(s))return o.get(s);var r=e.apply(this,i);return a.cache=o.set(s,r)||o,r};return a.cache=new(i.Cache||s),a}var s=e("./_MapCache"),o="Expected a function";i.Cache=s,t.exports=i},{"./_MapCache":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_MapCache.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/minBy.js":[function(e,t,a){function i(e,t){return e&&e.length?s(e,o(t,2),r):void 0}var s=e("./_baseExtremum"),o=e("./_baseIteratee"),r=e("./_baseLt");t.exports=i},{"./_baseExtremum":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseExtremum.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_baseLt":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseLt.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/noop.js":[function(e,t,a){function i(){}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/pickBy.js":[function(e,t,a){function i(e,t){if(null==e)return{};var a=s(n(e),function(e){return[e]});return t=o(t),r(e,a,function(e,a){return t(e,a[0])})}var s=e("./_arrayMap"),o=e("./_baseIteratee"),r=e("./_basePickBy"),n=e("./_getAllKeysIn");t.exports=i},{"./_arrayMap":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayMap.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_basePickBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_basePickBy.js","./_getAllKeysIn":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_getAllKeysIn.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/property.js":[function(e,t,a){function i(e){return r(e)?s(n(e)):o(e)}var s=e("./_baseProperty"),o=e("./_basePropertyDeep"),r=e("./_isKey"),n=e("./_toKey");t.exports=i},{"./_baseProperty":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseProperty.js","./_basePropertyDeep":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_basePropertyDeep.js","./_isKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isKey.js","./_toKey":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_toKey.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/reduce.js":[function(e,t,a){function i(e,t,a){var i=l(e)?s:n,d=arguments.length<3;return i(e,r(t,4),a,d,o)}var s=e("./_arrayReduce"),o=e("./_baseEach"),r=e("./_baseIteratee"),n=e("./_baseReduce"),l=e("./isArray");t.exports=i},{"./_arrayReduce":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_arrayReduce.js","./_baseEach":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseEach.js","./_baseIteratee":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseIteratee.js","./_baseReduce":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseReduce.js","./isArray":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isArray.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/sortBy.js":[function(e,t,a){var i=e("./_baseFlatten"),s=e("./_baseOrderBy"),o=e("./_baseRest"),r=e("./_isIterateeCall"),n=o(function(e,t){if(null==e)return[];var a=t.length;return a>1&&r(e,t[0],t[1])?t=[]:a>2&&r(t[0],t[1],t[2])&&(t=[t[0]]),s(e,i(t,1),[])});t.exports=n},{"./_baseFlatten":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseFlatten.js","./_baseOrderBy":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseOrderBy.js","./_baseRest":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseRest.js","./_isIterateeCall":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_isIterateeCall.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/stubArray.js":[function(e,t,a){function i(){return[]}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/stubFalse.js":[function(e,t,a){function i(){return!1}t.exports=i},{}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toFinite.js":[function(e,t,a){function i(e){if(!e)return 0===e?e:0;if(e=s(e),e===o||e===-o){var t=e<0?-1:1;return t*r}return e===e?e:0}var s=e("./toNumber"),o=1/0,r=1.7976931348623157e308;t.exports=i},{"./toNumber":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toNumber.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toInteger.js":[function(e,t,a){function i(e){var t=s(e),a=t%1;return t===t?a?t-a:t:0}var s=e("./toFinite");t.exports=i},{"./toFinite":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toFinite.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toNumber.js":[function(e,t,a){function i(e){if("number"==typeof e)return e;if(o(e))return r;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=d.test(e);return a||c.test(e)?u(e.slice(2),a?2:8):l.test(e)?r:+e}var s=e("./isObject"),o=e("./isSymbol"),r=NaN,n=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=i},{"./isObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isObject.js","./isSymbol":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/isSymbol.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/toString.js":[function(e,t,a){function i(e){return null==e?"":s(e)}var s=e("./_baseToString");t.exports=i},{"./_baseToString":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseToString.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/uniq.js":[function(e,t,a){function i(e){return e&&e.length?s(e):[]}var s=e("./_baseUniq");t.exports=i},{"./_baseUniq":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseUniq.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/zipObject.js":[function(e,t,a){function i(e,t){return o(e||[],t||[],s)}var s=e("./_assignValue"),o=e("./_baseZipObject");t.exports=i},{"./_assignValue":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_assignValue.js","./_baseZipObject":"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/lodash/_baseZipObject.js"}],"/home/travis/build/carnegieendowment/oci-sandbox-timeseries/node_modules/underscore/underscore.js":[function(e,t,a){(function(){function e(e){function t(t,a,i,s,o,r){for(;o>=0&&o<r;o+=e){var n=s?s[o]:o;i=a(i,t[n],n,t)}return i}return function(a,i,s,o){i=_(i,o,4);var r=!P(a)&&w.keys(a),n=(r||a).length,l=e>0?0:n-1;return arguments.length<3&&(s=a[r?r[l]:l],l+=e),t(a,i,s,r,l,n)}}function i(e){return function(t,a,i){a=x(a,i);for(var s=S(t),o=e>0?0:s-1;o>=0&&o<s;o+=e)if(a(t[o],o,t))return o;return-1}}function s(e,t,a){return function(i,s,o){var r=0,n=S(i);if("number"==typeof o)e>0?r=o>=0?o:Math.max(o+n,r):n=o>=0?Math.min(o+1,n):o+n+1;else if(a&&o&&n)return o=a(i,s),i[o]===s?o:-1;if(s!==s)return o=t(h.call(i,r,n),w.isNaN),o>=0?o+r:-1;for(o=e>0?r:n-1;o>=0&&o<n;o+=e)if(i[o]===s)return o;return-1}}function o(e,t){var a=D.length,i=e.constructor,s=w.isFunction(i)&&i.prototype||d,o="constructor";for(w.has(e,o)&&!w.contains(t,o)&&t.push(o);a--;)o=D[a],o in e&&e[o]!==s[o]&&!w.contains(t,o)&&t.push(o)}var r=this,n=r._,l=Array.prototype,d=Object.prototype,c=Function.prototype,u=l.push,h=l.slice,m=d.toString,p=d.hasOwnProperty,f=Array.isArray,g=Object.keys,b=c.bind,v=Object.create,y=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};"undefined"!=typeof a?("undefined"!=typeof t&&t.exports&&(a=t.exports=w),a._=w):r._=w,w.VERSION="1.8.3";var _=function(e,t,a){if(void 0===t)return e;switch(null==a?3:a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,i){return e.call(t,a,i)};case 3:return function(a,i,s){return e.call(t,a,i,s)};case 4:return function(a,i,s,o){return e.call(t,a,i,s,o)}}return function(){return e.apply(t,arguments)}},x=function(e,t,a){return null==e?w.identity:w.isFunction(e)?_(e,t,a):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return x(e,t,1/0)};var j=function(e,t){return function(a){var i=arguments.length;if(i<2||null==a)return a;for(var s=1;s<i;s++)for(var o=arguments[s],r=e(o),n=r.length,l=0;l<n;l++){var d=r[l];t&&void 0!==a[d]||(a[d]=o[d])}return a}},C=function(e){if(!w.isObject(e))return{};if(v)return v(e);y.prototype=e;var t=new y;return y.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},O=Math.pow(2,53)-1,S=k("length"),P=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=O};w.each=w.forEach=function(e,t,a){t=_(t,a);var i,s;if(P(e))for(i=0,s=e.length;i<s;i++)t(e[i],i,e);else{var o=w.keys(e);for(i=0,s=o.length;i<s;i++)t(e[o[i]],o[i],e)}return e},w.map=w.collect=function(e,t,a){t=x(t,a);for(var i=!P(e)&&w.keys(e),s=(i||e).length,o=Array(s),r=0;r<s;r++){var n=i?i[r]:r;o[r]=t(e[n],n,e)}return o},w.reduce=w.foldl=w.inject=e(1),w.reduceRight=w.foldr=e(-1),w.find=w.detect=function(e,t,a){var i;if(i=P(e)?w.findIndex(e,t,a):w.findKey(e,t,a),void 0!==i&&i!==-1)return e[i]},w.filter=w.select=function(e,t,a){var i=[];return t=x(t,a),w.each(e,function(e,a,s){t(e,a,s)&&i.push(e)}),i},w.reject=function(e,t,a){return w.filter(e,w.negate(x(t)),a)},w.every=w.all=function(e,t,a){t=x(t,a);for(var i=!P(e)&&w.keys(e),s=(i||e).length,o=0;o<s;o++){var r=i?i[o]:o;if(!t(e[r],r,e))return!1}return!0},w.some=w.any=function(e,t,a){t=x(t,a);for(var i=!P(e)&&w.keys(e),s=(i||e).length,o=0;o<s;o++){var r=i?i[o]:o;if(t(e[r],r,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,a,i){return P(e)||(e=w.values(e)),("number"!=typeof a||i)&&(a=0),w.indexOf(e,t,a)>=0},w.invoke=function(e,t){var a=h.call(arguments,2),i=w.isFunction(t);return w.map(e,function(e){var s=i?t:e[t];return null==s?s:s.apply(e,a)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,a){var i,s,o=-(1/0),r=-(1/0);if(null==t&&null!=e){e=P(e)?e:w.values(e);for(var n=0,l=e.length;n<l;n++)i=e[n],i>o&&(o=i)}else t=x(t,a),w.each(e,function(e,a,i){s=t(e,a,i),(s>r||s===-(1/0)&&o===-(1/0))&&(o=e,r=s)});return o},w.min=function(e,t,a){var i,s,o=1/0,r=1/0;if(null==t&&null!=e){e=P(e)?e:w.values(e);for(var n=0,l=e.length;n<l;n++)i=e[n],i<o&&(o=i)}else t=x(t,a),w.each(e,function(e,a,i){s=t(e,a,i),(s<r||s===1/0&&o===1/0)&&(o=e,r=s)});return o},w.shuffle=function(e){for(var t,a=P(e)?e:w.values(e),i=a.length,s=Array(i),o=0;o<i;o++)t=w.random(0,o),t!==o&&(s[o]=s[t]),s[t]=a[o];return s},w.sample=function(e,t,a){return null==t||a?(P(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,a){return t=x(t,a),w.pluck(w.map(e,function(e,a,i){return{value:e,index:a,criteria:t(e,a,i)}}).sort(function(e,t){var a=e.criteria,i=t.criteria;if(a!==i){if(a>i||void 0===a)return 1;if(a<i||void 0===i)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,a,i){var s={};return a=x(a,i),w.each(t,function(i,o){var r=a(i,o,t);e(s,i,r)}),s}};w.groupBy=E(function(e,t,a){w.has(e,a)?e[a].push(t):e[a]=[t]}),w.indexBy=E(function(e,t,a){e[a]=t}),w.countBy=E(function(e,t,a){w.has(e,a)?e[a]++:e[a]=1}),w.toArray=function(e){return e?w.isArray(e)?h.call(e):P(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:P(e)?e.length:w.keys(e).length},w.partition=function(e,t,a){t=x(t,a);var i=[],s=[];return w.each(e,function(e,a,o){(t(e,a,o)?i:s).push(e)}),[i,s]},w.first=w.head=w.take=function(e,t,a){if(null!=e)return null==t||a?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,a){return h.call(e,0,Math.max(0,e.length-(null==t||a?1:t)))},w.last=function(e,t,a){if(null!=e)return null==t||a?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,a){return h.call(e,null==t||a?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var I=function(e,t,a,i){for(var s=[],o=0,r=i||0,n=S(e);r<n;r++){var l=e[r];if(P(l)&&(w.isArray(l)||w.isArguments(l))){t||(l=I(l,t,a));var d=0,c=l.length;for(s.length+=c;d<c;)s[o++]=l[d++]}else a||(s[o++]=l)}return s};w.flatten=function(e,t){return I(e,t,!1)},w.without=function(e){return w.difference(e,h.call(arguments,1))},w.uniq=w.unique=function(e,t,a,i){w.isBoolean(t)||(i=a,a=t,t=!1),null!=a&&(a=x(a,i));for(var s=[],o=[],r=0,n=S(e);r<n;r++){var l=e[r],d=a?a(l,r,e):l;t?(r&&o===d||s.push(l),o=d):a?w.contains(o,d)||(o.push(d),s.push(l)):w.contains(s,l)||s.push(l)}return s},w.union=function(){return w.uniq(I(arguments,!0,!0))},w.intersection=function(e){for(var t=[],a=arguments.length,i=0,s=S(e);i<s;i++){var o=e[i];if(!w.contains(t,o)){for(var r=1;r<a&&w.contains(arguments[r],o);r++);r===a&&t.push(o)}}return t},w.difference=function(e){var t=I(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,S).length||0,a=Array(t),i=0;i<t;i++)a[i]=w.pluck(e,i);return a},w.object=function(e,t){for(var a={},i=0,s=S(e);i<s;i++)t?a[e[i]]=t[i]:a[e[i][0]]=e[i][1];return a},w.findIndex=i(1),w.findLastIndex=i(-1),w.sortedIndex=function(e,t,a,i){a=x(a,i,1);for(var s=a(t),o=0,r=S(e);o<r;){var n=Math.floor((o+r)/2);a(e[n])<s?o=n+1:r=n}return o},w.indexOf=s(1,w.findIndex,w.sortedIndex),w.lastIndexOf=s(-1,w.findLastIndex),w.range=function(e,t,a){null==t&&(t=e||0,e=0),a=a||1;for(var i=Math.max(Math.ceil((t-e)/a),0),s=Array(i),o=0;o<i;o++,e+=a)s[o]=e;return s};var A=function(e,t,a,i,s){if(!(i instanceof t))return e.apply(a,s);var o=C(e.prototype),r=e.apply(o,s);return w.isObject(r)?r:o};w.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,h.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var a=h.call(arguments,2),i=function(){return A(e,i,t,this,a.concat(h.call(arguments)))};return i},w.partial=function(e){var t=h.call(arguments,1),a=function(){for(var i=0,s=t.length,o=Array(s),r=0;r<s;r++)o[r]=t[r]===w?arguments[i++]:t[r];for(;i<arguments.length;)o.push(arguments[i++]);return A(e,a,this,this,o)};return a},w.bindAll=function(e){var t,a,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)a=arguments[t],e[a]=w.bind(e[a],e);return e},w.memoize=function(e,t){var a=function(i){var s=a.cache,o=""+(t?t.apply(this,arguments):i);return w.has(s,o)||(s[o]=e.apply(this,arguments)),s[o]};return a.cache={},a},w.delay=function(e,t){var a=h.call(arguments,2);return setTimeout(function(){return e.apply(null,a)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,a){var i,s,o,r=null,n=0;a||(a={});var l=function(){n=a.leading===!1?0:w.now(),r=null,o=e.apply(i,s),r||(i=s=null)};return function(){var d=w.now();n||a.leading!==!1||(n=d);var c=t-(d-n);return i=this,s=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),n=d,o=e.apply(i,s),r||(i=s=null)):r||a.trailing===!1||(r=setTimeout(l,c)),o}},w.debounce=function(e,t,a){var i,s,o,r,n,l=function(){var d=w.now()-r;d<t&&d>=0?i=setTimeout(l,t-d):(i=null,a||(n=e.apply(o,s),i||(o=s=null)))};return function(){o=this,s=arguments,r=w.now();var d=a&&!i;return i||(i=setTimeout(l,t)),d&&(n=e.apply(o,s),o=s=null),n}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var a=t,i=e[t].apply(this,arguments);a--;)i=e[a].call(this,i);return i}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var a;return function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=null),a}},w.once=w.partial(w.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var a in e)w.has(e,a)&&t.push(a);return T&&o(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var a in e)t.push(a);return T&&o(e,t),t},w.values=function(e){for(var t=w.keys(e),a=t.length,i=Array(a),s=0;s<a;s++)i[s]=e[t[s]];return i},w.mapObject=function(e,t,a){t=x(t,a);for(var i,s=w.keys(e),o=s.length,r={},n=0;n<o;n++)i=s[n],r[i]=t(e[i],i,e);return r},w.pairs=function(e){for(var t=w.keys(e),a=t.length,i=Array(a),s=0;s<a;s++)i[s]=[t[s],e[t[s]]];return i},w.invert=function(e){for(var t={},a=w.keys(e),i=0,s=a.length;i<s;i++)t[e[a[i]]]=a[i];return t},w.functions=w.methods=function(e){var t=[];for(var a in e)w.isFunction(e[a])&&t.push(a);return t.sort()},w.extend=j(w.allKeys),w.extendOwn=w.assign=j(w.keys),w.findKey=function(e,t,a){t=x(t,a);for(var i,s=w.keys(e),o=0,r=s.length;o<r;o++)if(i=s[o],t(e[i],i,e))return i},w.pick=function(e,t,a){var i,s,o={},r=e;if(null==r)return o;w.isFunction(t)?(s=w.allKeys(r),i=_(t,a)):(s=I(arguments,!1,!1,1),i=function(e,t,a){return t in a},r=Object(r));for(var n=0,l=s.length;n<l;n++){
var d=s[n],c=r[d];i(c,d,r)&&(o[d]=c)}return o},w.omit=function(e,t,a){if(w.isFunction(t))t=w.negate(t);else{var i=w.map(I(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(i,t)}}return w.pick(e,t,a)},w.defaults=j(w.allKeys,!0),w.create=function(e,t){var a=C(e);return t&&w.extendOwn(a,t),a},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var a=w.keys(t),i=a.length;if(null==e)return!i;for(var s=Object(e),o=0;o<i;o++){var r=a[o];if(t[r]!==s[r]||!(r in s))return!1}return!0};var M=function(e,t,a,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var s=m.call(e);if(s!==m.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===s;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,n=t.constructor;if(r!==n&&!(w.isFunction(r)&&r instanceof r&&w.isFunction(n)&&n instanceof n)&&"constructor"in e&&"constructor"in t)return!1}a=a||[],i=i||[];for(var l=a.length;l--;)if(a[l]===e)return i[l]===t;if(a.push(e),i.push(t),o){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!M(e[l],t[l],a,i))return!1}else{var d,c=w.keys(e);if(l=c.length,w.keys(t).length!==l)return!1;for(;l--;)if(d=c[l],!w.has(t,d)||!M(e[d],t[d],a,i))return!1}return a.pop(),i.pop(),!0};w.isEqual=function(e,t){return M(e,t)},w.isEmpty=function(e){return null==e||(P(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=f||function(e){return"[object Array]"===m.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return m.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===m.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&p.call(e,t)},w.noConflict=function(){return r._=n,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=k,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,a){var i=Array(Math.max(0,e));t=_(t,a,1);for(var s=0;s<e;s++)i[s]=t(s);return i},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=w.invert(G),L=function(e){var t=function(t){return e[t]},a="(?:"+w.keys(e).join("|")+")",i=RegExp(a),s=RegExp(a,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(s,t):e}};w.escape=L(G),w.unescape=L(R),w.result=function(e,t,a){var i=null==e?void 0:e[t];return void 0===i&&(i=a),w.isFunction(i)?i.call(e):i};var F=0;w.uniqueId=function(e){var t=++F+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,N=function(e){return"\\"+B[e]};w.template=function(e,t,a){!t&&a&&(t=a),t=w.defaults({},t,w.templateSettings);var i=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,a,i,r,n){return o+=e.slice(s,n).replace(U,N),s=n+t.length,a?o+="'+\n((__t=("+a+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var r=new Function(t.variable||"obj","_",o)}catch(n){throw n.source=o,n}var l=function(e){return r.call(this,e,w)},d=t.variable||"obj";return l.source="function("+d+"){\n"+o+"}",l},w.chain=function(e){var t=w(e);return t._chain=!0,t};var q=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var a=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),q(this,a.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];w.prototype[e]=function(){var a=this._wrapped;return t.apply(a,arguments),"shift"!==e&&"splice"!==e||0!==a.length||delete a[0],q(this,a)}}),w.each(["concat","join","slice"],function(e){var t=l[e];w.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return w})}).call(this)},{}]},{},["/home/travis/build/carnegieendowment/oci-sandbox-timeseries/app/assets/scripts/main.js"]);